head	1.3;
access;
symbols
	MLWorks_21c0_1999_03_25:1.3
	MLWorks_20c1_1998_08_20:1.3
	MLWorks_20c0_1998_08_04:1.3
	MLWorks_20b2c2_1998_06_19:1.3
	MLWorks_20b2_Windows_1998_06_12:1.3
	MLWorks_20b1c1_1998_05_07:1.3
	MLWorks_20b0_1998_04_07:1.3
	MLWorks_20b0_1998_03_20:1.3
	MLWorks_20m2_1998_02_16:1.2
	MLWorks_20m1_1997_10_23:1.2
	MLWorks_11r1:1.2.9.1.1.1.1
	MLWorks_11c0_1997_09_09:1.2.9.1.1.1
	MLWorks_10r3:1.2.9.1.3
	MLWorks_10r2_551:1.2.9.1.2
	MLWorks_11:1.2.9.1.1
	MLWorks_1_0_r2c2_1997_07_28:1.2.9.1
	MLWorks_20m0_1997_06_20:1.2
	MLWorks_1_0_r2c2_1997_06_14:1.2.9.1
	MLWorks_1_0_r2c1_released_1997_05_23:1.2.9.1
	MLWorks_1_0_r2c1_1997_05_12:1.2.9
	MLWorks_BugFix_1997_04_24:1.2
	MLWorks_1_0_r2_Win32_1997_04_11:1.2
	MLWorks_1_0_r2_Unix_1997_04_04:1.2
	MLWorks_1_0_1_ULTRASPARC_1997_02_24:1.2.7.1.1
	MLWorks_gui_1996_12_18:1.2.8
	MLWorks_1_0_Win32_1996_12_17:1.2.7
	MLWorks_1_0_Irix_1996_11_28_released_1996_12_17:1.2.5.1.1.1
	MLWorks_1_0_Unix_1996_11_14_released_1996_12_17:1.2.5.1
	MLWorks_1_0_Irix_1996_11_28:1.2.5.1.1
	MLWorks_1_0_Win32_1996_11_22:1.2.6
	MLWorks_1_0_Unix_1996_11_14:1.2.5
	MLWorks_Open_Beta2_1996_10_11:1.2.4
	MLWorks_License_dev:1.2.3
	MLWorks_1_open_beta_1996_09_13:1.2.2
	MLWorks_Open_Beta_1996_08_22:1.2
	MLWorks_Beta_1996_07_02:1.2
	MLWorks_Beta_1996_06_07:1.2
	MLWorks_Beta_1996_06_06:1.2
	MLWorks_Beta_1996_06_05:1.2
	MLWorks_Beta_1996_06_03:1.2
	MLWorks_Beta_1996_05_31:1.2
	MLWorks_Beta_1996_05_30:1.2
	ML_beta_release_12/08/94:1.2
	ML_beta_release_03/08/94:1.2
	ML_revised_beta_release_25/05/94:1.2
	ML_final_beta_release_02/03/94:1.2
	mlworks-28-01-1994:1.2
	Release:1.2
	mlworks-beta-01-09-1993:1.2
	MLWorks-1-0-4-29/01/1993:1.2
	MLWorks-1-0-3-21/12/1992:1.1;
locks; strict;
comment	@ * @;


1.3
date	98.02.18.11.56.00;	author mitchell;	state Exp;
branches;
next	1.2;

1.2
date	93.01.21.12.04.30;	author daveb;	state Exp;
branches
	1.2.1.1
	1.2.2.1
	1.2.3.1
	1.2.4.1
	1.2.5.1
	1.2.6.1
	1.2.7.1
	1.2.8.1
	1.2.9.1;
next	1.1;

1.1
date	92.11.04.17.11.54;	author daveb;	state Exp;
branches;
next	;

1.2.1.1
date	93.01.21.12.04.30;	author jont;	state Exp;
branches;
next	;

1.2.2.1
date	96.09.13.11.30.16;	author hope;	state Exp;
branches;
next	;

1.2.3.1
date	96.10.07.16.20.59;	author hope;	state Exp;
branches;
next	;

1.2.4.1
date	96.10.17.11.41.28;	author hope;	state Exp;
branches;
next	;

1.2.5.1
date	96.11.14.13.08.44;	author hope;	state Exp;
branches
	1.2.5.1.1.1;
next	;

1.2.5.1.1.1
date	96.11.28.15.18.35;	author hope;	state Exp;
branches;
next	;

1.2.6.1
date	96.11.22.18.26.11;	author hope;	state Exp;
branches;
next	;

1.2.7.1
date	96.12.17.18.04.35;	author hope;	state Exp;
branches
	1.2.7.1.1.1;
next	;

1.2.7.1.1.1
date	97.02.24.11.56.25;	author hope;	state Exp;
branches;
next	;

1.2.8.1
date	96.12.18.09.59.42;	author hope;	state Exp;
branches;
next	;

1.2.9.1
date	97.05.12.10.58.27;	author hope;	state Exp;
branches
	1.2.9.1.1.1
	1.2.9.1.2.1
	1.2.9.1.3.1;
next	;

1.2.9.1.1.1
date	97.07.28.18.37.59;	author daveb;	state Exp;
branches
	1.2.9.1.1.1.1.1;
next	;

1.2.9.1.1.1.1.1
date	97.10.07.12.03.03;	author jkbrook;	state Exp;
branches;
next	;

1.2.9.1.2.1
date	97.09.08.17.30.11;	author daveb;	state Exp;
branches;
next	;

1.2.9.1.3.1
date	97.09.09.14.28.15;	author daveb;	state Exp;
branches;
next	;


desc
@Part of the ML test suite.
@


1.3
log
@[Bug #30349]
Fix test to avoid non-unit sequence warning
@
text
@(*
Some cases that have broken the switch translation: 2

Result: OK

$Log: switch2.sml,v $
 * Revision 1.2  1993/01/21  12:04:30  daveb
 * Updated header.
 *
Revision 1.1  1992/11/04  17:11:54  daveb
Initial revision

Copyright (c) 1992 Harlequin Ltd.
*)


(* Switch on an IMM and a default.  The type must contain a VCC that
   isn't in the switch.  We can't have another IMM in the type.
   We must be swiching on an IMM.
   Abstraction is needed to avoid optimisation of constants.
   Similarly for the second call; if there were only one call
     then eta-abstraction would allow constant folding again.
*)

    datatype btree =
      LEAF
    | N1 of int
    | N2 of btree

    fun insert (N1 t1) = N1 23
      | insert LEAF = LEAF
      | insert other_shape = other_shape

    fun define' mapping =
        (ignore(insert mapping); insert mapping)
      ;

define' LEAF
@


1.2
log
@Updated header.
@
text
@d7 3
d35 1
a35 1
        (insert mapping; insert mapping)
@


1.2.9.1
log
@branched from 1.2
@
text
@a6 3
 * Revision 1.2  1993/01/21  12:04:30  daveb
 * Updated header.
 *
@


1.2.9.1.3.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r3
@
text
@a6 3
 * Revision 1.2.9.1  1997/05/12  10:58:27  hope
 * branched from 1.2
 *
@


1.2.9.1.2.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r2_551
@
text
@a6 3
 * Revision 1.2.9.1  1997/05/12  10:58:27  hope
 * branched from 1.2
 *
@


1.2.9.1.1.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
@
text
@a6 3
 * Revision 1.2.9.1  1997/05/12  10:58:27  hope
 * branched from 1.2
 *
@


1.2.9.1.1.1.1.1
log
@branched from MLWorks_11 for label MLWorks_11r1
@
text
@a6 3
 * Revision 1.2.9.1.1.1  1997/07/28  18:37:59  daveb
 * branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
 *
@


1.2.8.1
log
@branched from 1.2
@
text
@a6 3
 * Revision 1.2  1993/01/21  12:04:30  daveb
 * Updated header.
 *
@


1.2.7.1
log
@branched from 1.2
@
text
@a6 3
 * Revision 1.2  1993/01/21  12:04:30  daveb
 * Updated header.
 *
@


1.2.7.1.1.1
log
@branched from 1.2.7.1
@
text
@a6 3
 * Revision 1.2.7.1  1996/12/17  18:04:35  hope
 * branched from 1.2
 *
@


1.2.6.1
log
@branched from 1.2
@
text
@a6 3
 * Revision 1.2  1993/01/21  12:04:30  daveb
 * Updated header.
 *
@


1.2.5.1
log
@branched from 1.2
@
text
@a6 3
 * Revision 1.2  1993/01/21  12:04:30  daveb
 * Updated header.
 *
@


1.2.5.1.1.1
log
@branched from 1.2.5.1
@
text
@a6 3
 * Revision 1.2.5.1  1996/11/14  13:08:44  hope
 * branched from 1.2
 *
@


1.2.4.1
log
@branched from 1.2
@
text
@a6 3
 * Revision 1.2  1993/01/21  12:04:30  daveb
 * Updated header.
 *
@


1.2.3.1
log
@branched from 1.2
@
text
@a6 3
 * Revision 1.2  1993/01/21  12:04:30  daveb
 * Updated header.
 *
@


1.2.2.1
log
@branched from 1.2
@
text
@a6 3
 * Revision 1.2  1993/01/21  12:04:30  daveb
 * Updated header.
 *
@


1.2.1.1
log
@Fork for bug fixing
@
text
@a6 3
Revision 1.2  1993/01/21  12:04:30  daveb
Updated header.

@


1.1
log
@Initial revision
@
text
@a0 1
(* switch2.sml *)
d2 8
a9 1
$Log$
a12 1
(* Some cases that have broken the switch translation: 2 *)
@
