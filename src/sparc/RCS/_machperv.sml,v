head	1.21;
access;
symbols
	MLW_daveb_inline_1_4_99:1.21.4
	MLWorks_21c0_1999_03_25:1.21
	MLWorks_20c1_1998_08_20:1.21
	MLWorks_20c0_1998_08_04:1.21
	MLWorks_20b2c2_1998_06_19:1.21
	MLWorks_20b2_Windows_1998_06_12:1.21
	MLWorks_20b1c1_1998_05_07:1.21
	MLWorks_20b0_1998_04_07:1.21
	MLWorks_20b0_1998_03_20:1.21
	MLWorks_20m2_1998_02_16:1.21
	MLWorks_20m1_1997_10_23:1.21
	MLWorks_11r1:1.21.1.1.1.1.1
	MLWorks_workspace_97:1.21.3
	MLWorks_dt_wizard:1.21.2
	MLWorks_11c0_1997_09_09:1.21.1.1.1.1
	MLWorks_10r3:1.21.1.1.3
	MLWorks_10r2_551:1.21.1.1.2
	MLWorks_11:1.21.1.1.1
	MLWorks_1_0_r2c2_1997_07_28:1.21.1.1
	MLWorks_20m0_1997_06_20:1.21
	MLWorks_1_0_r2c2_1997_06_14:1.21.1.1
	MLWorks_1_0_r2c1_released_1997_05_23:1.21.1.1
	MLWorks_1_0_r2c1_1997_05_12:1.21.1
	MLWorks_BugFix_1997_04_24:1.21
	MLWorks_1_0_r2_Win32_1997_04_11:1.21
	MLWorks_1_0_r2_Unix_1997_04_04:1.21
	MLWorks_1_0_1_ULTRASPARC_1997_02_24:1.18.6.1.1
	MLWorks_gui_1996_12_18:1.18.7
	MLWorks_1_0_Win32_1996_12_17:1.18.6
	MLWorks_1_0_Irix_1996_11_28_released_1996_12_17:1.18.4.1.1.1
	MLWorks_1_0_Unix_1996_11_14_released_1996_12_17:1.18.4.1
	MLWorks_1_0_Irix_1996_11_28:1.18.4.1.1
	MLWorks_1_0_Win32_1996_11_22:1.18.5
	MLWorks_1_0_Unix_1996_11_14:1.18.4
	MLWorks_Open_Beta2_1996_10_11:1.18.3
	MLWorks_License_dev:1.18.2
	MLWorks_1_open_beta_1996_09_13:1.18.1
	MLWorks_Open_Beta_1996_08_22:1.18
	MLWorks_Beta_1996_07_02:1.18
	MLWorks_Beta_1996_06_07:1.18
	MLWorks_Beta_1996_06_06:1.18
	MLWorks_Beta_1996_06_05:1.18
	MLWorks_Beta_1996_06_03:1.18
	MLWorks_Beta_1996_05_31:1.18
	MLWorks_Beta_1996_05_30:1.18
	ML_beta_release_12/08/94:1.6
	ML_beta_release_03/08/94:1.6
	ML_revised_beta_release_25/05/94:1.6
	ML_final_beta_release_02/03/94:1.6
	mlworks-28-01-1994:1.6
	Release:1.5
	mlworks-beta-01-09-1993:1.5
	MLWorks-1-0-4-29/01/1993:1.1
	MLWorks-1-0-3-21/12/1992:1.1
	MLWorks-1-0-2-15/12/1992:1.1
	MLWorks-1-0-1-04/12/1992:1.1;
locks; strict;
comment	@ * @;


1.21
date	97.01.24.11.05.45;	author matthew;	state Exp;
branches
	1.21.1.1
	1.21.2.1
	1.21.3.1
	1.21.4.1;
next	1.20;

1.20
date	97.01.20.15.08.30;	author matthew;	state Exp;
branches;
next	1.19;

1.19
date	96.12.19.13.14.40;	author andreww;	state Exp;
branches;
next	1.18;

1.18
date	96.04.19.15.37.28;	author matthew;	state Exp;
branches
	1.18.1.1
	1.18.2.1
	1.18.3.1
	1.18.4.1
	1.18.5.1
	1.18.6.1
	1.18.7.1;
next	1.17;

1.17
date	96.02.09.14.43.52;	author jont;	state Exp;
branches;
next	1.16;

1.16
date	96.01.31.16.40.31;	author jont;	state Exp;
branches;
next	1.15;

1.15
date	95.09.12.12.23.30;	author daveb;	state Exp;
branches;
next	1.14;

1.14
date	95.07.28.15.33.00;	author jont;	state Exp;
branches;
next	1.13;

1.13
date	95.07.25.14.40.51;	author jont;	state Exp;
branches;
next	1.12;

1.12
date	95.07.20.15.25.59;	author jont;	state Exp;
branches;
next	1.11;

1.11
date	95.07.14.09.37.54;	author jont;	state Exp;
branches;
next	1.10;

1.10
date	95.04.28.11.48.14;	author matthew;	state Exp;
branches;
next	1.9;

1.9
date	95.02.10.15.58.35;	author matthew;	state Exp;
branches;
next	1.8;

1.8
date	94.11.24.10.24.45;	author matthew;	state Exp;
branches;
next	1.7;

1.7
date	94.09.09.16.38.50;	author jont;	state Exp;
branches;
next	1.6;

1.6
date	93.12.17.15.14.06;	author io;	state Exp;
branches;
next	1.5;

1.5
date	93.07.20.12.33.54;	author jont;	state Exp;
branches
	1.5.1.1;
next	1.4;

1.4
date	93.07.07.15.06.15;	author daveb;	state Exp;
branches;
next	1.3;

1.3
date	93.03.23.10.35.35;	author jont;	state Exp;
branches;
next	1.2;

1.2
date	93.03.04.17.09.12;	author jont;	state Exp;
branches;
next	1.1;

1.1
date	92.11.21.19.24.41;	author jont;	state Exp;
branches;
next	;

1.5.1.1
date	93.07.20.12.33.54;	author jont;	state Exp;
branches;
next	;

1.18.1.1
date	96.09.13.11.26.22;	author hope;	state Exp;
branches;
next	;

1.18.2.1
date	96.10.07.16.16.53;	author hope;	state Exp;
branches;
next	;

1.18.3.1
date	96.10.17.11.36.28;	author hope;	state Exp;
branches;
next	;

1.18.4.1
date	96.11.14.13.04.30;	author hope;	state Exp;
branches
	1.18.4.1.1.1;
next	;

1.18.4.1.1.1
date	96.11.28.15.13.56;	author hope;	state Exp;
branches;
next	;

1.18.5.1
date	96.11.22.18.21.57;	author hope;	state Exp;
branches;
next	;

1.18.6.1
date	96.12.17.17.59.54;	author hope;	state Exp;
branches
	1.18.6.1.1.1;
next	;

1.18.6.1.1.1
date	97.02.24.11.51.33;	author hope;	state Exp;
branches;
next	;

1.18.7.1
date	96.12.18.09.55.17;	author hope;	state Exp;
branches;
next	;

1.21.1.1
date	97.05.12.10.49.59;	author hope;	state Exp;
branches
	1.21.1.1.1.1
	1.21.1.1.2.1
	1.21.1.1.3.1;
next	;

1.21.1.1.1.1
date	97.07.28.18.32.12;	author daveb;	state Exp;
branches
	1.21.1.1.1.1.1.1;
next	;

1.21.1.1.1.1.1.1
date	97.10.07.11.58.19;	author jkbrook;	state Exp;
branches;
next	;

1.21.1.1.2.1
date	97.09.08.17.25.26;	author daveb;	state Exp;
branches;
next	;

1.21.1.1.3.1
date	97.09.09.14.22.05;	author daveb;	state Exp;
branches;
next	;

1.21.2.1
date	97.09.10.19.41.09;	author brucem;	state Exp;
branches;
next	;

1.21.3.1
date	97.09.11.21.08.44;	author daveb;	state Exp;
branches;
next	;

1.21.4.1
date	99.04.01.18.07.36;	author daveb;	state Exp;
branches;
next	;


desc
@Pervasive dependence on target machine (ie what can be inlined)
@


1.21
log
@Adding version options
@
text
@(*   ==== MACHINE SPECIFICATION (PERVASIVES) ====
 *              FUNCTOR
 *
 * Copyright (C) 1991 Harlequin Ltd.
 *
 * Revision Log
 * $Log: _machperv.sml,v $
 * Revision 1.20  1997/01/20  15:08:30  matthew
 *  Adding inline multiply
 *
 * Revision 1.19  1996/12/19  13:14:40  andreww
 * [Bug #1818]
 * adding FloatArray primitives.
 *
 * Revision 1.18  1996/04/19  15:37:28  matthew
 * New exceptions
 *
 * Revision 1.17  1996/02/09  14:43:52  jont
 * Modify sized integer operations to raise overflow
 *
 * Revision 1.16  1996/01/31  16:40:31  jont
 * Set int32uminus to be inline
 *
 * Revision 1.15  1995/09/12  12:23:30  daveb
 * Added pervasives for Word32, Int32, etc.
 *
 * Revision 1.14  1995/07/28  15:33:00  jont
 * Handle INTMOD and INTDIV
 *
 * Revision 1.13  1995/07/25  14:40:51  jont
 * Add EXOVERFLOW
 *
 * Revision 1.12  1995/07/20  15:25:59  jont
 * Add primitive operations on words
 *
 * Revision 1.11  1995/07/14  09:37:54  jont
 * Add new operations on chars
 *
 * Revision 1.10  1995/04/28  11:48:14  matthew
 * Adding CAST and UMAP primitives
 *
 * Revision 1.9  1995/02/10  15:58:35  matthew
 * Adding GET_IMPLICIT builtin
 *
 * Revision 1.8  1994/11/24  10:24:45  matthew
 * Adding new pervasives
 *
 * Revision 1.7  1994/09/09  16:38:50  jont
 * Move in machine specific stuff from _pervasives.sml
 *
 * Revision 1.6  1993/12/17  15:14:06  io
 * moved machperv to main/
 *
 * Revision 1.5  1993/07/20  12:33:54  jont
 * Added unsafeintplus for generating large integers
 *
 * Revision 1.4  1993/07/07  15:06:15  daveb
 * Removed EX*VAL values, since we no longer have exception environments.
 *
 * Revision 1.3  1993/03/23  10:35:35  jont
 * Added vector primitives
 *
 * Revision 1.2  1993/03/04  17:09:12  jont
 * Added builtin string relationals
 *
 * Revision 1.1  1992/11/21  19:24:41  jont
 * Initial revision
 *
 *)

require "../main/pervasives";
require "../main/options";
require "../main/machperv";

functor MachPerv (
  structure Pervasives	: PERVASIVES
  structure Options : OPTIONS
) : MACHPERV =

struct
  structure Pervasives = Pervasives
  type CompilerOptions = Options.compiler_options

  (*  === MACHINE CAPABILITIES ===  *)

  fun is_inline (Options.COMPILEROPTIONS {sparc_v7,...}, b) =
    let
      val inline_multiply = not sparc_v7
    in
      case b of
        Pervasives.REF =>  true
      | Pervasives.EXORD => false
      | Pervasives.EXCHR => false
      | Pervasives.EXDIV => false
      | Pervasives.EXSQRT => false
      | Pervasives.EXEXP => false
      | Pervasives.EXLN => false
      | Pervasives.EXIO => false
      | Pervasives.EXMATCH => false
      | Pervasives.EXBIND => false
      | Pervasives.EXINTERRUPT => false
      | Pervasives.EXRANGE => false
      | Pervasives.EXOVERFLOW => false
      | Pervasives.MAP => false
      | Pervasives.UMAP => false
      | Pervasives.REV => false
      | Pervasives.NOT => false
      | Pervasives.ABS => true
      | Pervasives.FLOOR => true
      | Pervasives.REAL => true
      | Pervasives.SQRT => true
      | Pervasives.SIN => false
      | Pervasives.COS => false
      | Pervasives.ARCTAN => false
      | Pervasives.EXP => false
      | Pervasives.LN => false
      | Pervasives.SIZE => true
      | Pervasives.CHR => true
      | Pervasives.ORD => true
      | Pervasives.CHARCHR => true
      | Pervasives.CHARORD => true
      | Pervasives.ORDOF => true
      | Pervasives.EXPLODE => false
      | Pervasives.IMPLODE => false
      | Pervasives.DEREF => true
      | Pervasives.FDIV => true
      | Pervasives.DIV => false
      | Pervasives.MOD => false
      | Pervasives.PLUS => false
      | Pervasives.STAR => false
      | Pervasives.MINUS => false
      | Pervasives.HAT => false
      | Pervasives.AT => false
      | Pervasives.NE => false
      | Pervasives.LESS => false
      | Pervasives.GREATER => false
      | Pervasives.LESSEQ => false
      | Pervasives.GREATEREQ => false
      | Pervasives.BECOMES => true
      | Pervasives.O => false
      | Pervasives.UMINUS => false
      | Pervasives.EQ => true
      | Pervasives.EQFUN => false
      | Pervasives.LOAD_STRING => true
      | Pervasives.REALPLUS => true
      | Pervasives.INTPLUS => true
      | Pervasives.UNSAFEINTPLUS => true
      | Pervasives.UNSAFEINTMINUS => true
      | Pervasives.REALSTAR => true
      | Pervasives.INTSTAR => inline_multiply
      | Pervasives.REALMINUS => true
      | Pervasives.INTMINUS => true
      | Pervasives.REALUMINUS => true
      | Pervasives.INTUMINUS => true
      | Pervasives.INTDIV => false
      | Pervasives.INTMOD => false
      | Pervasives.INTLESS => true
      | Pervasives.REALLESS => true
      | Pervasives.INTGREATER => true
      | Pervasives.REALGREATER => true
      | Pervasives.INTLESSEQ => true
      | Pervasives.REALLESSEQ => true
      | Pervasives.INTGREATEREQ => true
      | Pervasives.REALGREATEREQ => true
      | Pervasives.INTEQ => true
      | Pervasives.INTNE => true
      | Pervasives.REALEQ => true
      | Pervasives.REALNE => true
      | Pervasives.STRINGEQ => false
      | Pervasives.STRINGNE => false
      | Pervasives.STRINGLT => false
      | Pervasives.STRINGLE => false
      | Pervasives.STRINGGT => false
      | Pervasives.STRINGGE => false
      | Pervasives.CHAREQ => true
      | Pervasives.CHARNE => true
      | Pervasives.CHARLT => true
      | Pervasives.CHARLE => true
      | Pervasives.CHARGT => true
      | Pervasives.CHARGE => true
      | Pervasives.INTABS => true
      | Pervasives.REALABS => true
      | Pervasives.CALL_C => true
      | Pervasives.ARRAY_FN => true
      | Pervasives.LENGTH => true
      | Pervasives.SUB  => true
      | Pervasives.UPDATE => true
      | Pervasives.UNSAFE_SUB  => true
      | Pervasives.UNSAFE_UPDATE => true
      | Pervasives.BYTEARRAY => true
      | Pervasives.BYTEARRAY_LENGTH => true
      | Pervasives.BYTEARRAY_SUB  => true
      | Pervasives.BYTEARRAY_UPDATE => true
      | Pervasives.BYTEARRAY_UNSAFE_SUB  => true
      | Pervasives.BYTEARRAY_UNSAFE_UPDATE => true
      | Pervasives.FLOATARRAY => true
      | Pervasives.FLOATARRAY_LENGTH => true
      | Pervasives.FLOATARRAY_SUB  => true
      | Pervasives.FLOATARRAY_UPDATE => true
      | Pervasives.FLOATARRAY_UNSAFE_SUB  => true
      | Pervasives.FLOATARRAY_UNSAFE_UPDATE => true
      | Pervasives.VECTOR => false
      | Pervasives.VECTOR_LENGTH => true
      | Pervasives.VECTOR_SUB => true
      | Pervasives.EXSIZE => false
      | Pervasives.EXSUBSCRIPT => false
      | Pervasives.ANDB => true
      | Pervasives.LSHIFT => true
      | Pervasives.NOTB => true
      | Pervasives.ORB => true
      | Pervasives.RSHIFT => true 
      | Pervasives.ARSHIFT => true 
      | Pervasives.XORB => true 
      | Pervasives.IDENT_FN => false
      | Pervasives.ML_OFFSET => true
      | Pervasives.ENTUPLE => false
      | Pervasives.ML_CALL => true
      | Pervasives.ML_REQUIRE => false
      | Pervasives.CAST => true
      | Pervasives.ALLOC_STRING => true
      | Pervasives.ALLOC_VECTOR => true
      | Pervasives.ALLOC_PAIR => true
      | Pervasives.RECORD_UNSAFE_SUB => true
      | Pervasives.RECORD_UNSAFE_UPDATE => true
      | Pervasives.STRING_UNSAFE_SUB => true
      | Pervasives.STRING_UNSAFE_UPDATE => true
      | Pervasives.LOAD_VAR => true
      | Pervasives.LOAD_EXN => true
      | Pervasives.LOAD_STRUCT => true
      | Pervasives.LOAD_FUNCT => true
      | Pervasives.GET_IMPLICIT => true
      | Pervasives.WORDEQ => true
      | Pervasives.WORDNE => true
      | Pervasives.WORDLT => true
      | Pervasives.WORDLE => true
      | Pervasives.WORDGT => true
      | Pervasives.WORDGE => true
      | Pervasives.WORDPLUS => true
      | Pervasives.WORDMINUS => true
      | Pervasives.WORDSTAR => inline_multiply
      | Pervasives.WORDDIV => false
      | Pervasives.WORDMOD => false
      | Pervasives.WORDORB => true
      | Pervasives.WORDXORB => true
      | Pervasives.WORDANDB => true
      | Pervasives.WORDNOTB => true
      | Pervasives.WORDLSHIFT => true
      | Pervasives.WORDRSHIFT => true
      | Pervasives.WORDARSHIFT => true
      | Pervasives.INT32EQ => true
      | Pervasives.INT32NE => true
      | Pervasives.INT32LESS => true
      | Pervasives.INT32LESSEQ => true
      | Pervasives.INT32GREATER => true
      | Pervasives.INT32GREATEREQ => true
      | Pervasives.INT32PLUS => true
      | Pervasives.INT32MINUS => true
      | Pervasives.INT32STAR => inline_multiply
      | Pervasives.INT32DIV => false
      | Pervasives.INT32MOD => false
      | Pervasives.INT32ABS => true
      | Pervasives.INT32UMINUS => true
      | Pervasives.WORD32EQ => true
      | Pervasives.WORD32NE => true
      | Pervasives.WORD32LT => true
      | Pervasives.WORD32LE => true
      | Pervasives.WORD32GT => true
      | Pervasives.WORD32GE => true
      | Pervasives.WORD32PLUS => true
      | Pervasives.WORD32MINUS => true
      | Pervasives.WORD32STAR => inline_multiply
      | Pervasives.WORD32DIV => false
      | Pervasives.WORD32MOD => false
      | Pervasives.WORD32ORB => true
      | Pervasives.WORD32XORB => true
      | Pervasives.WORD32ANDB => true
      | Pervasives.WORD32NOTB => true
      | Pervasives.WORD32LSHIFT => true
      | Pervasives.WORD32RSHIFT => true
      | Pervasives.WORD32ARSHIFT => true
    end

  (*  === EXTRACT IMPLICIT REFERENCES OF PERVASIVE ===
   *
   *  Maps a pervasive onto the list of pervasives it references implicitly
   *  (such as exceptions).
   *
   *  NOTE: At the moment the contents of the list must match what Mir_Cg
   *  expects.
   *
   *  This is the machine-specific bit of this file.
   *)

  (* The MIR uses this to determine when to generate
   * exception-handling code, as well as what information to keep in
   * closures. *)

  fun implicit_references Pervasives.INTPLUS          = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.INTSTAR          = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.INTMINUS         = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.INTUMINUS        = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.INTABS           = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.INT32PLUS        = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.INT32STAR        = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.INT32MINUS       = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.INT32UMINUS      = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.INT32ABS         = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.DIV              = [Pervasives.EXOVERFLOW,Pervasives.EXDIV]
    | implicit_references Pervasives.INTDIV           = [Pervasives.EXOVERFLOW,Pervasives.EXDIV]
    | implicit_references Pervasives.INT32DIV         = [Pervasives.EXOVERFLOW,Pervasives.EXDIV]
    | implicit_references Pervasives.WORDDIV          = [Pervasives.EXDIV]
    | implicit_references Pervasives.WORD32DIV        = [Pervasives.EXDIV]
    | implicit_references Pervasives.REALPLUS         = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.REALSTAR         = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.REALMINUS        = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.REALUMINUS       = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.REALABS          = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.FDIV             = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.MOD              = [Pervasives.EXDIV]
    | implicit_references Pervasives.INTMOD           = [Pervasives.EXDIV]
    | implicit_references Pervasives.INT32MOD         = [Pervasives.EXDIV]
    | implicit_references Pervasives.WORDMOD          = [Pervasives.EXDIV]
    | implicit_references Pervasives.WORD32MOD        = [Pervasives.EXDIV]
    | implicit_references Pervasives.FLOOR            = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.SQRT             = [Pervasives.EXSQRT]
    | implicit_references Pervasives.EXP              = [Pervasives.EXEXP]
    | implicit_references Pervasives.LN               = [Pervasives.EXLN]
    | implicit_references Pervasives.ORD              = [Pervasives.EXORD]
    | implicit_references Pervasives.ORDOF            = [Pervasives.EXORD]
    | implicit_references Pervasives.CHR              = [Pervasives.EXCHR]
    | implicit_references Pervasives.CHARCHR          = [Pervasives.EXCHR]
    | implicit_references Pervasives.ARRAY_FN         = [Pervasives.EXSIZE]
    | implicit_references Pervasives.SUB              = [Pervasives.EXSUBSCRIPT]
    | implicit_references Pervasives.UPDATE           = [Pervasives.EXSUBSCRIPT]
    | implicit_references Pervasives.BYTEARRAY        = [Pervasives.EXSIZE]
    | implicit_references Pervasives.BYTEARRAY_SUB    = [Pervasives.EXSUBSCRIPT]
    | implicit_references Pervasives.BYTEARRAY_UPDATE = [Pervasives.EXSUBSCRIPT]
    | implicit_references Pervasives.FLOATARRAY        = [Pervasives.EXSIZE]
    | implicit_references Pervasives.FLOATARRAY_SUB    = [Pervasives.EXSUBSCRIPT]
    | implicit_references Pervasives.FLOATARRAY_UPDATE = [Pervasives.EXSUBSCRIPT]
    | implicit_references Pervasives.VECTOR_SUB       = [Pervasives.EXSUBSCRIPT]
    | implicit_references Pervasives.EQ	              = [Pervasives.EQFUN]
    | implicit_references _	                      = []
    
  fun is_fun Pervasives.REF = true
    | is_fun Pervasives.EXORD = false
    | is_fun Pervasives.EXCHR = false
    | is_fun Pervasives.EXDIV = false
    | is_fun Pervasives.EXSQRT = false
    | is_fun Pervasives.EXEXP = false
    | is_fun Pervasives.EXLN = false
    | is_fun Pervasives.EXIO = false
    | is_fun Pervasives.EXMATCH = false
    | is_fun Pervasives.EXBIND = false
    | is_fun Pervasives.EXINTERRUPT = false
    | is_fun Pervasives.EXRANGE = false
    | is_fun Pervasives.EXOVERFLOW = false
    | is_fun Pervasives.MAP = true
    | is_fun Pervasives.UMAP = true
    | is_fun Pervasives.REV = true
    | is_fun Pervasives.NOT = true
    | is_fun Pervasives.ABS = true
    | is_fun Pervasives.FLOOR = true
    | is_fun Pervasives.REAL = true
    | is_fun Pervasives.SQRT = true
    | is_fun Pervasives.SIN = true
    | is_fun Pervasives.COS = true
    | is_fun Pervasives.ARCTAN = true
    | is_fun Pervasives.EXP = true
    | is_fun Pervasives.LN = true
    | is_fun Pervasives.SIZE = true
    | is_fun Pervasives.CHR = true
    | is_fun Pervasives.ORD = true
    | is_fun Pervasives.CHARCHR = true
    | is_fun Pervasives.CHARORD = true
    | is_fun Pervasives.ORDOF = true
    | is_fun Pervasives.EXPLODE = true
    | is_fun Pervasives.IMPLODE = true
    | is_fun Pervasives.DEREF = true
    | is_fun Pervasives.FDIV = true
    | is_fun Pervasives.DIV = true
    | is_fun Pervasives.MOD = true
    | is_fun Pervasives.INTMOD = true
    | is_fun Pervasives.INTDIV = true
    | is_fun Pervasives.PLUS = false
    | is_fun Pervasives.STAR = false
    | is_fun Pervasives.MINUS = false
    | is_fun Pervasives.HAT = true
    | is_fun Pervasives.AT = true
    | is_fun Pervasives.NE = true
    | is_fun Pervasives.LESS = false
    | is_fun Pervasives.GREATER = false
    | is_fun Pervasives.LESSEQ = false
    | is_fun Pervasives.GREATEREQ = false
    | is_fun Pervasives.BECOMES = true
    | is_fun Pervasives.O = true
    | is_fun Pervasives.UMINUS = false
    | is_fun Pervasives.EQ = true
    | is_fun Pervasives.EQFUN = true
    | is_fun Pervasives.LOAD_STRING = false
    | is_fun Pervasives.REALPLUS = true
    | is_fun Pervasives.INTPLUS = true
    | is_fun Pervasives.UNSAFEINTPLUS = true
    | is_fun Pervasives.UNSAFEINTMINUS = true
    | is_fun Pervasives.REALSTAR = true
    | is_fun Pervasives.INTSTAR = true
    | is_fun Pervasives.REALMINUS = true
    | is_fun Pervasives.INTMINUS = true
    | is_fun Pervasives.REALUMINUS = true
    | is_fun Pervasives.INTUMINUS = true
    | is_fun Pervasives.INTLESS = true
    | is_fun Pervasives.REALLESS = true
    | is_fun Pervasives.INTGREATER = true
    | is_fun Pervasives.REALGREATER = true
    | is_fun Pervasives.INTLESSEQ = true
    | is_fun Pervasives.REALLESSEQ = true
    | is_fun Pervasives.INTGREATEREQ = true
    | is_fun Pervasives.REALGREATEREQ = true
    | is_fun Pervasives.INTEQ = true
    | is_fun Pervasives.INTNE = true
    | is_fun Pervasives.REALEQ = true
    | is_fun Pervasives.REALNE = true
    | is_fun Pervasives.STRINGEQ = true
    | is_fun Pervasives.STRINGNE = true
    | is_fun Pervasives.STRINGLT = true
    | is_fun Pervasives.STRINGLE = true
    | is_fun Pervasives.STRINGGT = true
    | is_fun Pervasives.STRINGGE = true
    | is_fun Pervasives.CHAREQ = true
    | is_fun Pervasives.CHARNE = true
    | is_fun Pervasives.CHARLT = true
    | is_fun Pervasives.CHARLE = true
    | is_fun Pervasives.CHARGT = true
    | is_fun Pervasives.CHARGE = true
    | is_fun Pervasives.INTABS = true
    | is_fun Pervasives.REALABS = true
    | is_fun Pervasives.CALL_C = true
    | is_fun Pervasives.ARRAY_FN = true
    | is_fun Pervasives.LENGTH = true
    | is_fun Pervasives.SUB = true
    | is_fun Pervasives.UPDATE =true
    | is_fun Pervasives.UNSAFE_SUB = true
    | is_fun Pervasives.UNSAFE_UPDATE =true
    | is_fun Pervasives.BYTEARRAY = true
    | is_fun Pervasives.BYTEARRAY_LENGTH = true
    | is_fun Pervasives.BYTEARRAY_SUB = true
    | is_fun Pervasives.BYTEARRAY_UPDATE =true
    | is_fun Pervasives.BYTEARRAY_UNSAFE_SUB = true
    | is_fun Pervasives.BYTEARRAY_UNSAFE_UPDATE = true
    | is_fun Pervasives.FLOATARRAY = true
    | is_fun Pervasives.FLOATARRAY_LENGTH = true
    | is_fun Pervasives.FLOATARRAY_SUB = true
    | is_fun Pervasives.FLOATARRAY_UPDATE =true
    | is_fun Pervasives.FLOATARRAY_UNSAFE_SUB = true
    | is_fun Pervasives.FLOATARRAY_UNSAFE_UPDATE = true
    | is_fun Pervasives.VECTOR = true
    | is_fun Pervasives.VECTOR_LENGTH = true
    | is_fun Pervasives.VECTOR_SUB = true
    | is_fun Pervasives.EXSIZE = false
    | is_fun Pervasives.EXSUBSCRIPT =false
    | is_fun Pervasives.ANDB = true
    | is_fun Pervasives.LSHIFT = true
    | is_fun Pervasives.NOTB = true
    | is_fun Pervasives.ORB = true
    | is_fun Pervasives.RSHIFT = true
    | is_fun Pervasives.ARSHIFT = true
    | is_fun Pervasives.XORB = true
    | is_fun Pervasives.CAST = true
    | is_fun Pervasives.ALLOC_STRING = true
    | is_fun Pervasives.ALLOC_VECTOR = true
    | is_fun Pervasives.ALLOC_PAIR = true
    | is_fun Pervasives.RECORD_UNSAFE_SUB = true
    | is_fun Pervasives.RECORD_UNSAFE_UPDATE = true
    | is_fun Pervasives.STRING_UNSAFE_SUB = true
    | is_fun Pervasives.STRING_UNSAFE_UPDATE = true
    | is_fun Pervasives.WORDEQ = true
    | is_fun Pervasives.WORDNE = true
    | is_fun Pervasives.WORDLT = true
    | is_fun Pervasives.WORDLE = true
    | is_fun Pervasives.WORDGT = true
    | is_fun Pervasives.WORDGE = true
    | is_fun Pervasives.WORDPLUS = true
    | is_fun Pervasives.WORDMINUS = true
    | is_fun Pervasives.WORDSTAR = true
    | is_fun Pervasives.WORDDIV = true
    | is_fun Pervasives.WORDMOD = true
    | is_fun Pervasives.WORDORB = true
    | is_fun Pervasives.WORDXORB = true
    | is_fun Pervasives.WORDANDB = true
    | is_fun Pervasives.WORDNOTB = true
    | is_fun Pervasives.WORDLSHIFT = true
    | is_fun Pervasives.WORDRSHIFT = true
    | is_fun Pervasives.WORDARSHIFT = true
    | is_fun Pervasives.INT32EQ = true
    | is_fun Pervasives.INT32NE = true
    | is_fun Pervasives.INT32LESS = true
    | is_fun Pervasives.INT32LESSEQ = true
    | is_fun Pervasives.INT32GREATER = true
    | is_fun Pervasives.INT32GREATEREQ = true
    | is_fun Pervasives.INT32PLUS = true
    | is_fun Pervasives.INT32MINUS = true
    | is_fun Pervasives.INT32STAR = true
    | is_fun Pervasives.INT32DIV = true
    | is_fun Pervasives.INT32MOD = true
    | is_fun Pervasives.INT32UMINUS = true
    | is_fun Pervasives.INT32ABS = true
    | is_fun Pervasives.WORD32EQ = true
    | is_fun Pervasives.WORD32NE = true
    | is_fun Pervasives.WORD32LT = true
    | is_fun Pervasives.WORD32LE = true
    | is_fun Pervasives.WORD32GT = true
    | is_fun Pervasives.WORD32GE = true
    | is_fun Pervasives.WORD32PLUS = true
    | is_fun Pervasives.WORD32MINUS = true
    | is_fun Pervasives.WORD32STAR = true
    | is_fun Pervasives.WORD32DIV = true
    | is_fun Pervasives.WORD32MOD = true
    | is_fun Pervasives.WORD32ORB = true
    | is_fun Pervasives.WORD32XORB = true
    | is_fun Pervasives.WORD32ANDB = true
    | is_fun Pervasives.WORD32NOTB = true
    | is_fun Pervasives.WORD32LSHIFT = true
    | is_fun Pervasives.WORD32RSHIFT = true
    | is_fun Pervasives.WORD32ARSHIFT = true
    (* Associated with the interpreter only *)
    | is_fun Pervasives.IDENT_FN = true
    | is_fun Pervasives.ML_OFFSET = true
    | is_fun Pervasives.ENTUPLE = true
    | is_fun Pervasives.ML_CALL = true
    | is_fun Pervasives.ML_REQUIRE = true
    | is_fun Pervasives.LOAD_VAR = false
    | is_fun Pervasives.LOAD_EXN = false
    | is_fun Pervasives.LOAD_STRUCT = false
    | is_fun Pervasives.LOAD_FUNCT = false
    | is_fun Pervasives.GET_IMPLICIT = true

end
@


1.21.4.1
log
@branched from trunk for label MLW_daveb_inline_1_4_99
@
text
@a7 3
 * Revision 1.21  1997/01/24  11:05:45  matthew
 * Adding version options
 *
@


1.21.3.1
log
@branched from trunk for label MLWorks_workspace_97
@
text
@a7 3
 * Revision 1.21  1997/01/24  11:05:45  matthew
 * Adding version options
 *
@


1.21.2.1
log
@branched from trunk for label MLWorks_dt_wizard
@
text
@a7 3
 * Revision 1.21  1997/01/24  11:05:45  matthew
 * Adding version options
 *
@


1.21.1.1
log
@branched from 1.21
@
text
@a7 3
 * Revision 1.21  1997/01/24  11:05:45  matthew
 * Adding version options
 *
@


1.21.1.1.3.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r3
@
text
@a7 3
 * Revision 1.21.1.1  1997/05/12  10:49:59  hope
 * branched from 1.21
 *
@


1.21.1.1.2.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r2_551
@
text
@a7 3
 * Revision 1.21.1.1  1997/05/12  10:49:59  hope
 * branched from 1.21
 *
@


1.21.1.1.1.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
@
text
@a7 3
 * Revision 1.21.1.1  1997/05/12  10:49:59  hope
 * branched from 1.21
 *
@


1.21.1.1.1.1.1.1
log
@branched from MLWorks_11 for label MLWorks_11r1
@
text
@a7 3
 * Revision 1.21.1.1.1.1  1997/07/28  18:32:12  daveb
 * branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
 *
@


1.20
log
@ Adding inline multiply
@
text
@d8 3
d72 1
d77 1
d82 1
d86 196
a281 192
  val inline_mult = false

  fun is_inline Pervasives.REF = true
    | is_inline Pervasives.EXORD = false
    | is_inline Pervasives.EXCHR = false
    | is_inline Pervasives.EXDIV = false
    | is_inline Pervasives.EXSQRT = false
    | is_inline Pervasives.EXEXP = false
    | is_inline Pervasives.EXLN = false
    | is_inline Pervasives.EXIO = false
    | is_inline Pervasives.EXMATCH = false
    | is_inline Pervasives.EXBIND = false
    | is_inline Pervasives.EXINTERRUPT = false
    | is_inline Pervasives.EXRANGE = false
    | is_inline Pervasives.EXOVERFLOW = false
    | is_inline Pervasives.MAP = false
    | is_inline Pervasives.UMAP = false
    | is_inline Pervasives.REV = false
    | is_inline Pervasives.NOT = false
    | is_inline Pervasives.ABS = true
    | is_inline Pervasives.FLOOR = true
    | is_inline Pervasives.REAL = true
    | is_inline Pervasives.SQRT = true
    | is_inline Pervasives.SIN = false
    | is_inline Pervasives.COS = false
    | is_inline Pervasives.ARCTAN = false
    | is_inline Pervasives.EXP = false
    | is_inline Pervasives.LN = false
    | is_inline Pervasives.SIZE = true
    | is_inline Pervasives.CHR = true
    | is_inline Pervasives.ORD = true
    | is_inline Pervasives.CHARCHR = true
    | is_inline Pervasives.CHARORD = true
    | is_inline Pervasives.ORDOF = true
    | is_inline Pervasives.EXPLODE = false
    | is_inline Pervasives.IMPLODE = false
    | is_inline Pervasives.DEREF = true
    | is_inline Pervasives.FDIV = true
    | is_inline Pervasives.DIV = false
    | is_inline Pervasives.MOD = false
    | is_inline Pervasives.PLUS = false
    | is_inline Pervasives.STAR = false
    | is_inline Pervasives.MINUS = false
    | is_inline Pervasives.HAT = false
    | is_inline Pervasives.AT = false
    | is_inline Pervasives.NE = false
    | is_inline Pervasives.LESS = false
    | is_inline Pervasives.GREATER = false
    | is_inline Pervasives.LESSEQ = false
    | is_inline Pervasives.GREATEREQ = false
    | is_inline Pervasives.BECOMES = true
    | is_inline Pervasives.O = false
    | is_inline Pervasives.UMINUS = false
    | is_inline Pervasives.EQ = true
    | is_inline Pervasives.EQFUN = false
    | is_inline Pervasives.LOAD_STRING = true
    | is_inline Pervasives.REALPLUS = true
    | is_inline Pervasives.INTPLUS = true
    | is_inline Pervasives.UNSAFEINTPLUS = true
    | is_inline Pervasives.UNSAFEINTMINUS = true
    | is_inline Pervasives.REALSTAR = true
    | is_inline Pervasives.INTSTAR = inline_mult
    | is_inline Pervasives.REALMINUS = true
    | is_inline Pervasives.INTMINUS = true
    | is_inline Pervasives.REALUMINUS = true
    | is_inline Pervasives.INTUMINUS = true
    | is_inline Pervasives.INTDIV = false
    | is_inline Pervasives.INTMOD = false
    | is_inline Pervasives.INTLESS = true
    | is_inline Pervasives.REALLESS = true
    | is_inline Pervasives.INTGREATER = true
    | is_inline Pervasives.REALGREATER = true
    | is_inline Pervasives.INTLESSEQ = true
    | is_inline Pervasives.REALLESSEQ = true
    | is_inline Pervasives.INTGREATEREQ = true
    | is_inline Pervasives.REALGREATEREQ = true
    | is_inline Pervasives.INTEQ = true
    | is_inline Pervasives.INTNE = true
    | is_inline Pervasives.REALEQ = true
    | is_inline Pervasives.REALNE = true
    | is_inline Pervasives.STRINGEQ = false
    | is_inline Pervasives.STRINGNE = false
    | is_inline Pervasives.STRINGLT = false
    | is_inline Pervasives.STRINGLE = false
    | is_inline Pervasives.STRINGGT = false
    | is_inline Pervasives.STRINGGE = false
    | is_inline Pervasives.CHAREQ = true
    | is_inline Pervasives.CHARNE = true
    | is_inline Pervasives.CHARLT = true
    | is_inline Pervasives.CHARLE = true
    | is_inline Pervasives.CHARGT = true
    | is_inline Pervasives.CHARGE = true
    | is_inline Pervasives.INTABS = true
    | is_inline Pervasives.REALABS = true
    | is_inline Pervasives.CALL_C = true
    | is_inline Pervasives.ARRAY_FN = true
    | is_inline Pervasives.LENGTH = true
    | is_inline Pervasives.SUB  = true
    | is_inline Pervasives.UPDATE = true
    | is_inline Pervasives.UNSAFE_SUB  = true
    | is_inline Pervasives.UNSAFE_UPDATE = true
    | is_inline Pervasives.BYTEARRAY = true
    | is_inline Pervasives.BYTEARRAY_LENGTH = true
    | is_inline Pervasives.BYTEARRAY_SUB  = true
    | is_inline Pervasives.BYTEARRAY_UPDATE = true
    | is_inline Pervasives.BYTEARRAY_UNSAFE_SUB  = true
    | is_inline Pervasives.BYTEARRAY_UNSAFE_UPDATE = true
    | is_inline Pervasives.FLOATARRAY = true
    | is_inline Pervasives.FLOATARRAY_LENGTH = true
    | is_inline Pervasives.FLOATARRAY_SUB  = true
    | is_inline Pervasives.FLOATARRAY_UPDATE = true
    | is_inline Pervasives.FLOATARRAY_UNSAFE_SUB  = true
    | is_inline Pervasives.FLOATARRAY_UNSAFE_UPDATE = true
    | is_inline Pervasives.VECTOR = false
    | is_inline Pervasives.VECTOR_LENGTH = true
    | is_inline Pervasives.VECTOR_SUB = true
    | is_inline Pervasives.EXSIZE = false
    | is_inline Pervasives.EXSUBSCRIPT = false
    | is_inline Pervasives.ANDB = true
    | is_inline Pervasives.LSHIFT = true
    | is_inline Pervasives.NOTB = true
    | is_inline Pervasives.ORB = true
    | is_inline Pervasives.RSHIFT = true 
    | is_inline Pervasives.ARSHIFT = true 
    | is_inline Pervasives.XORB = true 
    | is_inline Pervasives.IDENT_FN = false
    | is_inline Pervasives.ML_OFFSET = true
    | is_inline Pervasives.ENTUPLE = false
    | is_inline Pervasives.ML_CALL = true
    | is_inline Pervasives.ML_REQUIRE = false
    | is_inline Pervasives.CAST = true
    | is_inline Pervasives.ALLOC_STRING = true
    | is_inline Pervasives.ALLOC_VECTOR = true
    | is_inline Pervasives.ALLOC_PAIR = true
    | is_inline Pervasives.RECORD_UNSAFE_SUB = true
    | is_inline Pervasives.RECORD_UNSAFE_UPDATE = true
    | is_inline Pervasives.STRING_UNSAFE_SUB = true
    | is_inline Pervasives.STRING_UNSAFE_UPDATE = true
    | is_inline Pervasives.LOAD_VAR = true
    | is_inline Pervasives.LOAD_EXN = true
    | is_inline Pervasives.LOAD_STRUCT = true
    | is_inline Pervasives.LOAD_FUNCT = true
    | is_inline Pervasives.GET_IMPLICIT = true
    | is_inline Pervasives.WORDEQ = true
    | is_inline Pervasives.WORDNE = true
    | is_inline Pervasives.WORDLT = true
    | is_inline Pervasives.WORDLE = true
    | is_inline Pervasives.WORDGT = true
    | is_inline Pervasives.WORDGE = true
    | is_inline Pervasives.WORDPLUS = true
    | is_inline Pervasives.WORDMINUS = true
    | is_inline Pervasives.WORDSTAR = inline_mult
    | is_inline Pervasives.WORDDIV = false
    | is_inline Pervasives.WORDMOD = false
    | is_inline Pervasives.WORDORB = true
    | is_inline Pervasives.WORDXORB = true
    | is_inline Pervasives.WORDANDB = true
    | is_inline Pervasives.WORDNOTB = true
    | is_inline Pervasives.WORDLSHIFT = true
    | is_inline Pervasives.WORDRSHIFT = true
    | is_inline Pervasives.WORDARSHIFT = true
    | is_inline Pervasives.INT32EQ = true
    | is_inline Pervasives.INT32NE = true
    | is_inline Pervasives.INT32LESS = true
    | is_inline Pervasives.INT32LESSEQ = true
    | is_inline Pervasives.INT32GREATER = true
    | is_inline Pervasives.INT32GREATEREQ = true
    | is_inline Pervasives.INT32PLUS = true
    | is_inline Pervasives.INT32MINUS = true
    | is_inline Pervasives.INT32STAR = inline_mult
    | is_inline Pervasives.INT32DIV = false
    | is_inline Pervasives.INT32MOD = false
    | is_inline Pervasives.INT32ABS = true
    | is_inline Pervasives.INT32UMINUS = true
    | is_inline Pervasives.WORD32EQ = true
    | is_inline Pervasives.WORD32NE = true
    | is_inline Pervasives.WORD32LT = true
    | is_inline Pervasives.WORD32LE = true
    | is_inline Pervasives.WORD32GT = true
    | is_inline Pervasives.WORD32GE = true
    | is_inline Pervasives.WORD32PLUS = true
    | is_inline Pervasives.WORD32MINUS = true
    | is_inline Pervasives.WORD32STAR = inline_mult
    | is_inline Pervasives.WORD32DIV = false
    | is_inline Pervasives.WORD32MOD = false
    | is_inline Pervasives.WORD32ORB = true
    | is_inline Pervasives.WORD32XORB = true
    | is_inline Pervasives.WORD32ANDB = true
    | is_inline Pervasives.WORD32NOTB = true
    | is_inline Pervasives.WORD32LSHIFT = true
    | is_inline Pervasives.WORD32RSHIFT = true
    | is_inline Pervasives.WORD32ARSHIFT = true
@


1.19
log
@[Bug #1818]
adding FloatArray primitives.
@
text
@d8 4
d80 2
d141 1
a141 1
    | is_inline Pervasives.INTSTAR = false
d231 1
a231 1
    | is_inline Pervasives.WORDSTAR = false
d249 1
a249 1
    | is_inline Pervasives.INT32STAR = false
d262 1
a262 1
    | is_inline Pervasives.WORD32STAR = false
d298 5
a302 5
    | implicit_references Pervasives.DIV              = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.INTDIV           = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.INT32DIV         = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.WORDDIV          = [Pervasives.EXOVERFLOW]
    | implicit_references Pervasives.WORD32DIV        = [Pervasives.EXOVERFLOW]
@


1.18
log
@New exceptions
@
text
@d8 3
d181 6
d322 3
d434 6
@


1.18.7.1
log
@branched from 1.18
@
text
@a7 3
 * Revision 1.18  1996/04/19  15:37:28  matthew
 * New exceptions
 *
@


1.18.6.1
log
@branched from 1.18
@
text
@a7 3
 * Revision 1.18  1996/04/19  15:37:28  matthew
 * New exceptions
 *
@


1.18.6.1.1.1
log
@branched from 1.18.6.1
@
text
@a7 3
 * Revision 1.18.6.1  1996/12/17  17:59:54  hope
 * branched from 1.18
 *
@


1.18.5.1
log
@branched from 1.18
@
text
@a7 3
 * Revision 1.18  1996/04/19  15:37:28  matthew
 * New exceptions
 *
@


1.18.4.1
log
@branched from 1.18
@
text
@a7 3
 * Revision 1.18  1996/04/19  15:37:28  matthew
 * New exceptions
 *
@


1.18.4.1.1.1
log
@branched from 1.18.4.1
@
text
@a7 3
 * Revision 1.18.4.1  1996/11/14  13:04:30  hope
 * branched from 1.18
 *
@


1.18.3.1
log
@branched from 1.18
@
text
@a7 3
 * Revision 1.18  1996/04/19  15:37:28  matthew
 * New exceptions
 *
@


1.18.2.1
log
@branched from 1.18
@
text
@a7 3
 * Revision 1.18  1996/04/19  15:37:28  matthew
 * New exceptions
 *
@


1.18.1.1
log
@branched from 1.18
@
text
@a7 3
 * Revision 1.18  1996/04/19  15:37:28  matthew
 * New exceptions
 *
@


1.17
log
@Modify sized integer operations to raise overflow
@
text
@d8 3
a73 1
    | is_inline Pervasives.EXABS = false
a76 7
    | is_inline Pervasives.EXMOD = false
    | is_inline Pervasives.EXQUOT = false
    | is_inline Pervasives.EXPROD = false
    | is_inline Pervasives.EXNEG = false
    | is_inline Pervasives.EXSUM = false
    | is_inline Pervasives.EXDIFF = false
    | is_inline Pervasives.EXFLOOR = false
d273 5
a277 5
  fun implicit_references Pervasives.INTPLUS          = [Pervasives.EXSUM]
    | implicit_references Pervasives.INTSTAR          = [Pervasives.EXPROD]
    | implicit_references Pervasives.INTMINUS         = [Pervasives.EXDIFF]
    | implicit_references Pervasives.INTUMINUS        = [Pervasives.EXNEG]
    | implicit_references Pervasives.INTABS           = [Pervasives.EXABS]
d283 2
a284 2
    | implicit_references Pervasives.DIV              = [Pervasives.EXDIV]
    | implicit_references Pervasives.INTDIV           = [Pervasives.EXDIV]
d286 14
a299 14
    | implicit_references Pervasives.WORDDIV          = [Pervasives.EXDIV]
    | implicit_references Pervasives.WORD32DIV        = [Pervasives.EXDIV]
    | implicit_references Pervasives.REALPLUS         = [Pervasives.EXSUM]
    | implicit_references Pervasives.REALSTAR         = [Pervasives.EXPROD]
    | implicit_references Pervasives.REALMINUS        = [Pervasives.EXDIFF]
    | implicit_references Pervasives.REALUMINUS       = [Pervasives.EXNEG]
    | implicit_references Pervasives.REALABS          = [Pervasives.EXABS]
    | implicit_references Pervasives.FDIV             = [Pervasives.EXQUOT]
    | implicit_references Pervasives.MOD              = [Pervasives.EXMOD]
    | implicit_references Pervasives.INTMOD           = [Pervasives.EXMOD]
    | implicit_references Pervasives.INT32MOD         = [Pervasives.EXMOD]
    | implicit_references Pervasives.WORDMOD          = [Pervasives.EXMOD]
    | implicit_references Pervasives.WORD32MOD        = [Pervasives.EXMOD]
    | implicit_references Pervasives.FLOOR            = [Pervasives.EXFLOOR]
a317 1
    | is_fun Pervasives.EXABS = false
a320 7
    | is_fun Pervasives.EXMOD = false
    | is_fun Pervasives.EXQUOT = false
    | is_fun Pervasives.EXPROD = false
    | is_fun Pervasives.EXNEG = false
    | is_fun Pervasives.EXSUM = false
    | is_fun Pervasives.EXDIFF = false
    | is_fun Pervasives.EXFLOOR = false
@


1.16
log
@Set int32uminus to be inline
@
text
@d8 3
d283 5
a287 5
    | implicit_references Pervasives.INT32PLUS        = [Pervasives.EXSUM]
    | implicit_references Pervasives.INT32STAR        = [Pervasives.EXPROD]
    | implicit_references Pervasives.INT32MINUS       = [Pervasives.EXDIFF]
    | implicit_references Pervasives.INT32UMINUS      = [Pervasives.EXNEG]
    | implicit_references Pervasives.INT32ABS         = [Pervasives.EXABS]
d290 1
a290 1
    | implicit_references Pervasives.INT32DIV         = [Pervasives.EXDIV]
@


1.15
log
@Added pervasives for Word32, Int32, etc.
@
text
@d8 3
d239 2
a240 2
    | is_inline Pervasives.INT32ABS = false
    | is_inline Pervasives.INT32UMINUS = false
@


1.14
log
@Handle INTMOD and INTDIV
@
text
@d8 3
a206 2
    | is_inline Pervasives.INTTOWORD = true
    | is_inline Pervasives.SIGNEXTEND = true
a217 1
    | is_inline Pervasives.WORDTOINT = true
d225 31
d277 5
d284 1
d286 1
d295 1
d297 1
a448 2
    | is_fun Pervasives.INTTOWORD = true
    | is_fun Pervasives.SIGNEXTEND = true
a459 1
    | is_fun Pervasives.WORDTOINT = true
d467 31
@


1.13
log
@Add EXOVERFLOW
@
text
@d8 3
d133 2
d247 2
d256 2
d322 2
@


1.12
log
@Add primitive operations on words
@
text
@d4 39
a42 1
 *  Copyright (C) 1991 Harlequin Ltd.
a43 35
 *  Revision Log
 *  $Log: _machperv.sml,v $
Revision 1.11  1995/07/14  09:37:54  jont
Add new operations on chars

Revision 1.10  1995/04/28  11:48:14  matthew
Adding CAST and UMAP primitives

Revision 1.9  1995/02/10  15:58:35  matthew
Adding GET_IMPLICIT builtin

Revision 1.8  1994/11/24  10:24:45  matthew
Adding new pervasives

Revision 1.7  1994/09/09  16:38:50  jont
Move in machine specific stuff from _pervasives.sml

Revision 1.6  1993/12/17  15:14:06  io
moved machperv to main/

Revision 1.5  1993/07/20  12:33:54  jont
Added unsafeintplus for generating large integers

Revision 1.4  1993/07/07  15:06:15  daveb
Removed EX*VAL values, since we no longer have exception environments.

Revision 1.3  1993/03/23  10:35:35  jont
Added vector primitives

Revision 1.2  1993/03/04  17:09:12  jont
Added builtin string relationals

Revision 1.1  1992/11/21  19:24:41  jont
Initial revision

d287 1
@


1.11
log
@Add new operations on chars
@
text
@d8 3
d75 1
d196 21
d394 21
@


1.10
log
@Adding CAST and UMAP primitives
@
text
@d8 3
d88 2
d141 6
d228 1
d236 2
a237 2
    | implicit_references Pervasives.EQ	           = [Pervasives.EQFUN]
    | implicit_references _	           = []
d275 2
d328 6
@


1.9
log
@Adding GET_IMPLICIT builtin
@
text
@d8 3
d70 1
d168 1
d248 1
d341 1
@


1.8
log
@Adding new pervasives
@
text
@d8 3
d175 1
d352 1
@


1.7
log
@Move in machine specific stuff from _pervasives.sml
@
text
@d8 3
d104 1
d161 7
d279 1
d331 7
@


1.6
log
@moved machperv to main/
@
text
@d8 3
d162 167
@


1.5
log
@Added unsafeintplus for generating large integers
@
text
@d8 3
d26 1
a26 1
require "machperv";
@


1.5.1.1
log
@Fork for bug fixing
@
text
@a7 3
Revision 1.5  1993/07/20  12:33:54  jont
Added unsafeintplus for generating large integers

@


1.4
log
@Removed EX*VAL values, since we no longer have exception environments.
@
text
@d8 3
d94 1
@


1.3
log
@Added vector primitives
@
text
@d8 3
a50 19
    | is_inline Pervasives.EXABSVAL = false
    | is_inline Pervasives.EXORDVAL = false
    | is_inline Pervasives.EXCHRVAL = false
    | is_inline Pervasives.EXDIVVAL = false
    | is_inline Pervasives.EXMODVAL = false
    | is_inline Pervasives.EXQUOTVAL = false
    | is_inline Pervasives.EXPRODVAL = false
    | is_inline Pervasives.EXNEGVAL = false
    | is_inline Pervasives.EXSUMVAL = false
    | is_inline Pervasives.EXDIFFVAL = false
    | is_inline Pervasives.EXFLOORVAL = false
    | is_inline Pervasives.EXSQRTVAL = false
    | is_inline Pervasives.EXEXPVAL = false
    | is_inline Pervasives.EXLNVAL = false
    | is_inline Pervasives.EXIOVAL = false
    | is_inline Pervasives.EXMATCHVAL = false
    | is_inline Pervasives.EXBINDVAL = false
    | is_inline Pervasives.EXINTERRUPTVAL = false
    | is_inline Pervasives.EXRANGEVAL = false
a134 2
    | is_inline Pervasives.EXSIZEVAL = false
    | is_inline Pervasives.EXSUBSCRIPTVAL = false
@


1.2
log
@Added builtin string relationals
@
text
@d8 3
d146 3
@


1.1
log
@Initial revision
@
text
@d7 4
a10 1
 *  $Log$
d70 61
a130 57
  | is_inline Pervasives.SQRT = true
  | is_inline Pervasives.SIN = false
  | is_inline Pervasives.COS = false
  | is_inline Pervasives.ARCTAN = false
  | is_inline Pervasives.EXP = false
  | is_inline Pervasives.LN = false
  | is_inline Pervasives.SIZE = true
  | is_inline Pervasives.CHR = true
  | is_inline Pervasives.ORD = true
  | is_inline Pervasives.ORDOF = true
  | is_inline Pervasives.EXPLODE = false
  | is_inline Pervasives.IMPLODE = false
  | is_inline Pervasives.DEREF = true
  | is_inline Pervasives.FDIV = true
  | is_inline Pervasives.DIV = false
  | is_inline Pervasives.MOD = false
  | is_inline Pervasives.PLUS = false
  | is_inline Pervasives.STAR = false
  | is_inline Pervasives.MINUS = false
  | is_inline Pervasives.HAT = false
  | is_inline Pervasives.AT = false
  | is_inline Pervasives.NE = false
  | is_inline Pervasives.LESS = false
  | is_inline Pervasives.GREATER = false
  | is_inline Pervasives.LESSEQ = false
  | is_inline Pervasives.GREATEREQ = false
  | is_inline Pervasives.BECOMES = true
  | is_inline Pervasives.O = false
  | is_inline Pervasives.UMINUS = false
  | is_inline Pervasives.EQ = true
  | is_inline Pervasives.EQFUN = false
  | is_inline Pervasives.LOAD_STRING = true
  | is_inline Pervasives.REALPLUS = true
  | is_inline Pervasives.INTPLUS = true
  | is_inline Pervasives.REALSTAR = true
  | is_inline Pervasives.INTSTAR = false
  | is_inline Pervasives.REALMINUS = true
  | is_inline Pervasives.INTMINUS = true
  | is_inline Pervasives.REALUMINUS = true
  | is_inline Pervasives.INTUMINUS = true
  | is_inline Pervasives.INTLESS = true
  | is_inline Pervasives.REALLESS = true
  | is_inline Pervasives.INTGREATER = true
  | is_inline Pervasives.REALGREATER = true
  | is_inline Pervasives.INTLESSEQ = true
  | is_inline Pervasives.REALLESSEQ = true
  | is_inline Pervasives.INTGREATEREQ = true
  | is_inline Pervasives.REALGREATEREQ = true
  | is_inline Pervasives.INTEQ = true
  | is_inline Pervasives.INTNE = true
  | is_inline Pervasives.REALEQ = true
  | is_inline Pervasives.REALNE = true
  | is_inline Pervasives.STRINGEQ = false
  | is_inline Pervasives.STRINGNE = false
  | is_inline Pervasives.INTABS = true
  | is_inline Pervasives.REALABS = true
  | is_inline Pervasives.CALL_C = true
@
