head	1.3;
access;
symbols
	MLWorks_Beta_1996_06_07:1.3
	MLWorks_Beta_1996_06_06:1.3
	MLWorks_Beta_1996_06_05:1.3
	MLWorks_Beta_1996_06_03:1.3
	MLWorks_Beta_1996_05_31:1.3
	MLWorks_Beta_1996_05_30:1.3;
locks; strict;
comment	@ *  @;


1.3
date	96.05.29.08.35.45;	author daveb;	state Exp;
branches;
next	1.2;

1.2
date	96.05.28.10.23.02;	author daveb;	state Exp;
branches;
next	1.1;

1.1
date	96.05.19.11.46.38;	author brianm;	state Exp;
branches;
next	;


desc
@new unit
Renamed file.
@


1.3
log
@Removing use of MLWorks.RawIO.
@
text
@(*  ==== FOREIGN INTERFACE : COMMON TYPES ====
 *
 *  Copyright (C) 1995 Harlequin Ltd.
 *
 *  Implementation
 *  --------------
 *
 *
 *  Revision Log
 *  ------------
 *  $Log: _types.sml,v $
 *  Revision 1.2  1996/05/28  10:23:02  daveb
 *  Changed type of MLWorks.Internal.Value.print.
 *
 *  Revision 1.1  1996/05/19  11:46:38  brianm
 *  new unit
 *  Renamed file.
 *
 * Revision 1.4  1996/04/18  16:57:29  jont
 * initbasis becomes basis
 *
 * Revision 1.3  1995/09/07  22:43:41  brianm
 * Modifications for reorganisation & documentation.
 *
 *  Revision 1.2  1995/07/18  12:38:46  brianm
 *  Changing names of deferred data-type operators (stream-edit)
 *
 *  Revision 1.1  1995/04/25  11:39:24  brianm
 *  new unit
 *  New file.
 *
 *
 *)

require "../basis/__general";
require "../basis/__word32";
require "../basis/__word8";

require "types";

functor ForeignTypes() : FOREIGN_TYPES =
   struct

      open General

      type word8 = Word8.word
      type word32 = Word32.word

      type address = word32
      type bytearray = MLWorks.ByteArray.bytearray

      type name = string
      type filename = string


      datatype 'a box =  of ('a option ref)

      val valOf = General.valOf

      fun getBox((df))       = valOf(!df)
      fun setBox((rval))(a)  = (rval := SOME(a))

      fun extractBox((rval))     = !rval
      fun updateBox((rval))(optv) = (rval := optv) 

      fun resetBox((rval))   = (rval := NONE)  

      fun newBox((rval))     = (ref(!rval))
      fun makeBox(v)           = (ref(SOME(v)))
      fun voidBox()            = (ref(NONE))

      fun someBox((rval))    = isSome(!rval)

      local
         open MLWorks.Internal.Value
         open MLWorks.IO 
      in
         fun debugP s v =
	   (
(*
             output(std_out, s);
	     print(DEFAULT, v);
	     output(std_out, "\n");
*)
	     v
           )

      end
   end;

@


1.2
log
@Changed type of MLWorks.Internal.Value.print.
@
text
@d12 3
d76 1
a76 1
         open MLWorks.RawIO 
@


1.1
log
@new unit
Renamed file.
@
text
@d12 4
d79 1
a79 1
	     print(DEFAULT,std_out,v);
@
