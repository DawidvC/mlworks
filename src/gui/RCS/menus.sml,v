head	1.18;
access;
symbols
	MLW_daveb_inline_1_4_99:1.18.1
	MLWorks_21c0_1999_03_25:1.18
	MLWorks_20c1_1998_08_20:1.18
	MLWorks_20c0_1998_08_04:1.18
	MLWorks_20b2c2_1998_06_19:1.17
	MLWorks_20b2_Windows_1998_06_12:1.17
	MLWorks_20b1c1_1998_05_07:1.17
	MLWorks_20b0_1998_04_07:1.17
	MLWorks_20b0_1998_03_20:1.17
	MLWorks_20m2_1998_02_16:1.17
	MLWorks_20m1_1997_10_23:1.15
	MLWorks_11r1:1.9.8.1.1.1.1
	MLWorks_workspace_97:1.15.2
	MLWorks_dt_wizard:1.15.1
	MLWorks_11c0_1997_09_09:1.9.8.1.1.1
	MLWorks_10r3:1.9.8.1.3
	MLWorks_10r2_551:1.9.8.1.2
	MLWorks_11:1.9.8.1.1
	MLWorks_1_0_r2c2_1997_07_28:1.9.8.1
	MLWorks_20m0_1997_06_20:1.14
	MLWorks_1_0_r2c2_1997_06_14:1.9.8.1
	MLWorks_1_0_r2c1_released_1997_05_23:1.9.8.1
	MLWorks_1_0_r2c1_1997_05_12:1.9.8
	MLWorks_BugFix_1997_04_24:1.9
	MLWorks_1_0_r2_Win32_1997_04_11:1.9
	MLWorks_1_0_r2_Unix_1997_04_04:1.9
	MLWorks_1_0_1_ULTRASPARC_1997_02_24:1.9.6.1.1
	MLWorks_gui_1996_12_18:1.9.7
	MLWorks_1_0_Win32_1996_12_17:1.9.6
	MLWorks_1_0_Irix_1996_11_28_released_1996_12_17:1.9.3.1.1.1
	MLWorks_1_0_Unix_1996_11_14_released_1996_12_17:1.9.3.1
	JFHgui:1.9.5
	MLWorks_1_0_Irix_1996_11_28:1.9.3.1.1
	MLWorks_1_0_Win32_1996_11_22:1.9.4
	MLWorks_1_0_Unix_1996_11_14:1.9.3
	MLWorks_Open_Beta2_1996_10_11:1.9.2
	MLWorks_License_dev:1.9.1
	MLWorks_1_open_beta_1996_09_13:1.8.1
	MLWorks_Open_Beta_1996_08_22:1.8
	MLWorks_Beta_1996_07_02:1.7
	MLWorks_Beta_1996_06_07:1.7
	MLWorks_Beta_1996_06_06:1.7
	MLWorks_Beta_1996_06_05:1.7
	MLWorks_Beta_1996_06_03:1.7
	MLWorks_Beta_1996_05_31:1.7
	MLWorks_Beta_1996_05_30:1.7;
locks; strict;
comment	@ * @;


1.18
date	98.07.09.12.30.18;	author johnh;	state Exp;
branches
	1.18.1.1;
next	1.17;

1.17
date	97.11.06.13.04.29;	author johnh;	state Exp;
branches;
next	1.16;

1.16
date	97.10.27.16.20.26;	author johnh;	state Exp;
branches;
next	1.15;

1.15
date	97.09.08.08.46.23;	author johnh;	state Exp;
branches
	1.15.1.1
	1.15.2.1;
next	1.14;

1.14
date	97.06.16.14.45.48;	author johnh;	state Exp;
branches;
next	1.13;

1.13
date	97.06.13.09.32.52;	author johnh;	state Exp;
branches;
next	1.12;

1.12
date	97.05.28.11.21.28;	author johnh;	state Exp;
branches;
next	1.11;

1.11
date	97.05.21.09.03.07;	author johnh;	state Exp;
branches;
next	1.10;

1.10
date	97.05.16.15.36.02;	author johnh;	state Exp;
branches;
next	1.9;

1.9
date	96.09.19.11.24.42;	author johnh;	state Exp;
branches
	1.9.1.1
	1.9.2.1
	1.9.3.1
	1.9.4.1
	1.9.5.1
	1.9.6.1
	1.9.7.1
	1.9.8.1;
next	1.8;

1.8
date	96.08.09.15.25.50;	author nickb;	state Exp;
branches
	1.8.1.1;
next	1.7;

1.7
date	95.10.17.15.51.41;	author nickb;	state Exp;
branches;
next	1.6;

1.6
date	95.10.03.15.45.58;	author daveb;	state Exp;
branches;
next	1.5;

1.5
date	95.08.30.13.23.44;	author matthew;	state Exp;
branches;
next	1.4;

1.4
date	95.08.24.15.49.34;	author matthew;	state Exp;
branches;
next	1.3;

1.3
date	95.08.15.14.32.01;	author matthew;	state Exp;
branches;
next	1.2;

1.2
date	95.08.08.10.31.49;	author matthew;	state Exp;
branches;
next	1.1;

1.1
date	95.07.27.11.15.00;	author matthew;	state Exp;
branches;
next	;

1.8.1.1
date	96.09.13.11.13.29;	author hope;	state Exp;
branches;
next	;

1.9.1.1
date	96.10.07.16.04.11;	author hope;	state Exp;
branches;
next	;

1.9.2.1
date	96.10.17.11.22.24;	author hope;	state Exp;
branches;
next	;

1.9.3.1
date	96.11.14.12.46.30;	author hope;	state Exp;
branches
	1.9.3.1.1.1;
next	;

1.9.3.1.1.1
date	96.11.28.14.58.09;	author hope;	state Exp;
branches;
next	;

1.9.4.1
date	96.11.22.18.06.46;	author hope;	state Exp;
branches;
next	;

1.9.5.1
date	96.12.17.09.54.51;	author hope;	state Exp;
branches;
next	;

1.9.6.1
date	96.12.17.17.45.28;	author hope;	state Exp;
branches
	1.9.6.1.1.1;
next	;

1.9.6.1.1.1
date	97.02.24.11.34.57;	author hope;	state Exp;
branches;
next	;

1.9.7.1
date	96.12.18.09.39.28;	author hope;	state Exp;
branches;
next	;

1.9.8.1
date	97.05.12.10.31.48;	author hope;	state Exp;
branches
	1.9.8.1.1.1
	1.9.8.1.2.1
	1.9.8.1.3.1;
next	;

1.9.8.1.1.1
date	97.07.28.18.16.49;	author daveb;	state Exp;
branches
	1.9.8.1.1.1.1.1;
next	;

1.9.8.1.1.1.1.1
date	97.10.07.11.41.40;	author jkbrook;	state Exp;
branches;
next	;

1.9.8.1.2.1
date	97.09.08.17.10.24;	author daveb;	state Exp;
branches;
next	;

1.9.8.1.3.1
date	97.09.09.14.05.57;	author daveb;	state Exp;
branches;
next	;

1.15.1.1
date	97.09.10.19.20.20;	author brucem;	state Exp;
branches;
next	;

1.15.2.1
date	97.09.11.20.51.32;	author daveb;	state Exp;
branches;
next	;

1.18.1.1
date	99.04.01.17.55.14;	author daveb;	state Exp;
branches;
next	;


desc
@new unit
Moved from library
@


1.18
log
@[Bug #30400]
remove main_windows arg from exit_dialog.
@
text
@(* Motif menu bar utilites *)
(*

$Log: menus.sml,v $
 * Revision 1.17  1997/11/06  13:04:29  johnh
 * [Bug #30125]
 * Move implementation of send_message from Capi to Menus.
 *
 * Revision 1.16  1997/10/27  16:20:26  johnh
 * [Bug #30059]
 * Add Combo boxes to create_dialog function.
 *
 * Revision 1.15  1997/09/08  08:46:23  johnh
 * [Bug #30241]
 * Implement proper find dialog.
 *
 * Revision 1.14  1997/06/16  14:45:48  johnh
 * [Bug #30174]
 * Moving stuff into platform specific podium.
 *
 * Revision 1.13  1997/06/13  09:32:52  johnh
 * [Bug #30175]
 * Add structure of tools menu.
 *
 * Revision 1.12  1997/05/28  11:21:28  johnh
 * [Bug #30155]
 * Added get_graph_menuspec.
 *
 * Revision 1.11  1997/05/21  09:03:07  johnh
 * Implementing toolbar on Windows.
 *
 * Revision 1.10  1997/05/16  15:36:02  johnh
 * Implementing single menu bar on Windows.
 *
 * Revision 1.9  1996/09/19  11:24:42  johnh
 * Bug #148.
 * Passed list a of main windows to exit_dialog function so that they can be killed.
 *
 * Revision 1.8  1996/08/09  15:25:50  nickb
 * Option dialog setter functions now return accept/reject.
 *
 * Revision 1.7  1995/10/17  15:51:41  nickb
 * Add sliders.
 *
 * Revision 1.6  1995/10/03  15:45:58  daveb
 * Made make_buttons return a set_focus function.
 *
 * Revision 1.5  1995/08/30  13:23:44  matthew
 * Removing OPTSUBMENU
 *
 * Revision 1.4  1995/08/24  15:49:34  matthew
 * Moving exit_dialog in here.
 *
 * Revision 1.3  1995/08/15  14:32:01  matthew
 * Removing make_options
 *
 * Revision 1.2  1995/08/08  10:31:49  matthew
 * Adding make_buttons function to capi
 *
 * Revision 1.1  1995/07/27  11:15:00  matthew
 * new unit
 * Moved from library
 *
# Revision 1.1  1995/07/06  13:31:31  matthew
# new unit
# New unit
#
Revision 1.13  1995/07/06  13:31:31  matthew
Changing the type of PUSHBUTTON callback type

Revision 1.12  1995/05/29  13:09:45  daveb
Replaced spurious type variable in result of create_dialog with unit.

Revision 1.11  1993/08/19  14:24:43  matthew
Added OPTSUBMENU to Option menu (a non-radio box submenu)

Revision 1.10  1993/08/11  10:08:28  matthew
Return update function from create_dialog
Simplified interface.

Revision 1.9  1993/05/18  16:40:12  daveb
Added the OPTRADIO constructor.

Revision 1.8  1993/05/13  10:05:36  daveb
create_dialog now takes a string to use for the title of the popup shell.

Revision 1.7  1993/04/30  13:30:53  matthew
Added create_dialog_with_action

Revision 1.6  1993/04/19  14:53:15  matthew
Added TOGGLE button class

Revision 1.5  1993/04/15  18:24:28  daveb
Added DYNAMIC menus.

Revision 1.4  1993/03/31  12:27:17  matthew
Removed MenuSpec type, added OptionSpec type and make_options and
create_dialog

Revision 1.3  1993/03/26  18:51:05  matthew
Added create_dialog function

Revision 1.2  1993/03/23  14:21:01  matthew
Extended ButtonSpec class

Revision 1.1  1993/03/17  16:28:47  matthew
Initial revision


Copyright (c) 1993 Harlequin Ltd.

*)

signature MENUS =
  sig
    type Widget

    datatype ButtonSpec =
        SEPARATOR |
        LABEL of string |
        (* fun 1 gets initial value, fun 2 is callback function, fun 3 is a sensitive function *)
        TOGGLE of string * (unit -> bool) * (bool -> unit) * (unit -> bool) |
	(* name, min, max, callback *)
	SLIDER of string * int * int * (int -> unit) |
	RADIO of string * (unit -> bool) * (bool -> unit) * (unit -> bool) |
        PUSH of string * (unit -> unit) * (unit -> bool) |
        DYNAMIC of string * (unit -> ButtonSpec list) * (unit -> bool) |
        CASCADE of string * ButtonSpec list * (unit -> bool)

    datatype selection = SINGLE | EXTENDED

    (* First function is get the value for the widget
       second is set the value for the widget, and returns accept/reject *)
    datatype OptionSpec =
      OPTSEPARATOR |
      OPTLABEL of string |
      OPTTOGGLE of string * (unit -> bool) * (bool -> bool) |
      OPTTEXT of string * (unit -> string) * (string -> bool) |
      OPTINT of string * (unit -> int) * (int -> bool) |
      OPTRADIO of OptionSpec list |
      OPTCOMBO of string * (unit -> string * string list) * (string -> bool) |
      (* OPTLIST args: (name, fn () => (all_items, selected_items), 
			fn new_sel_items => bool, 
			single_or_extended_selection) 
       *)
      OPTLIST of string * 
		 (unit -> string list * string list) * 
		 (string list -> bool) * 
		 selection
      
    (* make the menus for a tool menubar *)
    val make_submenus : Widget * ButtonSpec list -> unit
    val make_menus : Widget * ButtonSpec list * bool -> unit
    val quit : unit -> unit

    val send_message : Widget * string -> unit

    (* The menuspec for the tools menu is different between Motif and Windows.
     * The reason for this is due to interaction between dynamic menus and storing
     * the menu references on Win32.  On Win32, the references need to be stored on
     * creation, so that they exist when invoked, but on Motif the dynamic menu items
     * are not created until they are invoked.  Solution:  on Motif, for the partially
     * dynamic tools menu to work, the whole menu is made dynamic, and on Windows, the
     * main tools need to be created first, then add the dynamic menu items below them.
     *)
    val get_tools_menuspec : ButtonSpec list * (unit -> ButtonSpec list) -> ButtonSpec

    (* The menuspec for the dependency graph is different between Motif and Windows.
     * This function returns the menuspec when given the close push button and the
     * graph preferences push button.
     *)
    val get_graph_menuspec : ButtonSpec * ButtonSpec -> ButtonSpec list

    datatype ToolButton = TB_SEP | TB_TOGGLE | TB_PUSH | TB_GROUP | TB_TOGGLE_GROUP
    datatype ToolState = CHECKED | ENABLED | HIDDEN | GRAYED | PRESSED | WRAP
    datatype ToolButtonSpec = TOOLBUTTON of 
	{style:	ToolButton,
	 states: ToolState list,
	 tooltip_id: int,
	 name: string}

    val make_toolbar : Widget * int * ToolButtonSpec list -> Widget

    (* returns an update function *)
    val make_buttons :
      Widget * ButtonSpec list
      -> {update: unit -> unit, set_focus: int -> unit}

    (* This utility function makes a popup dialog with a menu inside *)
    (* apply the action function after a change has been made *)
    val create_dialog :
      Widget * string * string * (unit -> unit) * OptionSpec list ->
      ((unit -> unit) * (unit -> unit))  (* return popup and update function *)

    val exit_dialog : Widget * Widget * bool -> unit
  end

@


1.18.1.1
log
@branched from trunk for label MLW_daveb_inline_1_4_99
@
text
@a4 4
 * Revision 1.18  1998/07/09  12:30:18  johnh
 * [Bug #30400]
 * remove main_windows arg from exit_dialog.
 *
@


1.17
log
@[Bug #30125]
Move implementation of send_message from Capi to Menus.
@
text
@d5 4
d195 1
a195 1
    val exit_dialog : Widget * Widget * bool * Widget list -> unit
@


1.16
log
@[Bug #30059]
Add Combo boxes to create_dialog function.
@
text
@d5 4
d151 2
@


1.15
log
@[Bug #30241]
Implement proper find dialog.
@
text
@d5 4
d122 2
d132 10
a141 1
      OPTRADIO of OptionSpec list
@


1.15.2.1
log
@branched from trunk for label MLWorks_workspace_97
@
text
@a4 4
 * Revision 1.15  1997/09/08  08:46:23  johnh
 * [Bug #30241]
 * Implement proper find dialog.
 *
@


1.15.1.1
log
@branched from trunk for label MLWorks_dt_wizard
@
text
@a4 4
 * Revision 1.15  1997/09/08  08:46:23  johnh
 * [Bug #30241]
 * Implement proper find dialog.
 *
@


1.14
log
@[Bug #30174]
Moving stuff into platform specific podium.
@
text
@d5 4
d113 1
@


1.13
log
@[Bug #30175]
Add structure of tools menu.
@
text
@d5 4
a126 1
    val isMotif : bool
a151 1
    val podium_buttons : ToolButtonSpec list
@


1.12
log
@[Bug #30155]
Added get_graph_menuspec.
@
text
@d5 4
d124 11
@


1.11
log
@Implementing toolbar on Windows.
@
text
@d5 3
d13 1
a13 1
 * Passed list a of main Winwindows to exit_dialog function so that they can be killed.
d120 5
@


1.10
log
@Implementing single menu bar on Windows.
@
text
@d5 3
d117 11
@


1.9
log
@Bug #148.
Passed list a of main Winwindows to exit_dialog function so that they can be killed.
@
text
@d5 4
d111 3
@


1.9.8.1
log
@branched from 1.9
@
text
@a4 4
 * Revision 1.9  1996/09/19  11:24:42  johnh
 * Bug #148.
 * Passed list a of main Winwindows to exit_dialog function so that they can be killed.
 *
@


1.9.8.1.3.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r3
@
text
@a4 3
 * Revision 1.9.8.1  1997/05/12  10:31:48  hope
 * branched from 1.9
 *
@


1.9.8.1.2.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r2_551
@
text
@a4 3
 * Revision 1.9.8.1  1997/05/12  10:31:48  hope
 * branched from 1.9
 *
@


1.9.8.1.1.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
@
text
@a4 3
 * Revision 1.9.8.1  1997/05/12  10:31:48  hope
 * branched from 1.9
 *
@


1.9.8.1.1.1.1.1
log
@branched from MLWorks_11 for label MLWorks_11r1
@
text
@a4 3
 * Revision 1.9.8.1.1.1  1997/07/28  18:16:49  daveb
 * branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
 *
@


1.9.7.1
log
@branched from 1.9
@
text
@a4 4
 * Revision 1.9  1996/09/19  11:24:42  johnh
 * Bug #148.
 * Passed list a of main Winwindows to exit_dialog function so that they can be killed.
 *
@


1.9.6.1
log
@branched from 1.9
@
text
@a4 4
 * Revision 1.9  1996/09/19  11:24:42  johnh
 * Bug #148.
 * Passed list a of main Winwindows to exit_dialog function so that they can be killed.
 *
@


1.9.6.1.1.1
log
@branched from 1.9.6.1
@
text
@a4 3
 * Revision 1.9.6.1  1996/12/17  17:45:28  hope
 * branched from 1.9
 *
@


1.9.5.1
log
@branched from 1.9
@
text
@a4 4
 * Revision 1.9  1996/09/19  11:24:42  johnh
 * Bug #148.
 * Passed list a of main Winwindows to exit_dialog function so that they can be killed.
 *
@


1.9.4.1
log
@branched from 1.9
@
text
@a4 4
 * Revision 1.9  1996/09/19  11:24:42  johnh
 * Bug #148.
 * Passed list a of main Winwindows to exit_dialog function so that they can be killed.
 *
@


1.9.3.1
log
@branched from 1.9
@
text
@a4 4
 * Revision 1.9  1996/09/19  11:24:42  johnh
 * Bug #148.
 * Passed list a of main Winwindows to exit_dialog function so that they can be killed.
 *
@


1.9.3.1.1.1
log
@branched from 1.9.3.1
@
text
@a4 3
 * Revision 1.9.3.1  1996/11/14  12:46:30  hope
 * branched from 1.9
 *
@


1.9.2.1
log
@branched from 1.9
@
text
@a4 4
 * Revision 1.9  1996/09/19  11:24:42  johnh
 * Bug #148.
 * Passed list a of main Winwindows to exit_dialog function so that they can be killed.
 *
@


1.9.1.1
log
@branched from 1.9
@
text
@a4 4
 * Revision 1.9  1996/09/19  11:24:42  johnh
 * Bug #148.
 * Passed list a of main Winwindows to exit_dialog function so that they can be killed.
 *
@


1.8
log
@Option dialog setter functions now return accept/reject.
@
text
@d5 3
d119 1
a119 1
    val exit_dialog : Widget * Widget * bool -> unit
@


1.8.1.1
log
@branched from 1.8
@
text
@a4 3
 * Revision 1.8  1996/08/09  15:25:50  nickb
 * Option dialog setter functions now return accept/reject.
 *
@


1.7
log
@Add sliders.
@
text
@d5 3
d93 1
a93 1
       second is set the value for the widget *)
d97 3
a99 3
      OPTTOGGLE of string * (unit -> bool) * (bool -> unit) |
      OPTTEXT of string * (unit -> string) * (string -> unit) |
      OPTINT of string * (unit -> int) * (int -> unit) |
@


1.6
log
@Made make_buttons return a set_focus function.
@
text
@d5 3
d83 2
@


1.5
log
@Removing OPTSUBMENU
@
text
@d5 3
d98 3
a100 1
    val make_buttons : Widget * ButtonSpec list -> (unit -> unit)
@


1.4
log
@Moving exit_dialog in here.
@
text
@d5 3
d89 1
a89 2
      OPTRADIO of OptionSpec list |
      OPTSUBMENU of OptionSpec list
@


1.3
log
@Removing make_options
@
text
@d5 3
d100 2
@


1.2
log
@Adding make_buttons function to capi
@
text
@d5 3
a90 4

    (* first unit to unit function is update, second is apply *)
    val make_options : Widget * OptionSpec list ->
			 (unit -> unit) * (unit -> unit)
@


1.1
log
@new unit
Moved from library
@
text
@d5 4
d82 3
d87 1
a87 3

    val make_submenus : Widget * ButtonSpec list -> (unit -> unit)

@
