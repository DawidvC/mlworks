head	1.6;
access;
symbols
	MLW_daveb_inline_1_4_99:1.6.1
	MLWorks_21c0_1999_03_25:1.6
	MLWorks_20c1_1998_08_20:1.6
	MLWorks_20c0_1998_08_04:1.6
	MLWorks_20b2c2_1998_06_19:1.6
	MLWorks_20b2_Windows_1998_06_12:1.6
	MLWorks_20b1c1_1998_05_07:1.6
	MLWorks_20b0_1998_04_07:1.6
	MLWorks_20b0_1998_03_20:1.6
	MLWorks_20m2_1998_02_16:1.6
	MLWorks_20m1_1997_10_23:1.6
	MLWorks_11r1:1.5.1.1.1.1.1
	MLWorks_workspace_97:1.5.3
	MLWorks_dt_wizard:1.5.2
	MLWorks_11c0_1997_09_09:1.5.1.1.1.1
	MLWorks_10r3:1.5.1.1.3
	MLWorks_10r2_551:1.5.1.1.2
	MLWorks_11:1.5.1.1.1
	MLWorks_1_0_r2c2_1997_07_28:1.5.1.1
	MLWorks_20m0_1997_06_20:1.5
	MLWorks_1_0_r2c2_1997_06_14:1.5.1.1
	MLWorks_1_0_r2c1_released_1997_05_23:1.5.1.1
	MLWorks_1_0_r2c1_1997_05_12:1.5.1
	MLWorks_BugFix_1997_04_24:1.5
	MLWorks_1_0_r2_Win32_1997_04_11:1.5
	MLWorks_1_0_r2_Unix_1997_04_04:1.5
	MLWorks_1_0_1_ULTRASPARC_1997_02_24:1.4.5.1.1
	MLWorks_gui_1996_12_18:1.4.6
	MLWorks_1_0_Win32_1996_12_17:1.4.5
	MLWorks_1_0_Irix_1996_11_28_released_1996_12_17:1.4.3.1.1.1
	MLWorks_1_0_Unix_1996_11_14_released_1996_12_17:1.4.3.1
	MLWorks_1_0_Irix_1996_11_28:1.4.3.1.1
	MLWorks_1_0_Win32_1996_11_22:1.4.4
	MLWorks_1_0_Unix_1996_11_14:1.4.3
	MLWorks_Open_Beta2_1996_10_11:1.4.2
	MLWorks_License_dev:1.4.1
	MLWorks_1_open_beta_1996_09_13:1.3.1
	MLWorks_Open_Beta_1996_08_22:1.3
	MLWorks_Beta_1996_07_02:1.3
	MLWorks_Beta_1996_06_07:1.3
	MLWorks_Beta_1996_06_06:1.3
	MLWorks_Beta_1996_06_05:1.3
	MLWorks_Beta_1996_06_03:1.3
	MLWorks_Beta_1996_05_31:1.3
	MLWorks_Beta_1996_05_30:1.3;
locks; strict;
comment	@ * @;


1.6
date	97.09.25.11.04.32;	author brucem;	state Exp;
branches
	1.6.1.1;
next	1.5;

1.5
date	97.03.03.12.08.21;	author daveb;	state Exp;
branches
	1.5.1.1
	1.5.2.1
	1.5.3.1;
next	1.4;

1.4
date	96.10.03.15.20.15;	author io;	state Exp;
branches
	1.4.1.1
	1.4.2.1
	1.4.3.1
	1.4.4.1
	1.4.5.1
	1.4.6.1;
next	1.3;

1.3
date	96.05.08.15.55.15;	author jont;	state Exp;
branches
	1.3.1.1;
next	1.2;

1.2
date	96.05.01.15.16.19;	author stephenb;	state Exp;
branches;
next	1.1;

1.1
date	96.04.18.11.41.04;	author jont;	state Exp;
branches;
next	;

1.3.1.1
date	96.09.13.11.09.49;	author hope;	state Exp;
branches;
next	;

1.4.1.1
date	96.10.07.16.00.42;	author hope;	state Exp;
branches;
next	;

1.4.2.1
date	96.10.17.11.18.57;	author hope;	state Exp;
branches;
next	;

1.4.3.1
date	96.11.14.12.42.30;	author hope;	state Exp;
branches
	1.4.3.1.1.1;
next	;

1.4.3.1.1.1
date	96.11.28.14.54.24;	author hope;	state Exp;
branches;
next	;

1.4.4.1
date	96.11.22.18.03.00;	author hope;	state Exp;
branches;
next	;

1.4.5.1
date	96.12.17.17.41.56;	author hope;	state Exp;
branches
	1.4.5.1.1.1;
next	;

1.4.5.1.1.1
date	97.02.24.11.30.17;	author hope;	state Exp;
branches;
next	;

1.4.6.1
date	96.12.18.09.35.52;	author hope;	state Exp;
branches;
next	;

1.5.1.1
date	97.05.12.10.27.58;	author hope;	state Exp;
branches
	1.5.1.1.1.1
	1.5.1.1.2.1
	1.5.1.1.3.1;
next	;

1.5.1.1.1.1
date	97.07.28.18.14.55;	author daveb;	state Exp;
branches
	1.5.1.1.1.1.1.1;
next	;

1.5.1.1.1.1.1.1
date	97.10.07.11.39.59;	author jkbrook;	state Exp;
branches;
next	;

1.5.1.1.2.1
date	97.09.08.17.08.23;	author daveb;	state Exp;
branches;
next	;

1.5.1.1.3.1
date	97.09.09.14.03.29;	author daveb;	state Exp;
branches;
next	;

1.5.2.1
date	97.09.10.19.17.58;	author brucem;	state Exp;
branches;
next	;

1.5.3.1
date	97.09.11.20.48.52;	author daveb;	state Exp;
branches;
next	;

1.6.1.1
date	99.04.01.17.52.46;	author daveb;	state Exp;
branches;
next	;


desc
@new unit
@


1.6
log
@[Bug #30269]
Signature has been revised.
@
text
@(*  ==== INITIAL BASIS : DATE ====
 *
 *  Copyright (C) 1995 Harlequin Ltd.
 *
 *  Description
 *  -----------
 *  This is part of the extended Initial Basis.
 *
 *  $Log: date.sml,v $
 * Revision 1.5  1997/03/03  12:08:21  daveb
 * [Bug #1937]
 * Corrected type of scan.
 *
 * Revision 1.4  1996/10/03  15:20:15  io
 * [Bug #1614]
 * remove redundant requires
 *
 * Revision 1.3  1996/05/08  15:55:15  jont
 * Bring up to latest revision of basis
 *
 * Revision 1.2  1996/05/01  15:16:19  stephenb
 * Update wrt change in Time implementation.
 * Also bring up to date wrt latest basis revision.
 *
 * Revision 1.1  1996/04/18  11:41:04  jont
 * new unit
 *
 *  Revision 1.1  1995/04/13  13:49:53  jont
 *  new unit
 *  No reason given
 *
 *
 *)

require "../system/__time";
require "__string_cvt";


signature DATE =
  sig
    datatype weekday = Mon | Tue | Wed | Thu | Fri | Sat | Sun

    datatype month = Jan | Feb | Mar | Apr | May | Jun
                   | Jul | Aug | Sep | Oct | Nov | Dec

    type date
      (* Dates always work over at least the period 1900..2200 as
         specified by the Basis library.
         They are also reliable over a much greater period (limited only
         by integer arithmetic) but the exact range is machine
         dependent and differs according to what operations are performed.
         Some operations (involving Time.time) only work over a
         shorter period (again machine dependent, the lower limit
         of times is always time.zeroTime).
         You will never receive an inaccurate date due to rounding
         errors or overflow.  Attempts to create a date outside the
         valid range will always raise exception Date.  So if you assume
         an unlimited range of dates, you can be sure of either getting
         the correct answer, or an exception. *)

    exception Date

    val year : date -> int         (* returns the year, e.g. 1997 *)
    val month : date -> month      (* returns the month *)
    val day : date -> int          (* returns day of the month, >=1 *)
    val hour : date -> int         (* returns hour of the day *)
    val minute : date -> int       (* returns minute of the hour *)
    val second : date -> int       (* returns second of the minute *)
    val weekDay : date ->  weekday (* returns day of the week *)
    val yearDay : date -> int      (* returns day of the year, >=1 *)

    val offset : date -> Time.time option 
        (* return time west of UTC.  NONE is localtime, SOME(Time.zeroTime)
           is UTC.
           Europe will be reported as SOME(23 hours), one hour _ahead_
           of GMT. *)
    val isDst : date -> bool option
        (* returns SOME(true) if daylight savings time is in effect; returns
           SOME(false) if not, and returns NONE if we don't know. *)

    val date :
      { year   : int,
        month  : month,
        day    : int,
        hour   : int,
        minute : int,
        second : int,
        offset : Time.time option } ->
      date
        (* Creates a canonical date from the given values.  If the 
           resulting date is outside the range supported by the 
           implementation, the Date exception is raised. *)

    val localOffset : unit -> Time.time
        (* Returns the offset from UTC for the local timezone. *) 

    val fromTimeLocal : Time.time -> date
        (* Returns the date in the local timezone for the given (UTC) time.
           This is like the ANSI C function localtime.
           offset of the date will be NONE. *)

    val fromTimeUniv : Time.time -> date
        (* Returns the date in the UTC timezone for the given (UTC) time.
           This is like the ANSI C function gmtime.
           offset of the date will be SOME(Time.zeroTime). *)

    val toTime : date -> Time.time
        (* Returns the time value corresponding to the date in the host
           system.  This raises Date exception if the date cannot be 
           represented as a time value. *)

    (* Dates as text must be in 24 character format,
       e.g. "Thu Sep 25 10:08:30 1997".*)
    val toString   : date -> string
    val fmt        : string -> date -> string
    val fromString : string -> date option
    val scan       : (char, 'a) StringCvt.reader -> (date, 'a) StringCvt.reader

    val compare : (date * date) -> order
        (* Returns the relative order of two dates ignoring DST and 
           timezone information. *)

  end
@


1.6.1.1
log
@branched from trunk for label MLW_daveb_inline_1_4_99
@
text
@a9 4
 * Revision 1.6  1997/09/25  11:04:32  brucem
 * [Bug #30269]
 * Signature has been revised.
 *
@


1.5
log
@[Bug #1937]
Corrected type of scan.
@
text
@d10 4
d44 1
a44 1
    | Jul | Aug | Sep | Oct | Nov | Dec
d46 14
a59 11
    datatype date = DATE of
      {year : int, (* since 1900 *)
       month : month,
       day : int, (* 1 - 31 *)
       hour : int, (* 0 - 23 *)
       minute : int, (* 0 - 59 *)
       second : int, (* 0 - 61 to allow for leap seconds *)
       wday : weekday option,
       yday : int option,
       isDst : bool option
       }
d63 53
a115 8
    val fromTime : Time.time -> date

    val fromUTC  : Time.time -> date

    val toTime   : date -> Time.time

    val toString : date -> string

d117 1
d119 3
a121 5
    val fmt : string -> date -> string

    val scan : (char, 'a) StringCvt.reader -> 'a -> (date * 'a) option

    val compare : date * date -> order
@


1.5.3.1
log
@branched from trunk for label MLWorks_workspace_97
@
text
@a9 4
 * Revision 1.5  1997/03/03  12:08:21  daveb
 * [Bug #1937]
 * Corrected type of scan.
 *
@


1.5.2.1
log
@branched from trunk for label MLWorks_dt_wizard
@
text
@a9 4
 * Revision 1.5  1997/03/03  12:08:21  daveb
 * [Bug #1937]
 * Corrected type of scan.
 *
@


1.5.1.1
log
@branched from 1.5
@
text
@a9 4
 * Revision 1.5  1997/03/03  12:08:21  daveb
 * [Bug #1937]
 * Corrected type of scan.
 *
@


1.5.1.1.3.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r3
@
text
@a9 3
 * Revision 1.5.1.1  1997/05/12  10:27:58  hope
 * branched from 1.5
 *
@


1.5.1.1.2.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r2_551
@
text
@a9 3
 * Revision 1.5.1.1  1997/05/12  10:27:58  hope
 * branched from 1.5
 *
@


1.5.1.1.1.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
@
text
@a9 3
 * Revision 1.5.1.1  1997/05/12  10:27:58  hope
 * branched from 1.5
 *
@


1.5.1.1.1.1.1.1
log
@branched from MLWorks_11 for label MLWorks_11r1
@
text
@a9 3
 * Revision 1.5.1.1.1.1  1997/07/28  18:14:55  daveb
 * branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
 *
@


1.4
log
@[Bug #1614]
remove redundant requires
@
text
@d10 4
d32 1
d68 1
a68 1
    val scan : { getc : 'a -> (char * 'a) option} -> 'a -> (date * 'a) option
@


1.4.6.1
log
@branched from 1.4
@
text
@a9 4
 * Revision 1.4  1996/10/03  15:20:15  io
 * [Bug #1614]
 * remove redundant requires
 *
@


1.4.5.1
log
@branched from 1.4
@
text
@a9 4
 * Revision 1.4  1996/10/03  15:20:15  io
 * [Bug #1614]
 * remove redundant requires
 *
@


1.4.5.1.1.1
log
@branched from 1.4.5.1
@
text
@a9 3
 * Revision 1.4.5.1  1996/12/17  17:41:56  hope
 * branched from 1.4
 *
@


1.4.4.1
log
@branched from 1.4
@
text
@a9 4
 * Revision 1.4  1996/10/03  15:20:15  io
 * [Bug #1614]
 * remove redundant requires
 *
@


1.4.3.1
log
@branched from 1.4
@
text
@a9 4
 * Revision 1.4  1996/10/03  15:20:15  io
 * [Bug #1614]
 * remove redundant requires
 *
@


1.4.3.1.1.1
log
@branched from 1.4.3.1
@
text
@a9 3
 * Revision 1.4.3.1  1996/11/14  12:42:30  hope
 * branched from 1.4
 *
@


1.4.2.1
log
@branched from 1.4
@
text
@a9 4
 * Revision 1.4  1996/10/03  15:20:15  io
 * [Bug #1614]
 * remove redundant requires
 *
@


1.4.1.1
log
@branched from 1.4
@
text
@a9 4
 * Revision 1.4  1996/10/03  15:20:15  io
 * [Bug #1614]
 * remove redundant requires
 *
@


1.3
log
@Bring up to latest revision of basis
@
text
@d10 3
a26 1
require "toplevel";
@


1.3.1.1
log
@branched from 1.3
@
text
@a9 3
 * Revision 1.3  1996/05/08  15:55:15  jont
 * Bring up to latest revision of basis
 *
@


1.2
log
@Update wrt change in Time implementation.
Also bring up to date wrt latest basis revision.
@
text
@d10 4
d57 3
a59 1
    (* val fromString : string -> date option *)
d61 1
a61 1
    (* val fmt : string -> date -> string *)
d63 1
a63 2
    (* val scan : { getc : 'a -> (char * 'a) option -> 'a -> (date * 'a) option *)
    (* val compare : date * date -> order *)
@


1.1
log
@new unit
@
text
@d9 4
a12 1
 *  $Log$
d20 3
a22 1
require "__time";
d38 3
a40 3
       offset : int, (* +/- from GMT? *)
       zone : string,
       wday : weekday
d43 5
a47 1
    type timezone
d49 1
a49 2
    val localTZ : timezone
    val univTZ : timezone
d51 8
a58 4
    exception Date
    val timeToDate : Time.time * timezone -> date
    val dateToTime : date -> Time.time
    val localTime : Time.time -> date
d60 1
a60 1
  end (* DATE *)
@
