head	1.2;
access;
symbols
	MLWorks_11r1:1.1.8.1.1.1.1
	MLWorks_workspace_97:1.2.2
	MLWorks_dt_wizard:1.2.1
	MLWorks_11c0_1997_09_09:1.1.8.1.1.1
	MLWorks_10r3:1.1.8.1.3
	MLWorks_10r2_551:1.1.8.1.2
	MLWorks_11:1.1.8.1.1
	MLWorks_1_0_r2c2_1997_07_28:1.1.8.1
	MLWorks_20m0_1997_06_20:1.1
	MLWorks_1_0_r2c2_1997_06_14:1.1.8.1
	MLWorks_1_0_r2c1_released_1997_05_23:1.1.8.1
	MLWorks_1_0_r2c1_1997_05_12:1.1.8
	MLWorks_BugFix_1997_04_24:1.1
	MLWorks_1_0_r2_Win32_1997_04_11:1.1
	MLWorks_1_0_r2_Unix_1997_04_04:1.1
	MLWorks_1_0_1_ULTRASPARC_1997_02_24:1.1.6.1.1
	MLWorks_gui_1996_12_18:1.1.7
	MLWorks_1_0_Win32_1996_12_17:1.1.6
	MLWorks_1_0_Irix_1996_11_28_released_1996_12_17:1.1.4.1.1.1
	MLWorks_1_0_Unix_1996_11_14_released_1996_12_17:1.1.4.1
	MLWorks_1_0_Irix_1996_11_28:1.1.4.1.1
	MLWorks_1_0_Win32_1996_11_22:1.1.5
	MLWorks_1_0_Unix_1996_11_14:1.1.4
	MLWorks_Open_Beta2_1996_10_11:1.1.3
	MLWorks_License_dev:1.1.2
	MLWorks_1_open_beta_1996_09_13:1.1.1
	MLWorks_Open_Beta_1996_08_22:1.1
	MLWorks_Beta_1996_07_02:1.1
	MLWorks_Beta_1996_06_07:1.1
	MLWorks_Beta_1996_06_06:1.1
	MLWorks_Beta_1996_06_05:1.1
	MLWorks_Beta_1996_06_03:1.1
	MLWorks_Beta_1996_05_31:1.1;
locks; strict;
comment	@ *  @;


1.2
date	97.07.18.10.47.10;	author brucem;	state Exp;
branches
	1.2.1.1
	1.2.2.1;
next	1.1;

1.1
date	96.05.30.16.09.14;	author daveb;	state Exp;
branches
	1.1.1.1
	1.1.2.1
	1.1.3.1
	1.1.4.1
	1.1.5.1
	1.1.6.1
	1.1.7.1
	1.1.8.1;
next	;

1.1.1.1
date	96.09.13.11.09.27;	author hope;	state Exp;
branches;
next	;

1.1.2.1
date	96.10.07.16.00.24;	author hope;	state Exp;
branches;
next	;

1.1.3.1
date	96.10.17.11.18.38;	author hope;	state Exp;
branches;
next	;

1.1.4.1
date	96.11.14.12.42.11;	author hope;	state Exp;
branches
	1.1.4.1.1.1;
next	;

1.1.4.1.1.1
date	96.11.28.14.54.04;	author hope;	state Exp;
branches;
next	;

1.1.5.1
date	96.11.22.18.02.40;	author hope;	state Exp;
branches;
next	;

1.1.6.1
date	96.12.17.17.41.36;	author hope;	state Exp;
branches
	1.1.6.1.1.1;
next	;

1.1.6.1.1.1
date	97.02.24.11.29.52;	author hope;	state Exp;
branches;
next	;

1.1.7.1
date	96.12.18.09.35.32;	author hope;	state Exp;
branches;
next	;

1.1.8.1
date	97.05.12.10.27.34;	author hope;	state Exp;
branches
	1.1.8.1.1.1
	1.1.8.1.2.1
	1.1.8.1.3.1;
next	;

1.1.8.1.1.1
date	97.07.28.18.14.53;	author daveb;	state Exp;
branches
	1.1.8.1.1.1.1.1;
next	;

1.1.8.1.1.1.1.1
date	97.10.07.11.39.57;	author jkbrook;	state Exp;
branches;
next	;

1.1.8.1.2.1
date	97.09.08.17.08.20;	author daveb;	state Exp;
branches;
next	;

1.1.8.1.3.1
date	97.09.09.14.03.27;	author daveb;	state Exp;
branches;
next	;

1.2.1.1
date	97.09.10.19.17.56;	author brucem;	state Exp;
branches;
next	;

1.2.2.1
date	97.09.11.20.48.49;	author daveb;	state Exp;
branches;
next	;


desc
@new unit
Backwards compatibility.
@


1.2
log
@[Bug #30090]
Remove references to MLWorks.IO (replacing with TextIO) so that MLWorks.IO can be removed.
@
text
@(* This structure declares the top-level items in the 1990 Definition Of
 * Standard ML that were removed by the revised basis.  Opening this
 * structure should enable almost any code written for the original
 * Definition to be compiled.
 *
 * Copyright (C) 1996 Harlequin Ltd.
 *
 * $Log: __old.sml,v $
 *  Revision 1.1  1996/05/30  16:09:14  daveb
 *  new unit
 *  Backwards compatibility.
 *
 *
 *)

require "old";
require "__text_io";
require "__char";
require "__io";

structure Old: OLD =
struct

  (* The 1990 definition describes the I/O facilities implemented here. *)
  (* The old in/outstream types should not be the same as TextIO.instream
     as the 1990 definition says,
      ``both these types are abstract, in the sense that streams may only
        be manipulated by the functions provided in BasVal.'' *)
  (* Only two uses of the Io exception are mentioned by the defn, these
     are included here.  Any other exceptions encountered also cause Io to be
     raised but just with the function name as additional data --- this
     prevents the user from being aware of the underlying TextIO calls
     and encountering new basis exceptions. *)

  abstype instream  =  IN_S of TextIO.instream
      and outstream = OUT_S of TextIO.outstream
  with 
 
    exception Io of string

    val std_in = IN_S TextIO.stdIn

    and open_in =
      fn s => IN_S (TextIO.openIn s) handle _ => raise Io ("Cannot open "^s)

    and input =
      fn (IN_S is, n) => TextIO.inputN (is, n)
        handle e => raise Io ("input: "^(exnMessage e))

    and lookahead =
      fn (IN_S is) => case (TextIO.lookahead is) of
                      SOME e => Char.toString e
                    | NONE => ""
      handle e => raise Io ("lookahead: "^(exnMessage e))

    and close_in = 
      fn (IN_S is) => TextIO.closeIn is
        handle e => raise Io ("close_in: "^(exnMessage e))

    and end_of_stream =
      fn (IN_S is) => TextIO.endOfStream is
        handle e => raise Io ("end_of_stream: "^(exnMessage e))
      (* IMPERATIVE_IO.endOfStream may potentially return true for a stream
         which refills later, but end_of_stream should only return true for
         a stream which never refils.
         This is unlikely to matter in most cases *)

    and std_out = OUT_S TextIO.stdOut

    and open_out =
      fn s => OUT_S (TextIO.openOut s)
        handle _ => raise Io ("Cannot open "^s)

    and output =
      fn (OUT_S os, s) =>  TextIO.output (os, s)
         handle IO.Io {cause = IO.ClosedStream, ...} => 
                  raise Io "Output stream is closed"
              | e => raise Io ("output: "^(exnMessage e))

    and close_out =
      fn (OUT_S os) => TextIO.closeOut os
        handle e => raise Io ("close_out: "^(exnMessage e))

  end

  exception Ord = MLWorks.String.Ord

  (* The following exceptions are all aliases for Overflow *)
  exception Abs = Overflow
  exception Quot = Overflow
  exception Prod = Overflow
  exception Neg = Overflow
  exception Sum = Overflow
  exception Diff = Overflow
  exception Floor = Overflow

  (* The following exceptions never in fact occur *)
  exception Sqrt
  exception Exp
  exception Ln

  (* The following exception is a synonym of Div *)
  exception Mod = Div

  (* The following exception is raised when ... *)
  exception Interrupt = MLWorks.Interrupt

  val env = MLWorks.Internal.Runtime.environment

  val sqrt: real -> real = env "real square root"
  val sin: real -> real = env "real sin"
  val cos: real -> real = env "real cos"
  val arctan: real -> real = env "real arctan"
  val exp: real -> real = env "real exp"
  val ln: real -> real = env "real ln"

  val chr = MLWorks.String.chr
  val ord = MLWorks.String.ord
  val explode = MLWorks.String.explode
  val implode = MLWorks.String.implode

end
@


1.2.2.1
log
@branched from trunk for label MLWorks_workspace_97
@
text
@a8 4
 *  Revision 1.2  1997/07/18  10:47:10  brucem
 *  [Bug #30090]
 *  Remove references to MLWorks.IO (replacing with TextIO) so that MLWorks.IO can be removed.
 *
@


1.2.1.1
log
@branched from trunk for label MLWorks_dt_wizard
@
text
@a8 4
 *  Revision 1.2  1997/07/18  10:47:10  brucem
 *  [Bug #30090]
 *  Remove references to MLWorks.IO (replacing with TextIO) so that MLWorks.IO can be removed.
 *
@


1.1
log
@new unit
Backwards compatibility.
@
text
@d8 5
a12 1
 * $Log$
d17 3
d23 62
a84 1
  open MLWorks.IO
d121 1
a122 1

@


1.1.8.1
log
@branched from 1.1
@
text
@d8 1
a8 5
 * $Log: __old.sml,v $
 *  Revision 1.1  1996/05/30  16:09:14  daveb
 *  new unit
 *  Backwards compatibility.
 *
@


1.1.8.1.3.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r3
@
text
@a8 3
 *  Revision 1.1.8.1  1997/05/12  10:27:34  hope
 *  branched from 1.1
 *
@


1.1.8.1.2.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r2_551
@
text
@a8 3
 *  Revision 1.1.8.1  1997/05/12  10:27:34  hope
 *  branched from 1.1
 *
@


1.1.8.1.1.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
@
text
@a8 3
 *  Revision 1.1.8.1  1997/05/12  10:27:34  hope
 *  branched from 1.1
 *
@


1.1.8.1.1.1.1.1
log
@branched from MLWorks_11 for label MLWorks_11r1
@
text
@a8 3
 *  Revision 1.1.8.1.1.1  1997/07/28  18:14:53  daveb
 *  branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
 *
@


1.1.7.1
log
@branched from 1.1
@
text
@d8 1
a8 5
 * $Log: __old.sml,v $
 *  Revision 1.1  1996/05/30  16:09:14  daveb
 *  new unit
 *  Backwards compatibility.
 *
@


1.1.6.1
log
@branched from 1.1
@
text
@d8 1
a8 5
 * $Log: __old.sml,v $
 *  Revision 1.1  1996/05/30  16:09:14  daveb
 *  new unit
 *  Backwards compatibility.
 *
@


1.1.6.1.1.1
log
@branched from 1.1.6.1
@
text
@a8 3
 *  Revision 1.1.6.1  1996/12/17  17:41:36  hope
 *  branched from 1.1
 *
@


1.1.5.1
log
@branched from 1.1
@
text
@d8 1
a8 5
 * $Log: __old.sml,v $
 *  Revision 1.1  1996/05/30  16:09:14  daveb
 *  new unit
 *  Backwards compatibility.
 *
@


1.1.4.1
log
@branched from 1.1
@
text
@d8 1
a8 5
 * $Log: __old.sml,v $
 *  Revision 1.1  1996/05/30  16:09:14  daveb
 *  new unit
 *  Backwards compatibility.
 *
@


1.1.4.1.1.1
log
@branched from 1.1.4.1
@
text
@a8 3
 *  Revision 1.1.4.1  1996/11/14  12:42:11  hope
 *  branched from 1.1
 *
@


1.1.3.1
log
@branched from 1.1
@
text
@d8 1
a8 5
 * $Log: __old.sml,v $
 *  Revision 1.1  1996/05/30  16:09:14  daveb
 *  new unit
 *  Backwards compatibility.
 *
@


1.1.2.1
log
@branched from 1.1
@
text
@d8 1
a8 5
 * $Log: __old.sml,v $
 *  Revision 1.1  1996/05/30  16:09:14  daveb
 *  new unit
 *  Backwards compatibility.
 *
@


1.1.1.1
log
@branched from 1.1
@
text
@d8 1
a8 5
 * $Log: __old.sml,v $
 *  Revision 1.1  1996/05/30  16:09:14  daveb
 *  new unit
 *  Backwards compatibility.
 *
@
