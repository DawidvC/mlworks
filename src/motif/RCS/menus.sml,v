head	1.13;
access;
symbols
	ML_beta_release_12/08/94:1.11
	ML_beta_release_03/08/94:1.11
	ML_revised_beta_release_25/05/94:1.11
	ML_final_beta_release_02/03/94:1.11
	mlworks-28-01-1994:1.11
	Release:1.11
	mlworks-beta-01-09-1993:1.11;
locks; strict;
comment	@ * @;


1.13
date	95.07.06.13.31.31;	author matthew;	state Exp;
branches;
next	1.12;

1.12
date	95.05.29.13.09.45;	author daveb;	state Exp;
branches;
next	1.11;

1.11
date	93.08.19.14.24.43;	author matthew;	state Exp;
branches
	1.11.1.1;
next	1.10;

1.10
date	93.08.11.10.08.28;	author matthew;	state Exp;
branches;
next	1.9;

1.9
date	93.05.18.16.40.12;	author daveb;	state Exp;
branches;
next	1.8;

1.8
date	93.05.13.10.05.36;	author daveb;	state Exp;
branches;
next	1.7;

1.7
date	93.04.30.13.30.53;	author matthew;	state Exp;
branches;
next	1.6;

1.6
date	93.04.19.14.53.15;	author matthew;	state Exp;
branches;
next	1.5;

1.5
date	93.04.15.18.24.28;	author daveb;	state Exp;
branches;
next	1.4;

1.4
date	93.03.31.12.27.17;	author matthew;	state Exp;
branches;
next	1.3;

1.3
date	93.03.26.18.51.05;	author matthew;	state Exp;
branches;
next	1.2;

1.2
date	93.03.23.14.21.01;	author matthew;	state Exp;
branches;
next	1.1;

1.1
date	93.03.17.16.28.47;	author matthew;	state Exp;
branches;
next	;

1.11.1.1
date	93.08.19.14.24.43;	author jont;	state Exp;
branches;
next	;


desc
@Menu utilities
@


1.13
log
@Changing the type of PUSHBUTTON callback type
@
text
@(* Motif menu bar utilites *)
(*

$Log: menus.sml,v $
Revision 1.12  1995/05/29  13:09:45  daveb
Replaced spurious type variable in result of create_dialog with unit.

Revision 1.11  1993/08/19  14:24:43  matthew
Added OPTSUBMENU to Option menu (a non-radio box submenu)

Revision 1.10  1993/08/11  10:08:28  matthew
Return update function from create_dialog
Simplified interface.

Revision 1.9  1993/05/18  16:40:12  daveb
Added the OPTRADIO constructor.

Revision 1.8  1993/05/13  10:05:36  daveb
create_dialog now takes a string to use for the title of the popup shell.

Revision 1.7  1993/04/30  13:30:53  matthew
Added create_dialog_with_action

Revision 1.6  1993/04/19  14:53:15  matthew
Added TOGGLE button class

Revision 1.5  1993/04/15  18:24:28  daveb
Added DYNAMIC menus.

Revision 1.4  1993/03/31  12:27:17  matthew
Removed MenuSpec type, added OptionSpec type and make_options and
create_dialog

Revision 1.3  1993/03/26  18:51:05  matthew
Added create_dialog function

Revision 1.2  1993/03/23  14:21:01  matthew
Extended ButtonSpec class

Revision 1.1  1993/03/17  16:28:47  matthew
Initial revision


Copyright (c) 1993 Harlequin Ltd.

*)

signature MENUS =
  sig
    type Widget

    datatype ButtonSpec =
        SEPARATOR |
        LABEL of string |
        (* fun 1 gets initial value, fun 2 is callback function, fun 3 is a sensitive function *)
        TOGGLE of string * (unit -> bool) * (bool -> unit) * (unit -> bool) |
        PUSH of string * (unit -> unit) * (unit -> bool) |
        DYNAMIC of string * (unit -> ButtonSpec list) * (unit -> bool) |
        CASCADE of string * ButtonSpec list * (unit -> bool)

    (* First function is get the value for the widget
       second is set the value for the widget *)
    datatype OptionSpec =
      OPTSEPARATOR |
      OPTLABEL of string |
      OPTTOGGLE of string * (unit -> bool) * (bool -> unit) |
      OPTTEXT of string * (unit -> string) * (string -> unit) |
      OPTINT of string * (unit -> int) * (int -> unit) |
      OPTRADIO of OptionSpec list |
      OPTSUBMENU of OptionSpec list

    (* returns an update function *)

    val make_submenus : Widget * ButtonSpec list -> (unit -> unit)


    (* first unit to unit function is update, second is apply *)
    val make_options : Widget * OptionSpec list ->
			 (unit -> unit) * (unit -> unit)

    (* This utility function makes a popup dialog with a menu inside *)
    (* apply the action function after a change has been made *)
    val create_dialog :
      Widget * string * string * (unit -> unit) * OptionSpec list ->
      ((unit -> unit) * (unit -> unit))  (* return popup and update function *)
  end

@


1.12
log
@Replaced spurious type variable in result of create_dialog with unit.
@
text
@d5 3
d55 1
a55 1
        (* fun 1 is a function to get initial value, fun 2 is callback function, fun 3 is a sensitive function *)
d57 1
a57 1
        PUSH of string * (MLWorks.Internal.Value.T -> unit) * (unit -> bool) |
@


1.11
log
@Added OPTSUBMENU to Option menu (a non-radio box submenu)
@
text
@d5 3
d82 1
a82 1
      (('a -> unit) * (unit -> unit))  (* return popup and update function *)
@


1.11.1.1
log
@Fork for bug fixing
@
text
@a4 3
Revision 1.11  1993/08/19  14:24:43  matthew
Added OPTSUBMENU to Option menu (a non-radio box submenu)

@


1.10
log
@Return update function from create_dialog
Simplified interface.
@
text
@d5 4
d63 2
a64 1
      OPTRADIO of OptionSpec list
@


1.9
log
@Added the OPTRADIO constructor.
@
text
@d5 3
d71 4
a74 8
    val create_dialog : Widget * string * string * OptionSpec list ->
			  ('a -> unit)

    (* same as above, but apply the action function after a change has
       been made *)
    val create_dialog_with_action :
      Widget * string * string * OptionSpec list * (unit -> unit) ->
	('a -> unit)
@


1.8
log
@create_dialog now takes a string to use for the title of the popup shell.
@
text
@d5 3
d55 2
a56 1
      OPTINT of string * (unit -> int) * (int -> unit)
@


1.7
log
@Added create_dialog_with_action
@
text
@d5 3
d60 2
a61 1
    val make_options : Widget * OptionSpec list -> (unit -> unit) * (unit -> unit)
d64 2
a65 1
    val create_dialog : Widget * string * OptionSpec list -> ('a -> unit)
d67 5
a71 2
    (* same as above, but apply the action function after a change has been made *)
    val create_dialog_with_action : Widget * string * OptionSpec list * (unit -> unit) -> ('a -> unit)
@


1.6
log
@Added TOGGLE button class
@
text
@d5 3
d61 3
@


1.5
log
@Added DYNAMIC menus.
@
text
@d5 3
d33 2
@


1.4
log
@Removed MenuSpec type, added OptionSpec type and make_options and
create_dialog
@
text
@d5 4
d31 1
a31 3
(*
        ARROW of string * (MLWorks.Internal.Value.T -> unit) * (unit -> bool) |
*)
@


1.3
log
@Added create_dialog function
@
text
@d5 3
d23 17
a39 11
    datatype MenuSpec =
      MENUSPEC of ButtonSpec list
    and ButtonSpec =
        SEPARATOR
      | LABEL of string
      | TOGGLE of string * (MLWorks.Internal.Value.T -> unit) * (unit -> bool) * (unit -> bool)
      | ARROW of string * (MLWorks.Internal.Value.T -> unit) * (unit -> bool)
      | PUSH of string * (MLWorks.Internal.Value.T -> unit) * (unit -> bool)
      | CASCADE of string * MenuSpec * (unit -> bool)
      | TEXT of string * (unit -> string) * (string -> unit)
      | INT of string * (unit -> int) * (int -> unit)
d43 1
a43 1
    val make_submenus : Widget * MenuSpec -> (unit -> unit)
a44 1
    (* This utility function makes a popup dialog with a menu inside *)
d46 2
a47 1
    val create_dialog : Widget * MenuSpec -> Widget * (unit -> unit)
d49 2
@


1.2
log
@Extended ButtonSpec class
@
text
@d5 3
d25 3
a27 3
      | TOGGLE of string * (unit -> unit) * (unit -> bool) * (unit -> bool)
      | ARROW of string * (unit -> unit) * (unit -> bool)
      | PUSH of string * (unit -> unit) * (unit -> bool)
d33 1
d36 1
a36 3
(* sometime need to add stuff for specifying whether buttons are active or not *)
(*
    datatype ActiveTest = ACTIVETEST of unit -> bool
d38 2
a39 2
    val always : ActiveTest
*)
@


1.1
log
@Initial revision
@
text
@d5 2
d8 1
d21 7
a27 2
      | SIMPLE of string * (unit -> unit)
      | CASCADE of string * MenuSpec
d29 2
a30 1
    val make_submenus : Widget * MenuSpec -> unit
@
