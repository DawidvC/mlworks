head	1.1;
access;
symbols
	MLW_daveb_inline_1_4_99:1.1.8
	MLWorks_21c0_1999_03_25:1.1
	MLWorks_20c1_1998_08_20:1.1
	MLWorks_20c0_1998_08_04:1.1
	MLWorks_20b2c2_1998_06_19:1.1
	MLWorks_20b2_Windows_1998_06_12:1.1
	MLWorks_20b1c1_1998_05_07:1.1
	MLWorks_20b0_1998_04_07:1.1
	MLWorks_20b0_1998_03_20:1.1
	MLWorks_20m2_1998_02_16:1.1
	MLWorks_20m1_1997_10_23:1.1
	MLWorks_11r1:1.1.5.1.1.1.1
	MLWorks_workspace_97:1.1.7
	MLWorks_dt_wizard:1.1.6
	MLWorks_11c0_1997_09_09:1.1.5.1.1.1
	MLWorks_10r3:1.1.5.1.3
	MLWorks_10r2_551:1.1.5.1.2
	MLWorks_11:1.1.5.1.1
	MLWorks_1_0_r2c2_1997_07_28:1.1.5.1
	MLWorks_20m0_1997_06_20:1.1
	MLWorks_1_0_r2c2_1997_06_14:1.1.5.1
	MLWorks_1_0_r2c1_released_1997_05_23:1.1.5.1
	MLWorks_1_0_r2c1_1997_05_12:1.1.5
	MLWorks_BugFix_1997_04_24:1.1
	MLWorks_1_0_r2_Win32_1997_04_11:1.1
	MLWorks_1_0_r2_Unix_1997_04_04:1.1
	MLWorks_1_0_1_ULTRASPARC_1997_02_24:1.1.3.1.1
	MLWorks_gui_1996_12_18:1.1.4
	MLWorks_1_0_Win32_1996_12_17:1.1.3
	MLWorks_1_0_Irix_1996_11_28_released_1996_12_17:1.1.1.1.1.1
	MLWorks_1_0_Unix_1996_11_14_released_1996_12_17:1.1.1.1
	MLWorks_1_0_Irix_1996_11_28:1.1.1.1.1
	MLWorks_1_0_Win32_1996_11_22:1.1.2
	MLWorks_1_0_Unix_1996_11_14:1.1.1;
locks; strict;
comment	@; @;


1.1
date	96.11.04.16.33.56;	author matthew;	state Exp;
branches
	1.1.1.1
	1.1.2.1
	1.1.3.1
	1.1.4.1
	1.1.5.1
	1.1.6.1
	1.1.7.1
	1.1.8.1;
next	;

1.1.1.1
date	96.11.14.13.05.15;	author hope;	state Exp;
branches
	1.1.1.1.1.1;
next	;

1.1.1.1.1.1
date	96.11.28.15.14.46;	author hope;	state Exp;
branches;
next	;

1.1.2.1
date	96.11.22.18.22.42;	author hope;	state Exp;
branches;
next	;

1.1.3.1
date	96.12.17.18.00.45;	author hope;	state Exp;
branches
	1.1.3.1.1.1;
next	;

1.1.3.1.1.1
date	97.02.24.11.52.25;	author hope;	state Exp;
branches;
next	;

1.1.4.1
date	96.12.18.09.56.06;	author hope;	state Exp;
branches;
next	;

1.1.5.1
date	97.05.12.10.50.48;	author hope;	state Exp;
branches
	1.1.5.1.1.1
	1.1.5.1.2.1
	1.1.5.1.3.1;
next	;

1.1.5.1.1.1
date	97.07.28.18.32.46;	author daveb;	state Exp;
branches
	1.1.5.1.1.1.1.1;
next	;

1.1.5.1.1.1.1.1
date	97.10.07.11.58.50;	author jkbrook;	state Exp;
branches;
next	;

1.1.5.1.2.1
date	97.09.08.17.25.58;	author daveb;	state Exp;
branches;
next	;

1.1.5.1.3.1
date	97.09.09.14.22.44;	author daveb;	state Exp;
branches;
next	;

1.1.6.1
date	97.09.10.19.41.44;	author brucem;	state Exp;
branches;
next	;

1.1.7.1
date	97.09.11.21.09.15;	author daveb;	state Exp;
branches;
next	;

1.1.8.1
date	99.04.01.18.08.05;	author daveb;	state Exp;
branches;
next	;


desc
@new unit
New unit
@


1.1
log
@new unit
New unit
@
text
@;;; sml-menus.el. Simple menus for sml-mode

;; Copyright (C) 1994, Matthew J. Morley

;; This file is not part of GNU Emacs, but it is distributed under the
;; same conditions.

;; ====================================================================

;; This program is free software; you can redistribute it and/or
;; modify it under the terms of the GNU General Public License as
;; published by the Free Software Foundation; either version 2, or (at
;; your option) any later version.

;; This program is distributed in the hope that it will be useful, but
;; WITHOUT ANY WARRANTY; without even the implied warranty of
;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
;; General Public License for more details.

;; You should have received a copy of the GNU General Public License
;; along with GNU Emacs; see the file COPYING. If not, write to the
;; Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.

;; ====================================================================

;;; DESCRIPTION

;; You need auc-menu or easymenu on your lisp load-path.

;; Menus appear only when the insertion point is in an sml-mode
;; buffer. They should appear automatically as long as sml-mode can
;; find this file and easymenu.el, auc-menu.el, but not otherwise.

;; If you load sml-proc.el to run an inferior ML process -- or even a
;; superior one, who knows? -- the "Process" submenu will become active.

;;; CODE 

(condition-case () (require 'easymenu) (error (require 'auc-menu)))

;; That's FSF easymenu, distributed with GNU Emacs 19, or Per
;; Abrahamsen's auc-menu distributed with AUCTeX, or from the Emacs
;; lisp archive, or the IESD (http://ftp.iesd.auc.dk/pub/emacs-lisp)
;; lisp archive at Aalborg (auc-menu works with XEmacs too).

(defconst sml-menu
  (list "SML"
	(list "Process" ["Start default ML compiler" (sml nil) t]
	      ["-" nil nil]
	      ["load ML source file"        sml-load-file 
                :active (featurep 'sml-proc)]
	      ["switch to ML buffer"         (switch-to-sml nil) 
                :active (featurep 'sml-proc)]
	      ["--" nil nil]
	      ["send buffer contents"       sml-send-buffer 
                :active (featurep 'sml-proc)]
	      ["send region"                sml-send-region 
                :active (featurep 'sml-proc)]
	      ["send paragraph"             sml-send-function 
                :active (featurep 'sml-proc)]
	      ["goto next error"            sml-next-error 
                :active (featurep 'sml-proc)]
	      ["---" nil nil]
	      ["MLWorks"  sml-mlworks
                t]
	      ["Help for Inferior ML"   (describe-function 'inferior-sml-mode) 
                :active (featurep 'sml-proc)]
	      )
	["electric pipe"     sml-electric-pipe t]
	["insert SML form"   sml-insert-form t]
	(list "Forms" 
	      ["abstype"     (sml-abstype) t]
              ["datatype"    (sml-datatype) t]
              ["-" nil nil]
              ["let"         (sml-let) t]
              ["local"       (sml-local) t]
              ["case"        (sml-case) t]
              ["--" nil nil]
              ["signature"   (sml-signature) t]
              ["functor"     (sml-functor) t]
              ["structure"   (sml-structure) t]
              ["---" nil nil]
              ["abstraction" (sml-abstraction) t])
        (list "Format/Mode Variables"
              ["indent region"             sml-indent-region t]
              ["outdent"                   sml-back-to-outer-indent t]
	      ["-" nil nil]
              ["set indent-level"          sml-indent-level t]
              ["set pipe-indent"           sml-pipe-indent t]
	      ["--" nil nil]
              ["toggle type-of-indent"     (sml-type-of-indent) t]
              ["toggle nested-if-indent"   (sml-nested-if-indent) t]
              ["toggle case-indent"        (sml-case-indent) t]
              ["toggle electric-semi-mode" (sml-electric-semi-mode) t])
        ["-----" nil nil]
	["SML mode help (brief)"       describe-mode t]
	["SML mode *info*"             sml-mode-info t]
	["SML mode version"            sml-mode-version t]
	["-----" nil nil]
	["Fontify buffer"    (sml-mode-fontify-buffer)
                :active (or (featurep 'sml-font) (featurep 'sml-hilite))]
	))

(defun sml-mode-fontify-buffer ()
  "Just as it suggests."
  (if (featurep 'sml-font) 
      (font-lock-fontify-buffer)
    (if (featurep 'sml-hilite) 
	(hilit-rehighlight-buffer)
      (message "No highlight scheme specified")))) ; belt & braces

(easy-menu-define sml-mode-menu
    sml-mode-map
    "Menu used in sml-mode."
    sml-menu)

;;; Make's sure they appear in the menu bar when sml-mode-map is active.

;; On the hook for XEmacs only -- see easy-menu-add in auc-menu.el.

(defun sml-mode-menu-bar ()
  "Make sure menus appear in the menu bar as well as under mouse 3."
  (and (eq major-mode 'sml-mode)
       (easy-menu-add sml-mode-menu sml-mode-map)))

(add-hook 'sml-mode-hook 'sml-mode-menu-bar)

(autoload 'sml "sml-proc"   sml-no-doc t) ;; autoload all the proc. code

(autoload 'sml-mlworks "sml-mlworks" "An autoload function" t) 

(provide 'sml-menus)

;;; sml-menu.el is over now.
@


1.1.8.1
log
@branched from trunk for label MLW_daveb_inline_1_4_99
@
text
@@


1.1.7.1
log
@branched from trunk for label MLWorks_workspace_97
@
text
@@


1.1.6.1
log
@branched from trunk for label MLWorks_dt_wizard
@
text
@@


1.1.5.1
log
@branched from 1.1
@
text
@@


1.1.5.1.3.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r3
@
text
@@


1.1.5.1.2.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r2_551
@
text
@@


1.1.5.1.1.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
@
text
@@


1.1.5.1.1.1.1.1
log
@branched from MLWorks_11 for label MLWorks_11r1
@
text
@@


1.1.4.1
log
@branched from 1.1
@
text
@@


1.1.3.1
log
@branched from 1.1
@
text
@@


1.1.3.1.1.1
log
@branched from 1.1.3.1
@
text
@@


1.1.2.1
log
@branched from 1.1
@
text
@@


1.1.1.1
log
@branched from 1.1
@
text
@@


1.1.1.1.1.1
log
@branched from 1.1.1.1
@
text
@@
