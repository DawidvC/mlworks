head	1.18;
access;
symbols
	MLWorks_20m1_1997_10_23:1.18
	MLWorks_11r1:1.18.8.1.1.1.1
	MLWorks_workspace_97:1.18.10
	MLWorks_dt_wizard:1.18.9
	MLWorks_11c0_1997_09_09:1.18.8.1.1.1
	MLWorks_10r3:1.18.8.1.3
	MLWorks_10r2_551:1.18.8.1.2
	MLWorks_11:1.18.8.1.1
	MLWorks_1_0_r2c2_1997_07_28:1.18.8.1
	MLWorks_20m0_1997_06_20:1.18
	MLWorks_1_0_r2c2_1997_06_14:1.18.8.1
	MLWorks_1_0_r2c1_released_1997_05_23:1.18.8.1
	MLWorks_1_0_r2c1_1997_05_12:1.18.8
	MLWorks_BugFix_1997_04_24:1.18
	MLWorks_1_0_r2_Win32_1997_04_11:1.18
	MLWorks_1_0_r2_Unix_1997_04_04:1.18
	MLWorks_1_0_1_ULTRASPARC_1997_02_24:1.18.6.1.1
	MLWorks_gui_1996_12_18:1.18.7
	MLWorks_1_0_Win32_1996_12_17:1.18.6
	MLWorks_1_0_Irix_1996_11_28_released_1996_12_17:1.18.4.1.1.1
	MLWorks_1_0_Unix_1996_11_14_released_1996_12_17:1.18.4.1
	MLWorks_1_0_Irix_1996_11_28:1.18.4.1.1
	MLWorks_1_0_Win32_1996_11_22:1.18.5
	MLWorks_1_0_Unix_1996_11_14:1.18.4
	MLWorks_Open_Beta2_1996_10_11:1.18.3
	MLWorks_License_dev:1.18.2
	MLWorks_1_open_beta_1996_09_13:1.18.1
	MLWorks_Open_Beta_1996_08_22:1.18
	MLWorks_Beta_1996_07_02:1.17
	MLWorks_Beta_1996_06_07:1.17
	MLWorks_Beta_1996_06_06:1.17
	MLWorks_Beta_1996_06_05:1.17
	MLWorks_Beta_1996_06_03:1.17
	MLWorks_Beta_1996_05_31:1.17
	MLWorks_Beta_1996_05_30:1.17
	ML_beta_release_12/08/94:1.10
	ML_beta_release_03/08/94:1.9
	ML_revised_beta_release_25/05/94:1.9
	ML_final_beta_release_02/03/94:1.8
	mlworks-28-01-1994:1.8
	Release:1.8
	mlworks-beta-01-09-1993:1.8;
locks; strict;
comment	@ * @;


1.18
date	96.08.06.09.28.08;	author stephenb;	state Exp;
branches
	1.18.1.1
	1.18.2.1
	1.18.3.1
	1.18.4.1
	1.18.5.1
	1.18.6.1
	1.18.7.1
	1.18.8.1
	1.18.9.1
	1.18.10.1;
next	1.17;

1.17
date	96.05.21.11.12.12;	author stephenb;	state Exp;
branches;
next	1.16;

1.16
date	96.04.12.08.38.31;	author stephenb;	state Exp;
branches;
next	1.15;

1.15
date	96.03.27.15.17.33;	author stephenb;	state Exp;
branches;
next	1.14;

1.14
date	95.04.28.11.43.52;	author daveb;	state Exp;
branches;
next	1.13;

1.13
date	95.01.16.10.44.36;	author daveb;	state Exp;
branches;
next	1.12;

1.12
date	94.12.09.10.40.34;	author jont;	state Exp;
branches;
next	1.11;

1.11
date	94.08.16.14.19.50;	author jont;	state Exp;
branches;
next	1.10;

1.10
date	94.08.10.13.01.04;	author daveb;	state Exp;
branches;
next	1.9;

1.9
date	94.03.25.16.06.03;	author daveb;	state Exp;
branches;
next	1.8;

1.8
date	93.05.12.11.44.34;	author matthew;	state Exp;
branches
	1.8.1.1;
next	1.7;

1.7
date	93.05.11.13.43.47;	author matthew;	state Exp;
branches;
next	1.6;

1.6
date	93.05.06.16.09.40;	author matthew;	state Exp;
branches;
next	1.5;

1.5
date	93.05.06.11.48.04;	author jont;	state Exp;
branches;
next	1.4;

1.4
date	93.04.02.14.44.46;	author matthew;	state Exp;
branches;
next	1.3;

1.3
date	93.03.24.17.59.11;	author daveb;	state Exp;
branches;
next	1.2;

1.2
date	93.03.09.13.25.38;	author matthew;	state Exp;
branches;
next	1.1;

1.1
date	93.02.24.11.49.11;	author daveb;	state Exp;
branches;
next	;

1.8.1.1
date	93.05.12.11.44.34;	author jont;	state Exp;
branches;
next	;

1.18.1.1
date	96.09.13.11.15.41;	author hope;	state Exp;
branches;
next	;

1.18.2.1
date	96.10.07.16.05.52;	author hope;	state Exp;
branches;
next	;

1.18.3.1
date	96.10.17.11.24.10;	author hope;	state Exp;
branches;
next	;

1.18.4.1
date	96.11.14.12.48.42;	author hope;	state Exp;
branches
	1.18.4.1.1.1;
next	;

1.18.4.1.1.1
date	96.11.28.15.00.12;	author hope;	state Exp;
branches;
next	;

1.18.5.1
date	96.11.22.18.08.32;	author hope;	state Exp;
branches;
next	;

1.18.6.1
date	96.12.17.17.47.13;	author hope;	state Exp;
branches
	1.18.6.1.1.1;
next	;

1.18.6.1.1.1
date	97.02.24.11.36.56;	author hope;	state Exp;
branches;
next	;

1.18.7.1
date	96.12.18.09.41.14;	author hope;	state Exp;
branches;
next	;

1.18.8.1
date	97.05.12.10.33.40;	author hope;	state Exp;
branches
	1.18.8.1.1.1
	1.18.8.1.2.1
	1.18.8.1.3.1;
next	;

1.18.8.1.1.1
date	97.07.28.18.19.06;	author daveb;	state Exp;
branches
	1.18.8.1.1.1.1.1;
next	;

1.18.8.1.1.1.1.1
date	97.10.07.11.44.15;	author jkbrook;	state Exp;
branches;
next	;

1.18.8.1.2.1
date	97.09.08.17.12.43;	author daveb;	state Exp;
branches;
next	;

1.18.8.1.3.1
date	97.09.09.14.08.21;	author daveb;	state Exp;
branches;
next	;

1.18.9.1
date	97.09.10.19.23.29;	author brucem;	state Exp;
branches;
next	;

1.18.10.1
date	97.09.11.20.54.30;	author daveb;	state Exp;
branches;
next	;


desc
@Creates an action queue for use by shells, and provides functions
for manipulating it.  Used to be in shell.
@


1.18
log
@Replace calls to OldOs.mtime in which the resulting time is
ignored by calls to with OS.FileSys.access.
@
text
@(* ActionQueues: the structure.
 *
 * Copyright (C) 1992,1993 Harlequin Ltd
 *
 *  $Log: __action_queue.sml,v $
 * Revision 1.17  1996/05/21  11:12:12  stephenb
 * Change to pull in Path directly rather than OS.Path since the latter
 * now conforms to the latest basis and it is too much effort to update
 * the code to OS.Path at this point.
 *
 * Revision 1.16  1996/04/12  08:38:31  stephenb
 * Rename Os -> OS to conform with latest basis revision.
 *
 * Revision 1.15  1996/03/27  15:17:33  stephenb
 * Change any use of Os/OS to OldOs/OLD_OS to emphasise that it is using
 * the deprecated OS interface.
 *
 * Revision 1.14  1995/04/28  11:43:52  daveb
 * Moved all the user_context stuff from ShellTypes into a separate file.
 *
 *  Revision 1.13  1995/01/16  10:44:36  daveb
 *  Replaced FileName argument with FileSys and Path arguments.
 *  
 *  Revision 1.12  1994/12/09  10:40:34  jont
 *  Move OS specific stuff into a system link directory
 *  
 *  Revision 1.11  1994/08/16  14:19:50  jont
 *  Added UnixFileName argument to functor
 *  
 *  Revision 1.10  1994/08/10  13:01:04  daveb
 *  Added Unix and Getenv arguments.
 *  
 *  Revision 1.9  1994/03/25  16:06:03  daveb
 *  Added Module and ModuleId parameters.
 *  
 *  Revision 1.8  1993/05/12  11:44:34  matthew
 *  Removed some structures.
 *  
 *  Revision 1.7  1993/05/11  13:43:47  matthew
 *  Removed Io, added ShellUtils
 *  
 *  Revision 1.6  1993/05/06  16:09:40  matthew
 *  Added UserOptions structure
 *  
 *  Revision 1.5  1993/05/06  11:48:04  jont
 *  Added a new parameter to the functor, io
 *  
 *  Revision 1.4  1993/04/02  14:44:46  matthew
 *  Added Incremental structure
 *  
 *  Revision 1.3  1993/03/24  17:59:11  daveb
 *  Replaced Incremental with ShellTypes.
 *  
 *  Revision 1.2  1993/03/09  13:25:38  matthew
 *  Removed some structures.
 *  
 *  Revision 1.1  1993/02/24  11:49:11  daveb
 *  Initial revision
 *
 *)

require "../utils/__lists";
require "../system/__os";
require "../system/__path";
require "../basics/__module";
require "../basics/__module_id";
require "../system/__getenv";
require "../main/__user_options";
require "__incremental";
require "__shell_utils";
require "__user_context";
require "__shell_types";

require "_action_queue";

structure ActionQueue_ =
  ActionQueue (
    structure Lists = Lists_
    structure OS = OS
    structure Path = Path_
    structure Module = Module_
    structure ModuleId = ModuleId_
    structure UserOptions = UserOptions_
    structure UserContext = UserContext_
    structure Incremental = Incremental_
    structure ShellUtils = ShellUtils_
    structure ShellTypes = ShellTypes_
    structure Getenv = Getenv_
  );
@


1.18.10.1
log
@branched from trunk for label MLWorks_workspace_97
@
text
@a5 4
 * Revision 1.18  1996/08/06  09:28:08  stephenb
 * Replace calls to OldOs.mtime in which the resulting time is
 * ignored by calls to with OS.FileSys.access.
 *
@


1.18.9.1
log
@branched from trunk for label MLWorks_dt_wizard
@
text
@a5 4
 * Revision 1.18  1996/08/06  09:28:08  stephenb
 * Replace calls to OldOs.mtime in which the resulting time is
 * ignored by calls to with OS.FileSys.access.
 *
@


1.18.8.1
log
@branched from 1.18
@
text
@a5 4
 * Revision 1.18  1996/08/06  09:28:08  stephenb
 * Replace calls to OldOs.mtime in which the resulting time is
 * ignored by calls to with OS.FileSys.access.
 *
@


1.18.8.1.3.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r3
@
text
@a5 3
 * Revision 1.18.8.1  1997/05/12  10:33:40  hope
 * branched from 1.18
 *
@


1.18.8.1.2.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r2_551
@
text
@a5 3
 * Revision 1.18.8.1  1997/05/12  10:33:40  hope
 * branched from 1.18
 *
@


1.18.8.1.1.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
@
text
@a5 3
 * Revision 1.18.8.1  1997/05/12  10:33:40  hope
 * branched from 1.18
 *
@


1.18.8.1.1.1.1.1
log
@branched from MLWorks_11 for label MLWorks_11r1
@
text
@a5 3
 * Revision 1.18.8.1.1.1  1997/07/28  18:19:06  daveb
 * branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
 *
@


1.18.7.1
log
@branched from 1.18
@
text
@a5 4
 * Revision 1.18  1996/08/06  09:28:08  stephenb
 * Replace calls to OldOs.mtime in which the resulting time is
 * ignored by calls to with OS.FileSys.access.
 *
@


1.18.6.1
log
@branched from 1.18
@
text
@a5 4
 * Revision 1.18  1996/08/06  09:28:08  stephenb
 * Replace calls to OldOs.mtime in which the resulting time is
 * ignored by calls to with OS.FileSys.access.
 *
@


1.18.6.1.1.1
log
@branched from 1.18.6.1
@
text
@a5 3
 * Revision 1.18.6.1  1996/12/17  17:47:13  hope
 * branched from 1.18
 *
@


1.18.5.1
log
@branched from 1.18
@
text
@a5 4
 * Revision 1.18  1996/08/06  09:28:08  stephenb
 * Replace calls to OldOs.mtime in which the resulting time is
 * ignored by calls to with OS.FileSys.access.
 *
@


1.18.4.1
log
@branched from 1.18
@
text
@a5 4
 * Revision 1.18  1996/08/06  09:28:08  stephenb
 * Replace calls to OldOs.mtime in which the resulting time is
 * ignored by calls to with OS.FileSys.access.
 *
@


1.18.4.1.1.1
log
@branched from 1.18.4.1
@
text
@a5 3
 * Revision 1.18.4.1  1996/11/14  12:48:42  hope
 * branched from 1.18
 *
@


1.18.3.1
log
@branched from 1.18
@
text
@a5 4
 * Revision 1.18  1996/08/06  09:28:08  stephenb
 * Replace calls to OldOs.mtime in which the resulting time is
 * ignored by calls to with OS.FileSys.access.
 *
@


1.18.2.1
log
@branched from 1.18
@
text
@a5 4
 * Revision 1.18  1996/08/06  09:28:08  stephenb
 * Replace calls to OldOs.mtime in which the resulting time is
 * ignored by calls to with OS.FileSys.access.
 *
@


1.18.1.1
log
@branched from 1.18
@
text
@a5 4
 * Revision 1.18  1996/08/06  09:28:08  stephenb
 * Replace calls to OldOs.mtime in which the resulting time is
 * ignored by calls to with OS.FileSys.access.
 *
@


1.17
log
@Change to pull in Path directly rather than OS.Path since the latter
now conforms to the latest basis and it is too much effort to update
the code to OS.Path at this point.
@
text
@d6 5
a67 1
require "../system/__old_os";
a88 1
    structure OldOs = OldOs_
@


1.16
log
@Rename Os -> OS to conform with latest basis revision.
@
text
@d6 3
d59 1
d76 1
@


1.15
log
@Change any use of Os/OS to OldOs/OLD_OS to emphasise that it is using
the deprecated OS interface.
@
text
@d6 4
d71 1
a71 1
    structure Os = Os
@


1.14
log
@Moved all the user_context stuff from ShellTypes into a separate file.
@
text
@d6 3
d51 1
a51 2
require "../system/__filesys";
require "../system/__path";
d55 1
a55 1
require "../system/__os";
d67 1
a67 2
    structure FileSys = FileSys_
    structure Path = Path_
d76 1
a76 1
    structure Os = Os_
@


1.13
log
@Replaced FileName argument with FileSys and Path arguments.
@
text
@d6 38
a43 36
Revision 1.12  1994/12/09  10:40:34  jont
Move OS specific stuff into a system link directory

Revision 1.11  1994/08/16  14:19:50  jont
Added UnixFileName argument to functor

Revision 1.10  1994/08/10  13:01:04  daveb
Added Unix and Getenv arguments.

Revision 1.9  1994/03/25  16:06:03  daveb
Added Module and ModuleId parameters.

Revision 1.8  1993/05/12  11:44:34  matthew
Removed some structures.

Revision 1.7  1993/05/11  13:43:47  matthew
Removed Io, added ShellUtils

Revision 1.6  1993/05/06  16:09:40  matthew
Added UserOptions structure

Revision 1.5  1993/05/06  11:48:04  jont
Added a new parameter to the functor, io

Revision 1.4  1993/04/02  14:44:46  matthew
Added Incremental structure

Revision 1.3  1993/03/24  17:59:11  daveb
Replaced Incremental with ShellTypes.

Revision 1.2  1993/03/09  13:25:38  matthew
Removed some structures.

Revision 1.1  1993/02/24  11:49:11  daveb
Initial revision

d57 1
d70 1
@


1.12
log
@Move OS specific stuff into a system link directory
@
text
@d6 3
d46 2
a47 1
require "../system/__filename";
d62 2
a63 1
    structure FileName = FileName_
@


1.11
log
@Added UnixFileName argument to functor
@
text
@d6 3
d43 1
a43 1
require "../utils/__unixfilename";
d46 2
a47 2
require "../basics/__unixgetenv";
require "../make/__unix";
d58 1
a58 1
    structure FileName = UnixFileName_
d65 2
a66 2
    structure Getenv = UnixGetenv_
    structure Unix = Unix_
@


1.10
log
@Added Unix and Getenv arguments.
@
text
@d6 3
d40 1
d55 1
@


1.9
log
@Added Module and ModuleId parameters.
@
text
@d6 3
d39 2
d57 2
@


1.8
log
@Removed some structures.
@
text
@d6 3
d34 2
d46 2
@


1.8.1.1
log
@Fork for bug fixing
@
text
@a5 3
Revision 1.8  1993/05/12  11:44:34  matthew
Removed some structures.

@


1.7
log
@Removed Io, added ShellUtils
@
text
@d6 3
a30 1
require "../lexer/__lexer";
d32 1
a33 2
require "__interprint";
require "__incremental";
d35 1
a40 1
    structure Lexer = Lexer_
d42 1
a44 2
    structure Incremental = Incremental_
    structure InterPrint = InterPrint_
@


1.6
log
@Added UserOptions structure
@
text
@d6 3
d30 1
a30 1
require "../main/__io";
d41 1
a41 1
    structure Io = Io_
@


1.5
log
@Added a new parameter to the functor, io
@
text
@d6 3
d26 1
d37 1
@


1.4
log
@Added Incremental structure
@
text
@d6 3
d23 1
d33 1
@


1.3
log
@Replaced Incremental with ShellTypes.
@
text
@d6 3
d21 1
d30 1
@


1.2
log
@Removed some structures.
@
text
@d6 3
d18 1
a18 1
require "__incremental";
d25 1
a25 1
    structure Incremental = Incremental_
@


1.1
log
@Initial revision
@
text
@d5 4
a8 1
 *  $Log$
d13 1
d15 1
d21 2
@
