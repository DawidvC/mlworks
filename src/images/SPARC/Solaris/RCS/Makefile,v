head	1.7;
access;
symbols
	MLW_daveb_inline_1_4_99:1.7.1
	MLWorks_21c0_1999_03_25:1.7
	MLWorks_20c1_1998_08_20:1.7
	MLWorks_20c0_1998_08_04:1.7
	MLWorks_20b2c2_1998_06_19:1.7
	MLWorks_20b2_Windows_1998_06_12:1.7
	MLWorks_20b1c1_1998_05_07:1.7
	MLWorks_20b0_1998_04_07:1.7
	MLWorks_20b0_1998_03_20:1.7
	MLWorks_20m2_1998_02_16:1.7
	MLWorks_20m1_1997_10_23:1.6
	MLWorks_11r1:1.6.8.1.1.1.1
	MLWorks_workspace_97:1.6.10
	MLWorks_dt_wizard:1.6.9
	MLWorks_11c0_1997_09_09:1.6.8.1.1.1
	MLWorks_10r3:1.6.8.1.3
	MLWorks_10r2_551:1.6.8.1.2
	MLWorks_11:1.6.8.1.1
	MLWorks_1_0_r2c2_1997_07_28:1.6.8.1
	MLWorks_20m0_1997_06_20:1.6
	MLWorks_1_0_r2c2_1997_06_14:1.6.8.1
	MLWorks_1_0_r2c1_released_1997_05_23:1.6.8.1
	MLWorks_1_0_r2c1_1997_05_12:1.6.8
	MLWorks_BugFix_1997_04_24:1.6
	MLWorks_1_0_r2_Win32_1997_04_11:1.6
	MLWorks_1_0_r2_Unix_1997_04_04:1.6
	MLWorks_1_0_1_ULTRASPARC_1997_02_24:1.6.6.1.1
	MLWorks_gui_1996_12_18:1.6.7
	MLWorks_1_0_Win32_1996_12_17:1.6.6
	MLWorks_1_0_Irix_1996_11_28_released_1996_12_17:1.6.4.1.1.1
	MLWorks_1_0_Unix_1996_11_14_released_1996_12_17:1.6.4.1
	MLWorks_1_0_Irix_1996_11_28:1.6.4.1.1
	MLWorks_1_0_Win32_1996_11_22:1.6.5
	MLWorks_1_0_Unix_1996_11_14:1.6.4
	MLWorks_Open_Beta2_1996_10_11:1.6.3
	MLWorks_License_dev:1.6.2
	MLWorks_1_open_beta_1996_09_13:1.6.1
	MLWorks_Open_Beta_1996_08_22:1.6
	MLWorks_Beta_1996_07_02:1.6
	MLWorks_Beta_1996_06_07:1.6
	MLWorks_Beta_1996_06_06:1.6
	MLWorks_Beta_1996_06_05:1.6
	MLWorks_Beta_1996_06_03:1.6
	MLWorks_Beta_1996_05_31:1.6
	MLWorks_Beta_1996_05_30:1.6;
locks; strict;
comment	@# @;


1.7
date	98.02.06.14.16.38;	author johnh;	state Exp;
branches
	1.7.1.1;
next	1.6;

1.6
date	95.02.08.15.56.17;	author jont;	state Exp;
branches
	1.6.1.1
	1.6.2.1
	1.6.3.1
	1.6.4.1
	1.6.5.1
	1.6.6.1
	1.6.7.1
	1.6.8.1
	1.6.9.1
	1.6.10.1;
next	1.5;

1.5
date	95.02.08.15.00.47;	author matthew;	state Exp;
branches;
next	1.4;

1.4
date	95.02.02.17.16.07;	author jont;	state Exp;
branches;
next	1.3;

1.3
date	95.02.02.13.40.33;	author jont;	state Exp;
branches;
next	1.2;

1.2
date	95.02.01.17.27.32;	author jont;	state Exp;
branches;
next	1.1;

1.1
date	95.02.01.17.14.52;	author jont;	state Exp;
branches;
next	;

1.6.1.1
date	96.09.13.11.27.02;	author hope;	state Exp;
branches;
next	;

1.6.2.1
date	96.10.07.16.17.35;	author hope;	state Exp;
branches;
next	;

1.6.3.1
date	96.10.17.11.37.27;	author hope;	state Exp;
branches;
next	;

1.6.4.1
date	96.11.14.13.05.20;	author hope;	state Exp;
branches
	1.6.4.1.1.1;
next	;

1.6.4.1.1.1
date	96.11.28.15.14.56;	author hope;	state Exp;
branches;
next	;

1.6.5.1
date	96.11.22.18.22.48;	author hope;	state Exp;
branches;
next	;

1.6.6.1
date	96.12.17.18.00.52;	author hope;	state Exp;
branches
	1.6.6.1.1.1;
next	;

1.6.6.1.1.1
date	97.02.24.11.52.32;	author hope;	state Exp;
branches;
next	;

1.6.7.1
date	96.12.18.09.56.14;	author hope;	state Exp;
branches;
next	;

1.6.8.1
date	97.05.12.10.50.55;	author hope;	state Exp;
branches
	1.6.8.1.1.1
	1.6.8.1.2.1
	1.6.8.1.3.1;
next	;

1.6.8.1.1.1
date	97.07.28.18.33.09;	author daveb;	state Exp;
branches
	1.6.8.1.1.1.1.1;
next	;

1.6.8.1.1.1.1.1
date	97.10.07.11.59.08;	author jkbrook;	state Exp;
branches;
next	;

1.6.8.1.2.1
date	97.09.08.17.26.15;	author daveb;	state Exp;
branches;
next	;

1.6.8.1.3.1
date	97.09.09.14.23.03;	author daveb;	state Exp;
branches;
next	;

1.6.9.1
date	97.09.10.19.42.02;	author brucem;	state Exp;
branches;
next	;

1.6.10.1
date	97.09.11.21.09.33;	author daveb;	state Exp;
branches;
next	1.6.10.2;

1.6.10.2
date	97.11.27.14.57.39;	author daveb;	state Exp;
branches;
next	;

1.7.1.1
date	99.04.01.18.08.19;	author daveb;	state Exp;
branches;
next	;


desc
@new unit
New architecture and OS specific Makefile
@


1.7
log
@[Bug #30071]
Merge in Project Workspace changes.
@
text
@# ==== BUILD MLWORKS IMAGES ====
#
# Instructions
# ------------
# This makefile builds images in the usual way, but has extra targets
# called *-files for producing files containing lists of .mo's for use
# with the runtime system `-from' option.  This makes debugging using
# adb possible since adb will not accept the massive command lines
# generated for the normal rules.
#
# To build images from a source tree other than `..' use:
#
#   make SRC='source directory name' target...
#
# To build the file list for the parser relative to /usr/sml, for
# example, use:
#
#   make SRC=/usr/sml parser-files
#
# $Id: SPARC:Solaris:Makefile,v 1.6 1995/02/08 15:56:17 jont Exp $
#
#
#

ARCH_OS = SPARC/Solaris

include ../SunOS/Makefile
@


1.7.1.1
log
@branched from trunk for label MLW_daveb_inline_1_4_99
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.7 1998/02/06 14:16:38 johnh Exp $
@


1.6
log
@Make dependent on SunOS version
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.5 1995/02/08 15:00:47 matthew Exp $
d24 2
@


1.6.10.1
log
@branched from trunk for label MLWorks_workspace_97
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6 1995/02/08 15:56:17 jont Exp $
@


1.6.10.2
log
@[Bug #30071]
Move definition of ARCH_OS to the sub-makefiles.
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6.10.1 1997/09/11 21:09:33 daveb Exp $
a23 2

ARCH_OS = SPARC/Solaris
@


1.6.9.1
log
@branched from trunk for label MLWorks_dt_wizard
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6 1995/02/08 15:56:17 jont Exp $
@


1.6.8.1
log
@branched from 1.6
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6 1995/02/08 15:56:17 jont Exp $
@


1.6.8.1.3.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r3
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6.8.1 1997/05/12 10:50:55 hope Exp $
@


1.6.8.1.2.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r2_551
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6.8.1 1997/05/12 10:50:55 hope Exp $
@


1.6.8.1.1.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6.8.1 1997/05/12 10:50:55 hope Exp $
@


1.6.8.1.1.1.1.1
log
@branched from MLWorks_11 for label MLWorks_11r1
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6.8.1.1.1 1997/07/28 18:33:09 daveb Exp $
@


1.6.7.1
log
@branched from 1.6
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6 1995/02/08 15:56:17 jont Exp $
@


1.6.6.1
log
@branched from 1.6
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6 1995/02/08 15:56:17 jont Exp $
@


1.6.6.1.1.1
log
@branched from 1.6.6.1
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6.6.1 1996/12/17 18:00:52 hope Exp $
@


1.6.5.1
log
@branched from 1.6
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6 1995/02/08 15:56:17 jont Exp $
@


1.6.4.1
log
@branched from 1.6
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6 1995/02/08 15:56:17 jont Exp $
@


1.6.4.1.1.1
log
@branched from 1.6.4.1
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6.4.1 1996/11/14 13:05:20 hope Exp $
@


1.6.3.1
log
@branched from 1.6
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6 1995/02/08 15:56:17 jont Exp $
@


1.6.2.1
log
@branched from 1.6
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6 1995/02/08 15:56:17 jont Exp $
@


1.6.1.1
log
@branched from 1.6
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.6 1995/02/08 15:56:17 jont Exp $
@


1.5
log
@Removing typechecker files
,
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.4 1995/02/02 17:16:07 jont Exp $
d25 1
a25 727
SRC =		../../..
RUNTIME =	$(SRC)/rts/runtime-g
RUNTIMEOPTS =	-verbose -d 1 -delivery
COMPRESS =	compress -v
UNCOMPRESS =	uncompress
RM =		/bin/rm -f
CP =		/bin/cp
MKDIR =		/bin/mkdir
TMPDIR =	/tmp
DISTRIB =	/usr/sml/distribution/images
DISTRIBUTED =	pervasive.img batch.img motif.img
ADB =		adb
PERVASIVEDIR =	$(SRC)/pervasive
PERVASIVE =	__builtin_library bytearray bits array \
		string vector mlworks __pervasive_library 
PERVASIVEMO =	$(PERVASIVE:%=$(PERVASIVEDIR)/%.mo)
LEXER =		utils/print \
		utils/_print \
		utils/__print \
		utils/integer \
		utils/_integer \
		utils/__integer \
		utils/lists \
		utils/_lists \
		utils/__lists \
		utils/newmap \
		utils/mononewmap \
		utils/intnewmap \
		basics/location \
		basics/_location \
		basics/__location \
		main/info \
		main/_info \
		main/__info \
		utils/crash \
		utils/_crash \
		utils/__crash \
		utils/_b23tree \
		utils/__btree \
		utils/_intb23tree \
		utils/__intbtree \
		basics/symbol \
		basics/_symbol \
		basics/__symbol \
		basics/token \
		basics/_token \
		basics/__token \
		lexer/ndfa \
		lexer/_ndfa \
		lexer/__ndfa \
		lexer/regexp \
		lexer/_regexp \
		lexer/__regexp \
		lexer/inbuffer \
		lexer/_inbuffer \
		lexer/__inbuffer \
		main/options \
		main/_options \
		main/__options \
		lexer/lexrules \
		lexer/_lexrules \
		lexer/__lexrules \
		utils/timer \
		utils/__timer \
		lexer/lexer \
		lexer/_lexgen \
		lexer/__lexer

PARSER =	utils/map \
		basics/ident \
		basics/identprint \
		utils/set \
		utils/_set \
		utils/__set \
		utils/option \
		utils/__option \
		utils/getenv \
		unix/_unixgetenv \
		unix/__getenv \
 		utils/path \
 		unix/_unixpath \
 		unix/__path \
		basics/module_id \
		basics/_module_id \
		basics/__module_id \
		basics/absyn \
		parser/parserenv \
		parser/derived \
		parser/parser \
 		parser/LRbasics \
 		parser/actionfunctions \
 		parser/LRparser \
		parser/_parser \
		utils/_map \
		utils/__map \
		basics/_ident \
		basics/__ident \
		basics/_identprint \
		basics/__identprint \
		utils/counter \
		utils/_counter \
		typechecker/simpletypes \
		typechecker/_simpletypes \
		typechecker/__simpletypes \
		typechecker/datatypes \
		typechecker/_datatypes \
		typechecker/__datatypes \
 		debugger/runtime_env \
 		debugger/_runtime_env \
 		debugger/__runtime_env \
		basics/_absyn \
		basics/__absyn \
		parser/_parserenv \
		parser/__parserenv \
		parser/_derived \
		parser/__derived \
 		parser/_LRbasics \
 		parser/_LRparser \
 		parser/_actionfunctions \
 		parser/__LRbasics \
 		parser/__actionfunctions \
 		parser/__LRparser \
		parser/__parser

TYPER =		utils/hashset \
		utils/_hashset \
		lambda/pretty \
		lambda/_pretty \
		lambda/__pretty \
		utils/sexpr \
		utils/_sexpr \
		utils/__sexpr \
		typechecker/types \
		typechecker/_types \
		typechecker/__types \
		basics/absynprint \
		basics/_absynprint \
		basics/__absynprint \
		lambda/topdecprint \
		lambda/_topdecprint \
		lambda/__topdecprint \
		typechecker/namehash \
		typechecker/_namehash \
		typechecker/__namehash \
		typechecker/strnames \
		typechecker/_strnames \
		typechecker/__strnames \
		typechecker/namesettypes \
		typechecker/_namesettypes \
		typechecker/__namesettypes \
		typechecker/basistypes \
		typechecker/_basistypes \
		typechecker/__basistypes \
		typechecker/unify \
		typechecker/_unify \
		typechecker/__unify \
		utils/newhashtable \
		utils/_newhashtable \
		utils/__newhashtable \
		typechecker/completion \
		typechecker/_completion \
		typechecker/__completion \
		typechecker/scheme \
		typechecker/_scheme \
		typechecker/__scheme \
		typechecker/valenv \
		typechecker/_valenv \
		typechecker/__valenv \
		typechecker/tyenv \
		typechecker/_tyenv \
		typechecker/__tyenv \
		typechecker/strenv \
		typechecker/_strenv \
		typechecker/__strenv \
		typechecker/environment \
		typechecker/_environment \
		typechecker/__environment \
		typechecker/nameset \
		typechecker/_nameset \
		typechecker/__nameset \
		typechecker/sigma \
		typechecker/_sigma \
		typechecker/__sigma \
		typechecker/basis \
		typechecker/_basis \
		typechecker/__basis \
		typechecker/type_exp \
		typechecker/_type_exp \
		typechecker/__type_exp \
		typechecker/assemblies \
		typechecker/_assemblies \
		typechecker/__assemblies \
		typechecker/control_unify \
		typechecker/_control_unify \
		typechecker/__control_unify \
		typechecker/context_print \
		typechecker/_context_print \
		typechecker/__context_print \
		typechecker/patterns \
		typechecker/_patterns \
		typechecker/__patterns \
		typechecker/core_rules \
		typechecker/_core_rules \
		typechecker/__core_rules \
		typechecker/sharetypes \
		typechecker/_sharetypes \
		typechecker/__sharetypes \
		typechecker/share \
		typechecker/_share \
		typechecker/__share \
		typechecker/realise \
		typechecker/_realise \
		typechecker/__realise \
		typechecker/type_debugger \
		typechecker/_type_debugger \
		typechecker/__type_debugger \
		typechecker/mod_rules \
		typechecker/_mod_rules \
		typechecker/__mod_rules

COMPILER =	make/os \
		unix/_unix \
		unix/__os \
		utils/text \
		utils/_text \
		utils/__text \
		utils/diagnostic \
		utils/_diagnostic \
		main/pervasives \
		main/_pervasives \
		main/__pervasives \
		lambda/lambdatypes \
		lambda/_lambdatypes \
		lambda/__lambdatypes \
		lambda/environtypes \
		lambda/_environtypes \
		lambda/__environtypes \
		lambda/environ \
		lambda/_environ \
		lambda/__environ \
		debugger/debugger_types \
		debugger/_debugger_types \
		debugger/__debugger_types \
		lambda/lambdaprint \
		lambda/_lambdaprint \
		lambda/__lambdaprint \
		lambda/environprint \
		lambda/_environprint \
		lambda/__environprint \
		match/type_utils \
		match/_type_utils \
		match/__type_utils \
		match/match \
		match/_match \
		match/__match \
		main/primitives \
		main/_primitives \
		main/__primitives \
		utils/delayed_newhashtable \
		utils/_delayed_newhashtable \
		lambda/lambda \
		lambda/lambdautils \
		lambda/lambdasub \
		lambda/lambdaoptimiser \
		typechecker/typerep_utils \
		typechecker/_typerep_utils \
		typechecker/__typerep_utils \
		lambda/_lambda \
		lambda/_lambdautils \
		lambda/__lambdautils \
		utils/__delayed_newhashtable \
		lambda/_lambdasub \
		lambda/__lambdasub \
		sparc/machtypes \
		sparc/_machtypes \
		sparc/__machtypes \
		main/machspec \
		sparc/_machspec \
		sparc/__machspec \
		utils/bignum \
		utils/_bignum \
		utils/__bignum \
		lambda/simplelambdatypes \
		lambda/_simplelambdatypes \
		lambda/__simplelambdatypes \
		lambda/simpleutils \
		lambda/_simpleutils \
		lambda/__simpleutils \
		lambda/transsimple \
		lambda/_transsimple \
		lambda/__transsimple \
		utils/inthashtable \
		utils/_inthashtable \
		utils/__inthashtable \
		lambda/_simplelambda \
		lambda/__simplelambda \
		lambda/optimise_lib \
		lambda/_optimise_lib \
		lambda/__optimise_lib \
		lambda/optimise_contract \
		lambda/_optimise_contract \
		lambda/__optimise_contract \
		lambda/optimise_beta \
		lambda/_optimise_beta \
		lambda/__optimise_beta \
		lambda/optimise_builtin \
		lambda/_optimise_builtin \
		lambda/__optimise_builtin \
		lambda/optimise_cse \
		lambda/_optimise_cse \
		lambda/__optimise_cse \
		lambda/optimise_lift \
		lambda/_optimise_lift \
		lambda/__optimise_lift \
		lambda/_lambdaoptimiser \
		lambda/__lambdaoptimiser \
		lambda/__lambda \
		utils/monoset \
		utils/intset \
		utils/_intsetlist \
		utils/mutablemonoset \
		harp/virtualregister \
		utils/mutableintset \
		harp/_virtualregister \
		harp/mirtypes \
		harp/_mirtypes \
		utils/_smallintset \
		harp/__mirtypes \
		main/machperv \
		sparc/_machperv \
		sparc/__machperv \
 		rts/gen/tags \
 		rts/gen/__tags \
 		debugger/debugger_utilities \
 		debugger/_debugger_utilities \
 		debugger/__debugger_utilities \
		lambda/auglambda \
		lambda/_auglambda \
		lambda/__auglambda \
		utils/filesys \
		unix/_unixfilesys \
		unix/__filesys \
		main/io \
		main/_io \
		main/__io \
		basics/module \
		basics/_module \
		basics/__module \
		main/library \
		main/_library \
		main/__library \
		lambda/interproc \
		lambda/_interproc \
		lambda/__interproc \
		lambda/tail \
		lambda/_tail \
		lambda/__tail \
		rts/gen/__implicit \
		harp/mirregisters \
		harp/_mirregisters \
		harp/__mirregisters \
		harp/mirprint \
		harp/_mirprint \
		harp/__mirprint \
		harp/mir_env \
		harp/_mir_env \
		harp/__mir_env \
		harp/mir_utils \
		harp/_mir_utils \
		harp/__mir_utils \
		rts/gen/implicit \
		harp/mirtables \
		harp/_mirtables \
		harp/__mirtables \
		harp/mir_cg \
		harp/_mir_cg \
		harp/__mir_cg \
		harp/mirprocedure \
		harp/registerpack \
		harp/_mirprocedure \
		harp/_registerpack \
		harp/__registerpack \
		harp/__mirprocedure \
		harp/registerallocator \
		harp/mirvariable \
		harp/_mirvariable \
		harp/registercolourer \
		harp/_registercolourer \
		harp/_registerallocator \
		utils/__smallintset \
		harp/__gccolourer \
		harp/__nongccolourer \
		harp/__fpcolourer \
		harp/__registerallocator \
		harp/__mirvariable \
		harp/stackallocator \
		harp/_stackallocator \
		harp/__stackallocator \
		harp/mirexpr \
		harp/_mirexpr \
		harp/__mirexpr \
		harp/miroptimiser \
		harp/_miroptimiser \
		harp/__miroptimiser \
		main/reals \
		main/_reals \
		main/__reals \
		main/code_module \
		main/__code_module \
		sparc/sparc_opcodes \
		sparc/_sparc_opcodes \
		sparc/__sparc_opcodes \
		sparc/sparc_assembly \
		sparc/_sparc_assembly \
		sparc/__sparc_assembly \
		sparc/sparc_schedule \
		sparc/_sparc_schedule \
		sparc/__sparc_schedule \
		main/mach_cg \
		sparc/_mach_cg \
		sparc/__sparc_mach_cg \
		sparc/__mach_cg \
		main/machprint \
		sparc/_machprint \
		sparc/__sparc_machprint \
		sparc/__machprint \
		rts/gen/__objectfile \
		rts/gen/objectfile \
		lambda/lambdamodule \
		lambda/_lambdamodule \
		lambda/__lambdamodule \
		main/enc_sub \
		main/_enc_sub \
		main/__enc_sub \
		main/encapsulate \
		main/_encapsulate \
		main/__encapsulate \
		lambda/lambdaio \
		lambda/_lambdaio \
		lambda/__lambdaio \
		main/toplevel \
		main/_toplevel \
		main/__toplevel \
		main/preferences \
		main/_preferences \
		main/__preferences

BATCH =		make/recompile \
		make/_recompile \
		make/__recompile \
		main/version \
		main/__version \
		main/user_options \
		main/_user_options \
		main/__user_options \
		main/batch \
		main/_batch \
		main/__batch

SHELLSRC =	debugger/get_type_information \
		debugger/_get_type_information \
		debugger/__get_type_information \
		interpreter/inter_envtypes \
		interpreter/_inter_envtypes \
		interpreter/__inter_envtypes \
		debugger/value_printer_utilities \
		debugger/_value_printer_utilities \
		debugger/__value_printer_utilities \
		debugger/value_printer \
		debugger/_value_printer \
		debugger/__value_printer \
		main/compiler \
		main/_compiler \
		main/__compiler \
		interpreter/interload \
		interpreter/_interload \
		interpreter/__interload \
		interpreter/intermake \
		interpreter/_intermake \
		interpreter/__intermake \
		interpreter/incremental \
		interpreter/_incremental \
		interpreter/__incremental

INTERSRC =	editor/editor \
		editor/_editor \
		editor/__editor \
		main/version \
		main/__version \
		main/user_options \
		main/_user_options \
		main/__user_options \
		debugger/newtrace \
		debugger/_newtrace \
		debugger/__newtrace \
		interpreter/shell_types \
		interpreter/_shell_types \
		interpreter/__shell_types \
		interpreter/interprint \
		interpreter/_interprint \
		interpreter/__interprint \
		interpreter/shell_utils \
		interpreter/_shell_utils \
		interpreter/__shell_utils \
	        debugger/debugger_print \
		debugger/_debugger_print \
	        debugger/__debugger_print \
		debugger/ml_debugger \
		debugger/_ml_debugger \
		debugger/__ml_debugger \
		make/recompile \
		make/_recompile \
		make/__recompile \
		interpreter/action_queue \
		interpreter/_action_queue \
		interpreter/__action_queue \
		interpreter/inspector_values \
		interpreter/_inspector_values \
		interpreter/__inspector_values \
		interpreter/inspector \
		interpreter/_inspector \
		interpreter/__inspector \
		interpreter/shell_structure \
		interpreter/_shell_structure \
		interpreter/__shell_structure \
		interpreter/shell \
		interpreter/_shell \
		interpreter/__shell \
		interpreter/tty_listener \
		interpreter/_tty_listener \
		interpreter/__tty_listener

TTYSRC =	interpreter/interpreter

MOTIFSRC =	library/xm \
		library/_xm \
		library/__xm \
		motif/menus \
		motif/_menus \
		motif/__menus \
		motif/tooldata \
		motif/_tooldata \
		motif/__tooldata \
		motif/motif_utils \
		motif/_motif_utils \
		motif/__motif_utils \
		motif/input \
		motif/_input \
		motif/__input \
		motif/output \
		motif/_output \
		motif/__output \
		motif/inspector_tool \
		motif/_inspector_tool \
		motif/__inspector_tool \
		motif/debugger_window \
		motif/_debugger_window \
		motif/__debugger_window \
		motif/error_browser \
		motif/_error_browser \
		motif/__error_browser \
		motif/fileselect \
		motif/_fileselect \
		motif/__fileselect \
		motif/file_dialog \
		motif/_file_dialog \
		motif/__file_dialog \
		motif/evaluator \
		motif/_evaluator \
		motif/__evaluator \
		motif/browser_tool \
		motif/_browser_tool \
		motif/__browser_tool \
		motif/listener \
		motif/podium \
	 	motif/_listener \
		motif/_podium \
	 	motif/__listener \
		motif/__podium \
		interpreter/xinterpreter

TAGS =		ml_utils/mltags

ETAGS =		ml_utils/mletags

SCRIPT =	utils/option \
		utils/__option \
		main/io \
		main/_io \
		main/__io \
		ml_utils/script

ARSRC =		utils/lists \
		utils/_lists \
		utils/__lists \
		ml_utils/ml_ar

LEXERMO =	$(LEXER:%=$(SRC)/%.mo)
PARSERMO =	$(PARSER:%=$(SRC)/%.mo)
TYPERMO =	$(TYPER:%=$(SRC)/%.mo)
COMPILERMO =	$(COMPILER:%=$(SRC)/%.mo)
BATCHMO =	$(BATCH:%=$(SRC)/%.mo)
SHELLMO =	$(SHELLSRC:%=$(SRC)/%.mo)
INTERMO =	$(INTERSRC:%=$(SRC)/%.mo)
TTYMO =		$(TTYSRC:%=$(SRC)/%.mo)
MOTIFMO =	$(MOTIFSRC:%=$(SRC)/%.mo)
TAGSMO =	$(TAGS:%=$(SRC)/%.mo)
ETAGSMO =	$(ETAGS:%=$(SRC)/%.mo)
SCRIPTMO =	$(SCRIPT:%=$(SRC)/%.mo)
ARMO =		$(ARSRC:%=$(SRC)/%.mo)

.PRECIOUS: pervasive.img lexer.img typechecker.img shell.img motif.img batch.img
.SILENT:

all: pervasive.img lexer.img motif.img batch.img

profile:
	make RUNTIMEOPTS="-verbose -c 2 -profile -profile-frequency 100"

clean:
	echo $(RM) *.img
	$(RM) *.img

backup:
	echo 'make: moving *.img to *.img~'
	for image in *.img; do mv $$image $$image~; done

lexer-files: force
	echo $(LEXERMO) > $@@

pervasive-files: force
	echo $(PERVASIVEMO) > $@@

batch-files: force
	echo $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(BATCHMO) > $@@

shell-files: force
	echo $(COMPILERMO) $(SHELLMO) > $@@

tty-files: force
	echo $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(SHELLMO) $(INTERMO) $(TTYMO) > tty-files

motif-files: force
	echo $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(SHELLMO) $(INTERMO) $(MOTIFMO) > motif-files

motif2-files: force
	echo $(INTERMO) $(MOTIFMO) > motif2-files

tty2-files: force
	echo $(INTERMO) $(TTYMO) > tty2-files

tags-files: force
	echo $(TAGSMO) > tags-files

etags-files: force
	echo $(ETAGSMO) > etags-files

script-files: force
	echo $(SCRIPTMO) > script-files

ar-files: force
	echo $(ARMO) > ar-files

pervasive.img: $(PERVASIVEMO)
	echo make: $@@
	$(RUNTIME) $(RUNTIMEOPTS) -save $@@ $(PERVASIVEMO)

lexer.img: pervasive.img $(LEXERMO)
	echo make: $@@
	$(RUNTIME) $(RUNTIMEOPTS) -load pervasive.img -save $@@ $(LEXERMO)

parser.img: lexer.img $(PARSERMO)
	echo make: $@@
	$(RUNTIME) $(RUNTIMEOPTS) -load lexer.img -save $@@ $(PARSERMO)

typechecker.img: lexer.img $(PARSERMO) $(TYPERMO)
	echo make: $@@
	$(RUNTIME) $(RUNTIMEOPTS) -pass args -parser_tables $(SRC)/parser/ml-tables/ args -save $@@ -load lexer.img $(PARSERMO) $(TYPERMO)

batch.img: typechecker.img $(COMPILERMO) $(BATCHMO)
	echo make: $@@
	$(RUNTIME) $(RUNTIMEOPTS) -pass wombats -verbose -save $@@ wombats -load typechecker.img $(COMPILERMO) $(BATCHMO)

shell.img: typechecker.img $(COMPILERMO) $(SHELLMO)
	echo make: $@@
	export MLWORKS_PERVASIVE;MLWORKS_PERVASIVE=`pwd`/$(SRC)/pervasive/;$(RUNTIME) $(RUNTIMEOPTS) -load typechecker.img -save $@@ $(COMPILERMO) $(SHELLMO)

tty.img: typechecker.img $(COMPILERMO) $(SHELLMO) $(INTERMO) $(TTYMO)
	echo make: $@@ from typechecker.img
	export MLWORKS_PERVASIVE;MLWORKS_PERVASIVE=`pwd`/$(SRC)/pervasive/;echo 'Shell.save_image "tty.img";' | $(RUNTIME) $(RUNTIMEOPTS) -load typechecker.img $(COMPILERMO) $(SHELLMO) $(INTERMO) $(TTYMO)

motif.img: typechecker.img $(COMPILERMO) $(SHELLMO) $(INTERMO) $(MOTIFMO) 
	echo make: $@@ from typechecker.img
	export MLWORKS_PERVASIVE;MLWORKS_PERVASIVE=`pwd`/$(SRC)/pervasive/;echo 'Shell.save_image "motif.img";' | $(RUNTIME) $(RUNTIMEOPTS) -load typechecker.img $(COMPILERMO) $(SHELLMO) $(INTERMO) $(MOTIFMO)

tty2.img: shell.img $(INTERMO) $(TTYMO)
	echo make: $@@ from shell.img
	echo 'Shell.save_image "tty.img";' | $(RUNTIME) $(RUNTIMEOPTS) -load shell.img $(INTERMO) $(TTYMO)

motif2.img: shell.img $(INTERMO) $(MOTIFMO) 
	echo make: $@@ from shell.img
	echo 'Shell.save_image "motif.img";' | $(RUNTIME) $(RUNTIMEOPTS) -load shell.img $(INTERMO) $(MOTIFMO)

mltags.img: lexer.img $(TAGSMO)
	echo make: $@@ from lexer.img
	$(RUNTIME) $(RUNTIMEOPTS) -pass wombats -save $@@ wombats -load lexer.img $(TAGSMO)

mletags.img: lexer.img $(ETAGSMO)
	echo make: $@@ from lexer.img
	$(RUNTIME) $(RUNTIMEOPTS) -pass wombats -save $@@ wombats -load lexer.img $(ETAGSMO)

script.img: lexer.img $(SCRIPTMO)
	echo make: $@@ from lexer.img
	$(RUNTIME) $(RUNTIMEOPTS) -pass wombats -save $@@ wombats -load lexer.img $(SCRIPTMO)

ml_ar.img: pervasive.img $(ARMO)
	echo make: $@@ from pervasive.img
	$(RUNTIME) $(RUNTIMEOPTS) -pass wombats -save $@@ wombats -load pervasive.img $(ARMO)

distribution:
	$(RM) -r $(DISTDIR)/images
	$(MKDIR) $(DISTDIR)/images
	$(COMPRESS) $(DISTRIBUTED)
	$(CP) $(DISTRIBUTED:%=%.Z) $(DISTDIR)/images
	$(UNCOMPRESS) $(DISTRIBUTED)

force:
@


1.4
log
@Sort out ml utils
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.3 1995/02/02 13:40:33 jont Exp $
a125 2
		utils/_debug \
		utils/__debug \
a156 2
		typechecker/ty_debug \
		typechecker/__ty_debug \
a177 3
		typechecker/tyvarenv \
		typechecker/_tyvarenv \
		typechecker/__tyvarenv \
a192 3
		typechecker/tystr \
		typechecker/_tystr \
		typechecker/__tystr \
a207 9
		typechecker/phi \
		typechecker/_phi \
		typechecker/__phi \
		typechecker/sigenv \
		typechecker/_sigenv \
		typechecker/__sigenv \
		typechecker/funenv \
		typechecker/_funenv \
		typechecker/__funenv \
@


1.3
log
@Change tty and motif images builds to be from typechecker.img
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.2 1995/02/01 17:27:32 jont Exp $
d625 4
d650 2
d695 6
d747 1
a747 1
mltags.img: lexer.img ../ml_utils/mltags.mo
d749 1
a749 1
	$(RUNTIME) $(RUNTIMEOPTS) -pass wombats -save $@@ wombats -load lexer.img ../ml_utils/mltags.mo
d751 1
a751 1
mletags.img: lexer.img ../ml_utils/mletags.mo
d753 1
a753 1
	$(RUNTIME) $(RUNTIMEOPTS) -pass wombats -save $@@ wombats -load lexer.img ../ml_utils/mltags.mo
@


1.2
log
@Get module names right for new structure
@
text
@d20 1
a20 1
# $Id: SPARC:Solaris:Makefile,v 1.1 1995/02/01 17:14:52 jont Exp $
d25 2
a26 1
RUNTIME =	../../../rts/runtime-g
a36 1
SRC =		../../..
d104 3
a106 3
		utils/filename \
		unix/_unixfilename \
		unix/__filename \
d134 3
a136 3
		debugger/debugger_env \
		debugger/_debugger_env \
		debugger/__debugger_env \
d375 5
a379 3
		debugger/debugger_type_utilities \
		debugger/_debugger_type_utilities \
		debugger/__debugger_type_utilities \
d383 3
a461 2
		rts/gen/tags \
		rts/gen/__tags \
d649 1
a649 1
.PRECIOUS: pervasive.img lexer.img shell.img motif.img batch.img
d709 1
a709 1
	$(RUNTIME) $(RUNTIMEOPTS) -save $@@ -load lexer.img $(PARSERMO) $(TYPERMO)
d717 1
a717 1
	export MLWORKS_PERVASIVE;MLWORKS_PERVASIVE=`pwd`/../../../pervasive/;$(RUNTIME) $(RUNTIMEOPTS) -load typechecker.img -save $@@ $(COMPILERMO) $(SHELLMO)
d719 7
a725 7
tty.img: lexer.img $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(SHELLMO) $(INTERMO) $(TTYMO)
	echo make: $@@ from lexer.img
	export MLWORKS_PERVASIVE;MLWORKS_PERVASIVE=`pwd`/../../../pervasive/;echo 'Shell.save_image "tty.img";' | $(RUNTIME) $(RUNTIMEOPTS) -load lexer.img $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(SHELLMO) $(INTERMO) $(TTYMO)

motif.img: lexer.img $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(SHELLMO) $(INTERMO) $(MOTIFMO) 
	echo make: $@@ from lexer.img
	export MLWORKS_PERVASIVE;MLWORKS_PERVASIVE=`pwd`/../../../pervasive/;echo 'Shell.save_image "motif.img";' | $(RUNTIME) $(RUNTIMEOPTS) -load lexer.img $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(SHELLMO) $(INTERMO) $(MOTIFMO)
@


1.1
log
@new unit
New architecture and OS specific Makefile
@
text
@d20 1
a20 1
# $Id: Makefile,v 1.142 1995/01/18 18:01:43 jont Exp $
d25 1
a25 1
RUNTIME =	../rts/runtime-g
d36 1
a36 1
SRC =		..
d714 1
a714 1
	export MLWORKS_PERVASIVE;MLWORKS_PERVASIVE=`pwd`/../pervasive/;$(RUNTIME) $(RUNTIMEOPTS) -load typechecker.img -save $@@ $(COMPILERMO) $(SHELLMO)
d718 1
a718 1
	export MLWORKS_PERVASIVE;MLWORKS_PERVASIVE=`pwd`/../pervasive/;echo 'Shell.save_image "tty.img";' | $(RUNTIME) $(RUNTIMEOPTS) -load lexer.img $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(SHELLMO) $(INTERMO) $(TTYMO)
d722 1
a722 1
	export MLWORKS_PERVASIVE;MLWORKS_PERVASIVE=`pwd`/../pervasive/;echo 'Shell.save_image "motif.img";' | $(RUNTIME) $(RUNTIMEOPTS) -load lexer.img $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(SHELLMO) $(INTERMO) $(MOTIFMO)
@
