head	1.196;
access;
symbols
	MLW_daveb_inline_1_4_99:1.193.1
	MLWorks_21c0_1999_03_25:1.193
	MLWorks_20c1_1998_08_20:1.183
	MLWorks_20c0_1998_08_04:1.182
	MLWorks_20b2c2_1998_06_19:1.181
	MLWorks_20b2_Windows_1998_06_12:1.181
	MLWorks_20b1c1_1998_05_07:1.180
	MLWorks_20b0_1998_04_07:1.176
	MLWorks_20b0_1998_03_20:1.173
	MLWorks_20m2_1998_02_16:1.169
	MLWorks_20m1_1997_10_23:1.162
	MLWorks_11r1:1.148.1.1.1.5.1
	MLWorks_workspace_97:1.159.2
	MLWorks_dt_wizard:1.159.1
	MLWorks_11c0_1997_09_09:1.148.1.1.1.5
	MLWorks_10r3:1.148.1.1.3
	MLWorks_10r2_551:1.148.1.1.2
	MLWorks_11:1.148.1.1.1
	MLWorks_1_0_r2c2_1997_07_28:1.148.1.1
	MLWorks_20m0_1997_06_20:1.156
	MLWorks_1_0_r2c2_1997_06_14:1.148.1.1
	MLWorks_1_0_r2c1_released_1997_05_23:1.148.1.1
	MLWorks_1_0_r2c1_1997_05_12:1.148.1
	MLWorks_BugFix_1997_04_24:1.149
	MLWorks_1_0_r2_Win32_1997_04_11:1.148
	MLWorks_1_0_r2_Unix_1997_04_04:1.148
	MLWorks_1_0_1_ULTRASPARC_1997_02_24:1.137.2.1.1
	MLWorks_gui_1996_12_18:1.137.3
	MLWorks_1_0_Win32_1996_12_17:1.137.2
	MLWorks_1_0_Irix_1996_11_28_released_1996_12_17:1.136.1.1.1.2
	MLWorks_1_0_Unix_1996_11_14_released_1996_12_17:1.136.1.2
	MLWorks_1_0_Irix_1996_11_28:1.136.1.1.1
	MLWorks_1_0_Win32_1996_11_22:1.137.1
	MLWorks_1_0_Unix_1996_11_14:1.136.1
	MLWorks_Open_Beta2_1996_10_11:1.129.1
	MLWorks_License_dev:1.127.1
	MLWorks_1_open_beta_1996_09_13:1.125.1
	MLWorks_Open_Beta_1996_08_22:1.125
	MLWorks_Beta_1996_07_02:1.118
	MLWorks_Beta_1996_06_07:1.113
	MLWorks_Beta_1996_06_06:1.113
	MLWorks_Beta_1996_06_05:1.113
	MLWorks_Beta_1996_06_03:1.109
	MLWorks_Beta_1996_05_31:1.109
	MLWorks_Beta_1996_05_30:1.109;
locks; strict;
comment	@# @;


1.196
date	99.06.01.11.45.43;	author johnh;	state Exp;
branches;
next	1.195;

1.195
date	99.05.13.14.57.20;	author daveb;	state Exp;
branches;
next	1.194;

1.194
date	99.04.13.10.52.51;	author johnh;	state Exp;
branches;
next	1.193;

1.193
date	99.03.18.12.18.22;	author johnh;	state Exp;
branches
	1.193.1.1;
next	1.192;

1.192
date	99.03.17.17.37.48;	author johnh;	state Exp;
branches;
next	1.191;

1.191
date	99.03.12.14.46.51;	author mitchell;	state Exp;
branches;
next	1.190;

1.190
date	99.03.11.17.44.08;	author johnh;	state Exp;
branches;
next	1.189;

1.189
date	99.03.08.11.02.05;	author mitchell;	state Exp;
branches;
next	1.188;

1.188
date	99.02.15.16.23.10;	author mitchell;	state Exp;
branches;
next	1.187;

1.187
date	99.02.09.09.50.00;	author mitchell;	state Exp;
branches;
next	1.186;

1.186
date	98.10.28.11.15.10;	author jont;	state Exp;
branches;
next	1.185;

1.185
date	98.10.19.10.46.27;	author jont;	state Exp;
branches;
next	1.184;

1.184
date	98.10.05.10.42.07;	author jont;	state Exp;
branches;
next	1.183;

1.183
date	98.08.13.16.56.57;	author jkbrook;	state Exp;
branches;
next	1.182;

1.182
date	98.07.07.10.18.11;	author jont;	state Exp;
branches;
next	1.181;

1.181
date	98.06.11.11.37.50;	author johnh;	state Exp;
branches;
next	1.180;

1.180
date	98.05.05.18.56.51;	author jkbrook;	state Exp;
branches;
next	1.179;

1.179
date	98.05.05.18.03.11;	author io;	state Exp;
branches;
next	1.178;

1.178
date	98.04.24.14.01.16;	author johnh;	state Exp;
branches;
next	1.177;

1.177
date	98.04.06.15.58.23;	author jont;	state Exp;
branches;
next	1.176;

1.176
date	98.04.06.10.27.54;	author jont;	state Exp;
branches;
next	1.175;

1.175
date	98.04.01.12.21.17;	author jont;	state Exp;
branches;
next	1.174;

1.174
date	98.03.31.12.00.14;	author jont;	state Exp;
branches;
next	1.173;

1.173
date	98.03.19.21.04.18;	author jkbrook;	state Exp;
branches;
next	1.172;

1.172
date	98.03.17.17.28.20;	author jkbrook;	state Exp;
branches;
next	1.171;

1.171
date	98.02.23.11.38.14;	author johnh;	state Exp;
branches;
next	1.170;

1.170
date	98.02.19.18.00.13;	author jont;	state Exp;
branches;
next	1.169;

1.169
date	98.02.16.16.19.49;	author jkbrook;	state Exp;
branches;
next	1.168;

1.168
date	98.02.09.14.30.48;	author johnh;	state Exp;
branches;
next	1.167;

1.167
date	98.01.30.16.37.34;	author johnh;	state Exp;
branches;
next	1.166;

1.166
date	97.11.26.17.41.11;	author daveb;	state Exp;
branches;
next	1.165;

1.165
date	97.11.26.10.27.26;	author daveb;	state Exp;
branches;
next	1.164;

1.164
date	97.11.24.12.15.49;	author daveb;	state Exp;
branches;
next	1.163;

1.163
date	97.11.09.09.23.36;	author jont;	state Exp;
branches;
next	1.162;

1.162
date	97.10.09.14.33.10;	author johnh;	state Exp;
branches;
next	1.161;

1.161
date	97.09.23.09.39.57;	author jont;	state Exp;
branches;
next	1.160;

1.160
date	97.09.19.09.03.01;	author brucem;	state Exp;
branches;
next	1.159;

1.159
date	97.08.08.15.11.04;	author brucem;	state Exp;
branches
	1.159.1.1
	1.159.2.1;
next	1.158;

1.158
date	97.07.21.08.58.28;	author daveb;	state Exp;
branches;
next	1.157;

1.157
date	97.07.02.13.42.23;	author stephenb;	state Exp;
branches;
next	1.156;

1.156
date	97.06.16.10.32.51;	author johnh;	state Exp;
branches;
next	1.155;

1.155
date	97.06.05.09.45.45;	author johnh;	state Exp;
branches;
next	1.154;

1.154
date	97.05.29.17.19.54;	author jkbrook;	state Exp;
branches;
next	1.153;

1.153
date	97.05.29.16.16.26;	author jkbrook;	state Exp;
branches;
next	1.152;

1.152
date	97.05.27.17.00.24;	author jont;	state Exp;
branches;
next	1.151;

1.151
date	97.05.27.13.36.35;	author jkbrook;	state Exp;
branches;
next	1.150;

1.150
date	97.05.19.09.35.03;	author stephenb;	state Exp;
branches;
next	1.149;

1.149
date	97.04.16.16.15.47;	author jont;	state Exp;
branches;
next	1.148;

1.148
date	97.03.31.12.40.02;	author johnh;	state Exp;
branches
	1.148.1.1;
next	1.147;

1.147
date	97.03.13.11.33.15;	author andreww;	state Exp;
branches;
next	1.146;

1.146
date	97.03.06.10.51.36;	author matthew;	state Exp;
branches;
next	1.145;

1.145
date	97.02.26.12.43.42;	author andreww;	state Exp;
branches;
next	1.144;

1.144
date	97.01.31.12.35.53;	author andreww;	state Exp;
branches;
next	1.143;

1.143
date	97.01.15.15.18.54;	author io;	state Exp;
branches;
next	1.142;

1.142
date	97.01.14.11.23.24;	author io;	state Exp;
branches;
next	1.141;

1.141
date	97.01.13.10.29.39;	author andreww;	state Exp;
branches;
next	1.140;

1.140
date	97.01.08.15.38.34;	author jont;	state Exp;
branches;
next	1.139;

1.139
date	97.01.06.10.53.07;	author matthew;	state Exp;
branches;
next	1.138;

1.138
date	97.01.02.11.18.34;	author jont;	state Exp;
branches;
next	1.137;

1.137
date	96.11.15.16.48.53;	author daveb;	state Exp;
branches
	1.137.1.1
	1.137.2.1
	1.137.3.1;
next	1.136;

1.136
date	96.11.07.12.27.49;	author daveb;	state Exp;
branches
	1.136.1.1;
next	1.135;

1.135
date	96.11.06.11.57.55;	author matthew;	state Exp;
branches;
next	1.134;

1.134
date	96.11.04.16.53.04;	author jont;	state Exp;
branches;
next	1.133;

1.133
date	96.11.02.15.21.05;	author daveb;	state Exp;
branches;
next	1.132;

1.132
date	96.10.31.11.53.50;	author daveb;	state Exp;
branches;
next	1.131;

1.131
date	96.10.29.21.09.52;	author daveb;	state Exp;
branches;
next	1.130;

1.130
date	96.10.21.15.41.55;	author jont;	state Exp;
branches;
next	1.129;

1.129
date	96.10.09.14.24.58;	author jont;	state Exp;
branches
	1.129.1.1;
next	1.128;

1.128
date	96.10.08.13.54.22;	author stephenb;	state Exp;
branches;
next	1.127;

1.127
date	96.09.27.10.00.25;	author stephenb;	state Exp;
branches
	1.127.1.1;
next	1.126;

1.126
date	96.09.16.15.57.01;	author andreww;	state Exp;
branches;
next	1.125;

1.125
date	96.08.11.14.53.10;	author daveb;	state Exp;
branches
	1.125.1.1;
next	1.124;

1.124
date	96.08.09.13.48.02;	author daveb;	state Exp;
branches;
next	1.123;

1.123
date	96.08.05.14.33.27;	author stephenb;	state Exp;
branches;
next	1.122;

1.122
date	96.07.19.09.44.53;	author jont;	state Exp;
branches;
next	1.121;

1.121
date	96.07.16.10.05.54;	author andreww;	state Exp;
branches;
next	1.120;

1.120
date	96.07.03.15.06.26;	author andreww;	state Exp;
branches;
next	1.119;

1.119
date	96.07.03.12.49.51;	author andreww;	state Exp;
branches;
next	1.118;

1.118
date	96.06.24.20.37.33;	author io;	state Exp;
branches;
next	1.117;

1.117
date	96.06.24.19.56.56;	author brianm;	state Exp;
branches;
next	1.116;

1.116
date	96.06.19.14.07.23;	author brianm;	state Exp;
branches;
next	1.115;

1.115
date	96.06.19.10.28.09;	author brianm;	state Exp;
branches;
next	1.114;

1.114
date	96.06.14.17.53.26;	author brianm;	state Exp;
branches;
next	1.113;

1.113
date	96.06.05.13.47.59;	author brianm;	state Exp;
branches;
next	1.112;

1.112
date	96.06.04.22.44.08;	author io;	state Exp;
branches;
next	1.111;

1.111
date	96.06.04.10.04.16;	author jont;	state Exp;
branches;
next	1.110;

1.110
date	96.06.04.09.55.02;	author jont;	state Exp;
branches;
next	1.109;

1.109
date	96.05.29.10.47.45;	author stephenb;	state Exp;
branches;
next	1.108;

1.108
date	96.05.28.10.57.09;	author jont;	state Exp;
branches;
next	1.107;

1.107
date	96.05.28.10.49.44;	author jont;	state Exp;
branches;
next	1.106;

1.106
date	96.05.24.15.53.49;	author brianm;	state Exp;
branches;
next	1.105;

1.105
date	96.05.24.10.09.10;	author daveb;	state Exp;
branches;
next	1.104;

1.104
date	96.05.22.11.36.28;	author io;	state Exp;
branches;
next	1.103;

1.103
date	96.05.22.09.22.36;	author matthew;	state Exp;
branches;
next	1.102;

1.102
date	96.05.21.12.33.28;	author stephenb;	state Exp;
branches;
next	1.101;

1.101
date	96.05.21.11.52.10;	author jont;	state Exp;
branches;
next	1.100;

1.100
date	96.05.21.09.42.46;	author jont;	state Exp;
branches;
next	1.99;

1.99
date	96.05.20.15.53.59;	author daveb;	state Exp;
branches;
next	1.98;

1.98
date	96.05.17.09.43.36;	author stephenb;	state Exp;
branches;
next	1.97;

1.97
date	96.05.17.07.34.50;	author stephenb;	state Exp;
branches;
next	1.96;

1.96
date	96.05.16.16.50.01;	author jont;	state Exp;
branches;
next	1.95;

1.95
date	96.05.16.16.19.28;	author jont;	state Exp;
branches;
next	1.94;

1.94
date	96.05.16.15.02.27;	author io;	state Exp;
branches;
next	1.93;

1.93
date	96.05.15.15.36.53;	author jont;	state Exp;
branches;
next	1.92;

1.92
date	96.05.15.12.41.05;	author jont;	state Exp;
branches;
next	1.91;

1.91
date	96.05.15.11.44.48;	author jont;	state Exp;
branches;
next	1.90;

1.90
date	96.05.14.08.58.43;	author stephenb;	state Exp;
branches;
next	1.89;

1.89
date	96.05.13.09.29.36;	author matthew;	state Exp;
branches;
next	1.88;

1.88
date	96.05.10.13.18.59;	author matthew;	state Exp;
branches;
next	1.87;

1.87
date	96.05.10.09.44.03;	author matthew;	state Exp;
branches;
next	1.86;

1.86
date	96.05.09.11.33.58;	author stephenb;	state Exp;
branches;
next	1.85;

1.85
date	96.05.08.13.14.38;	author stephenb;	state Exp;
branches;
next	1.84;

1.84
date	96.05.08.08.43.58;	author stephenb;	state Exp;
branches;
next	1.83;

1.83
date	96.05.08.08.13.04;	author stephenb;	state Exp;
branches;
next	1.82;

1.82
date	96.05.07.21.31.49;	author io;	state Exp;
branches;
next	1.81;

1.81
date	96.05.07.12.03.47;	author stephenb;	state Exp;
branches;
next	1.80;

1.80
date	96.05.02.20.52.21;	author io;	state Exp;
branches;
next	1.79;

1.79
date	96.05.02.19.16.51;	author io;	state Exp;
branches;
next	1.78;

1.78
date	96.05.02.17.22.35;	author jont;	state Exp;
branches;
next	1.77;

1.77
date	96.05.02.16.02.24;	author jont;	state Exp;
branches;
next	1.76;

1.76
date	96.05.02.12.49.04;	author matthew;	state Exp;
branches;
next	1.75;

1.75
date	96.05.02.12.00.38;	author matthew;	state Exp;
branches;
next	1.74;

1.74
date	96.04.30.13.40.53;	author matthew;	state Exp;
branches;
next	1.73;

1.73
date	96.04.25.10.43.09;	author jont;	state Exp;
branches;
next	1.72;

1.72
date	96.04.23.11.22.04;	author daveb;	state Exp;
branches;
next	1.71;

1.71
date	96.04.18.16.39.58;	author jont;	state Exp;
branches;
next	1.70;

1.70
date	96.04.17.15.50.15;	author stephenb;	state Exp;
branches;
next	1.69;

1.69
date	96.04.02.13.57.42;	author stephenb;	state Exp;
branches;
next	1.68;

1.68
date	96.04.02.12.59.46;	author stephenb;	state Exp;
branches;
next	1.67;

1.67
date	96.04.02.09.29.24;	author stephenb;	state Exp;
branches;
next	1.66;

1.66
date	96.03.27.16.44.55;	author stephenb;	state Exp;
branches;
next	1.65;

1.65
date	96.03.15.12.18.09;	author matthew;	state Exp;
branches;
next	1.64;

1.64
date	96.03.08.15.24.54;	author jont;	state Exp;
branches;
next	1.63;

1.63
date	96.03.01.15.06.23;	author jont;	state Exp;
branches;
next	1.62;

1.62
date	96.02.26.14.33.33;	author stephenb;	state Exp;
branches;
next	1.61;

1.61
date	96.02.26.12.49.36;	author jont;	state Exp;
branches;
next	1.60;

1.60
date	96.02.26.11.51.56;	author jont;	state Exp;
branches;
next	1.59;

1.59
date	96.02.26.09.43.44;	author jont;	state Exp;
branches;
next	1.58;

1.58
date	96.02.22.14.36.27;	author jont;	state Exp;
branches;
next	1.57;

1.57
date	96.02.08.15.39.03;	author daveb;	state Exp;
branches;
next	1.56;

1.56
date	96.01.23.11.01.23;	author matthew;	state Exp;
branches;
next	1.55;

1.55
date	96.01.19.15.46.43;	author stephenb;	state Exp;
branches;
next	1.54;

1.54
date	96.01.12.12.27.53;	author daveb;	state Exp;
branches;
next	1.53;

1.53
date	96.01.09.14.07.22;	author matthew;	state Exp;
branches;
next	1.52;

1.52
date	96.01.09.12.21.34;	author matthew;	state Exp;
branches;
next	1.51;

1.51
date	95.12.27.16.33.47;	author jont;	state Exp;
branches;
next	1.50;

1.50
date	95.12.12.17.27.39;	author daveb;	state Exp;
branches;
next	1.49;

1.49
date	95.12.05.13.43.45;	author jont;	state Exp;
branches;
next	1.48;

1.48
date	95.12.05.10.36.20;	author daveb;	state Exp;
branches;
next	1.47;

1.47
date	95.10.18.16.25.37;	author nickb;	state Exp;
branches;
next	1.46;

1.46
date	95.10.18.12.12.46;	author nickb;	state Exp;
branches;
next	1.45;

1.45
date	95.10.14.21.48.00;	author brianm;	state Exp;
branches;
next	1.44;

1.44
date	95.10.06.11.29.16;	author jont;	state Exp;
branches;
next	1.43;

1.43
date	95.10.04.13.18.48;	author daveb;	state Exp;
branches;
next	1.42;

1.42
date	95.10.02.11.50.42;	author brianm;	state Exp;
branches;
next	1.41;

1.41
date	95.09.19.11.49.17;	author daveb;	state Exp;
branches;
next	1.40;

1.40
date	95.09.15.11.26.10;	author daveb;	state Exp;
branches;
next	1.39;

1.39
date	95.09.14.11.06.10;	author daveb;	state Exp;
branches;
next	1.38;

1.38
date	95.09.12.14.39.19;	author daveb;	state Exp;
branches;
next	1.37;

1.37
date	95.08.14.09.20.08;	author matthew;	state Exp;
branches;
next	1.36;

1.36
date	95.08.03.12.23.11;	author matthew;	state Exp;
branches;
next	1.35;

1.35
date	95.07.27.12.13.55;	author matthew;	state Exp;
branches;
next	1.34;

1.34
date	95.07.26.15.04.39;	author matthew;	state Exp;
branches;
next	1.33;

1.33
date	95.07.20.14.25.35;	author matthew;	state Exp;
branches;
next	1.32;

1.32
date	95.07.20.11.39.32;	author jont;	state Exp;
branches;
next	1.31;

1.31
date	95.07.18.09.16.41;	author jont;	state Exp;
branches;
next	1.30;

1.30
date	95.07.17.11.45.13;	author matthew;	state Exp;
branches;
next	1.29;

1.29
date	95.07.17.09.42.17;	author matthew;	state Exp;
branches;
next	1.28;

1.28
date	95.07.04.15.32.22;	author matthew;	state Exp;
branches;
next	1.27;

1.27
date	95.07.04.14.07.58;	author daveb;	state Exp;
branches;
next	1.26;

1.26
date	95.07.03.16.31.00;	author jont;	state Exp;
branches;
next	1.25;

1.25
date	95.06.29.15.49.41;	author matthew;	state Exp;
branches;
next	1.24;

1.24
date	95.06.28.13.27.53;	author daveb;	state Exp;
branches;
next	1.23;

1.23
date	95.06.19.13.29.00;	author jont;	state Exp;
branches;
next	1.22;

1.22
date	95.06.08.09.35.59;	author jont;	state Exp;
branches;
next	1.21;

1.21
date	95.06.01.12.51.40;	author daveb;	state Exp;
branches;
next	1.20;

1.20
date	95.05.25.10.20.43;	author matthew;	state Exp;
branches;
next	1.19;

1.19
date	95.05.22.14.11.58;	author jont;	state Exp;
branches;
next	1.18;

1.18
date	95.05.10.15.16.18;	author daveb;	state Exp;
branches;
next	1.17;

1.17
date	95.05.08.17.38.08;	author brianm;	state Exp;
branches;
next	1.16;

1.16
date	95.05.04.14.00.17;	author jont;	state Exp;
branches;
next	1.15;

1.15
date	95.05.04.12.51.03;	author jont;	state Exp;
branches;
next	1.14;

1.14
date	95.05.03.15.54.15;	author jont;	state Exp;
branches;
next	1.13;

1.13
date	95.05.03.15.36.22;	author jont;	state Exp;
branches;
next	1.12;

1.12
date	95.04.28.17.36.14;	author daveb;	state Exp;
branches;
next	1.11;

1.11
date	95.04.21.08.27.19;	author daveb;	state Exp;
branches;
next	1.10;

1.10
date	95.04.06.13.29.32;	author matthew;	state Exp;
branches;
next	1.9;

1.9
date	95.03.30.14.22.18;	author daveb;	state Exp;
branches;
next	1.8;

1.8
date	95.03.08.12.19.43;	author matthew;	state Exp;
branches;
next	1.7;

1.7
date	95.03.06.12.50.13;	author daveb;	state Exp;
branches;
next	1.6;

1.6
date	95.03.02.14.53.15;	author matthew;	state Exp;
branches;
next	1.5;

1.5
date	95.03.01.11.45.02;	author jont;	state Exp;
branches;
next	1.4;

1.4
date	95.02.24.17.02.06;	author jont;	state Exp;
branches;
next	1.3;

1.3
date	95.02.24.16.04.26;	author jont;	state Exp;
branches;
next	1.2;

1.2
date	95.02.10.12.57.47;	author jont;	state Exp;
branches;
next	1.1;

1.1
date	95.02.08.16.25.31;	author jont;	state Exp;
branches;
next	;

1.125.1.1
date	96.09.13.11.27.04;	author hope;	state Exp;
branches;
next	;

1.127.1.1
date	96.10.07.16.17.37;	author hope;	state Exp;
branches;
next	;

1.129.1.1
date	96.10.17.11.37.29;	author hope;	state Exp;
branches;
next	;

1.136.1.1
date	96.11.14.13.05.22;	author hope;	state Exp;
branches
	1.136.1.1.1.1;
next	1.136.1.2;

1.136.1.2
date	96.12.05.18.10.48;	author daveb;	state Exp;
branches;
next	;

1.136.1.1.1.1
date	96.11.28.15.14.58;	author hope;	state Exp;
branches;
next	1.136.1.1.1.2;

1.136.1.1.1.2
date	96.12.05.18.06.21;	author daveb;	state Exp;
branches;
next	;

1.137.1.1
date	96.11.22.18.22.50;	author hope;	state Exp;
branches;
next	;

1.137.2.1
date	96.12.17.18.00.54;	author hope;	state Exp;
branches
	1.137.2.1.1.1;
next	;

1.137.2.1.1.1
date	97.02.24.11.52.35;	author hope;	state Exp;
branches;
next	;

1.137.3.1
date	96.12.18.09.56.16;	author hope;	state Exp;
branches;
next	;

1.148.1.1
date	97.05.12.10.50.57;	author hope;	state Exp;
branches
	1.148.1.1.1.1
	1.148.1.1.2.1
	1.148.1.1.3.1;
next	;

1.148.1.1.1.1
date	97.07.28.18.33.10;	author daveb;	state Exp;
branches;
next	1.148.1.1.1.2;

1.148.1.1.1.2
date	97.08.06.15.11.03;	author daveb;	state Exp;
branches;
next	1.148.1.1.1.3;

1.148.1.1.1.3
date	97.08.07.16.01.06;	author daveb;	state Exp;
branches;
next	1.148.1.1.1.4;

1.148.1.1.1.4
date	97.08.08.15.52.58;	author johnh;	state Exp;
branches;
next	1.148.1.1.1.5;

1.148.1.1.1.5
date	97.08.13.17.46.27;	author daveb;	state Exp;
branches
	1.148.1.1.1.5.1.1;
next	;

1.148.1.1.1.5.1.1
date	97.10.07.11.59.10;	author jkbrook;	state Exp;
branches;
next	1.148.1.1.1.5.1.2;

1.148.1.1.1.5.1.2
date	97.10.22.16.16.16;	author jkbrook;	state Exp;
branches;
next	;

1.148.1.1.2.1
date	97.09.08.17.26.17;	author daveb;	state Exp;
branches;
next	;

1.148.1.1.3.1
date	97.09.09.14.23.05;	author daveb;	state Exp;
branches;
next	;

1.159.1.1
date	97.09.10.19.42.04;	author brucem;	state Exp;
branches;
next	1.159.1.2;

1.159.1.2
date	97.09.12.10.06.32;	author brucem;	state Exp;
branches;
next	;

1.159.2.1
date	97.09.11.21.09.35;	author daveb;	state Exp;
branches;
next	1.159.2.2;

1.159.2.2
date	97.09.12.14.52.41;	author johnh;	state Exp;
branches;
next	1.159.2.3;

1.159.2.3
date	97.11.25.14.23.42;	author daveb;	state Exp;
branches;
next	1.159.2.4;

1.159.2.4
date	97.11.25.20.24.12;	author daveb;	state Exp;
branches;
next	1.159.2.5;

1.159.2.5
date	97.11.26.14.11.33;	author daveb;	state Exp;
branches;
next	1.159.2.6;

1.159.2.6
date	97.12.12.15.17.32;	author johnh;	state Exp;
branches;
next	1.159.2.7;

1.159.2.7
date	98.01.19.14.55.49;	author daveb;	state Exp;
branches;
next	;

1.193.1.1
date	99.04.01.18.08.20;	author daveb;	state Exp;
branches;
next	;


desc
@new unit
No reason given
@


1.196
log
@[Bug #190560]
Remove circular dependency in targets caused by FOREIGNMO being used as target.
@
text
@# ==== BUILD MLWORKS IMAGES ====
#
# Instructions
# ------------
# Generic part of the images building system
#
# $Log: GNUmake,v $
# Revision 1.195  1999/05/13  14:57:20  daveb
# [Bug #190553]
# Added os_exit.
#
# Revision 1.194  1999/04/13  10:52:51  johnh
# [Bug #190506]
# Make sure foreign mos are built before making image.
# Also change format of targets for building windows, xm, and foreign images.
#
# Revision 1.193  1999/03/18  12:18:22  johnh
# [Bug #190530]
# make utils/mutex mos after making batch image.
#
# Revision 1.192  1999/03/17  17:37:48  johnh
# [Bug #190529]
# Add stub generator files to foreign-files
#
# Revision 1.191  1999/03/12  14:46:51  mitchell
# [Bug #190526]
# Include require_all in basis-files
#
# Revision 1.190  1999/03/11  17:44:08  johnh
# [Bug #190506]
# Remove old FI.  Still keep foreign.img but change it to make the new FI.
#
# Revision 1.189  1999/03/08  11:02:05  mitchell
# [Bug #30286]
# Export Unix and Windows structures
#
# Revision 1.188  1999/02/15  16:23:10  mitchell
# [Bug #190508]
# Load the sockets files for the basis
#
# Revision 1.187  1999/02/09  09:50:00  mitchell
# [Bug #190505]
# Support for precompilation of subprojects
#
# Revision 1.186  1998/10/28  11:15:10  jont
# [Bug #70204]
# Load __list_pair in before _shell_utils
#
# Revision 1.185  1998/10/19  10:46:27  jont
# [Bug #70203]
# Modify for alternative argument scheme
#
# Revision 1.184  1998/10/05  10:42:07  jont
# [Bug #30487]
# Load __large_real before loading time
#
# Revision 1.183  1998/08/13  16:56:57  jkbrook
# [Bug #30470]
# Add the Option structure to the distribution
#
# Revision 1.182  1998/07/07  10:18:11  jont
# [Bug #20122]
# Move pervasive signatures into __pervasive_library.sml
#
# Revision 1.181  1998/06/11  11:37:50  johnh
# [Bug #30411]
# CommandLine structure required by Motif Capi.
#
# Revision 1.180  1998/05/05  18:56:51  jkbrook
# [Bug #30354]
# Temporarily restore old FI to distribution
#
# Revision 1.179  1998/05/05  18:03:11  io
# [Bug #50079]
# simplify distribution archival of images
#
# Revision 1.178  1998/04/24  14:01:16  johnh
# [Bug #30229]
# specify local_functions on to batch compiler.
#
# Revision 1.177  1998/04/06  15:58:23  jont
# [Bug #70086]
# Integrate Windows structure and signature
#
# Revision 1.176  1998/04/06  10:27:54  jont
# [Bug #70089]
# Add __sys_word to list of basis files
#
# Revision 1.175  1998/04/01  12:21:17  jont
# [Bug #70086]
# *windows has moved to *windows_gui
#
# Revision 1.174  1998/03/31  12:00:14  jont
# [Bug #70077]
# Removing path, _unixpath, _win_ntpath and __path
# These are replaced by OS.Path
#
# Revision 1.173  1998/03/19  21:04:18  jkbrook
# [Bug #50047]
# __timer.mo should appear in the distribution of the basis, i.e.,
# in BASISSRC
#
# Revision 1.172  1998/03/17  17:28:20  jkbrook
# [Bug #50052]
# Include command_line structure in basis distribution
#
# Revision 1.171  1998/02/23  11:38:14  johnh
# [Bug #30362]
# objects directory now extended to allow for different modes.
#
# Revision 1.170  1998/02/19  18:00:13  jont
# [Bug #70065]
# Make terminal available to windows.img and xm.img
#
# Revision 1.169  1998/02/16  16:19:49  jkbrook
# [Bug #30306]
# Remove FI-related targets
#
# Revision 1.168  1998/02/09  14:30:48  johnh
# [Bug #30071]
# Change order of loading basis/__date
#
# Revision 1.167  1998/01/30  16:37:34  johnh
# [Bug #30071]
# Merge in Project Workspace changes.
#
# Revision 1.166  1997/11/26  17:41:11  daveb
# [Bug #30329]
# Added basis/__wordN_array2.
#
# Revision 1.165  1997/11/26  10:27:26  daveb
# [Bug #30329]
# Removed mono_array2 from basis files.
#
# Revision 1.164  1997/11/24  12:15:49  daveb
# [Bug #30304]
# Added SML90 to the basis library.
#
# Revision 1.163  1997/11/09  09:23:36  jont
# [Bug #30089]
# Utils/__timer now needs basis/__timer
#
# Revision 1.162  1997/10/09  14:33:10  johnh
# [Bug #30193]
# Add *sys_messages.sml to gui.
#
# Revision 1.161  1997/09/23  09:39:57  jont
# [Bug #70010]
# Remove references to sml90 as these are no longer used
#
# Revision 1.160  1997/09/19  09:03:01  brucem
# [Bug #30153]
# Change Old and OLD to SML90.
#
# Revision 1.159.2.7  1998/01/19  14:55:49  daveb
# [Bug #30071]
# Set ARCH_OS in sub-Makefiles.
#
# Revision 1.159.2.6  1997/12/12  15:17:32  johnh
# [Bug #30071]
# Add basis/date and basis/__date to LEXER1.
#
# Revision 1.159.2.5  1997/11/26  14:11:33  daveb
# [Bug #30071]
# Removed *action_queue.
#
# Revision 1.159.2.4  1997/11/25  20:24:12  daveb
# [Bug #30071]
# Object files are now found in a separate directory.
#
# Revision 1.159.2.3  1997/11/25  14:23:42  daveb
# [Bug #30326]
# Renamed utils/*timer to utils/*mlworks_timer and main/*io to main/*mlworks_io.
#
# Revision 1.159.2.2  1997/09/12  14:52:41  johnh
# [Bug #30071]
# Redesign Compilation Manager -> Project Workspace.
# New files: *proj_workspace and *proj_properties.  Removed: *comp_manager.
#
# Revision 1.159  1997/08/08  15:11:04  brucem
# [Bug #30245]
# ARRAY2 now depends on Vector.
#
# Revision 1.158  1997/07/21  08:58:28  daveb
# [Bug #30090]
# Moved load of __old.
#
# Revision 1.157  1997/07/02  13:42:23  stephenb
# [Bug #30029]
# The MLWorks<->C interface has grown.  Replace {__}c.sml with
# {__}mlworks_c_interface, {__}mlworks_c_io, {__}mlworks_dynamic_library,
# {__,}mlworks_c_resource and {_,}mlworks_c_pointer.sml
#
# Revision 1.156  1997/06/16  10:32:51  johnh
# [Bug #30174]
# Making podium platform specific.
#
# Revision 1.155  1997/06/05  09:45:45  johnh
# [Bug #30068]
# Make Breakpoint and Trace Managers top level tools - added new files.
#
# Revision 1.154  1997/05/29  17:19:54  jkbrook
# [Bug #01749]
# Further basis synonym corrections
#
# Revision 1.153  1997/05/29  16:16:26  jkbrook
# [Bug #01749]
# __sys_word in LEXER1 moved to Unix-specific Makefiles
#
# Revision 1.152  1997/05/27  17:00:24  jont
# [Bug #30090]
# Rearrangements caused by replacing MLWorks.IO by basis I/O
#
# Revision 1.151  1997/05/27  13:36:35  jkbrook
# [Bug #01749]
# Some files now depend on basis synonym files __large_{int,real,word} and __sys_word
#
# Revision 1.150  1997/05/19  09:35:03  stephenb
# [Bug #30121]
# Move to new FI: remove foreign.img and related rules.
#
# Revision 1.149  1997/04/16  16:15:47  jont
# Fix building of foreign.img when ARCH_OS is set
#
# Revision 1.148  1997/03/31  12:40:02  johnh
# [Bug #1967]
# Moved basis/os_path to before system/_win_ntgetenv.
#
# Revision 1.147  1997/03/13  11:33:15  andreww
# [Bug #1667]
# Adding mutexes to control access to the Listener.
#
# Revision 1.146  1997/03/06  10:51:36  matthew
# Adding array2 files
#
# Revision 1.145  1997/02/26  12:43:42  andreww
# [Bug #1759]
# adding new TEXT_STREAM_IO signature.
#
# Revision 1.144  1997/01/31  12:35:53  andreww
# [Bug #1901]
# Adding new RealVector and RealArray structures to basis
#
# Revision 1.143  1997/01/15  15:18:54  io
# [Bug #1892]
# rename __word{8,16,32}{array,vector} to __word{8,16,32}_{array,vector}
#        __pre{integer,int32,real,word{,32}} to __pre_{int{,32},real,word{,32}}
#        __pack{8,16,32}{big,little} to __pack{8,16,32}_{big,little}
#
# Revision 1.142  1997/01/14  11:23:24  io
# [Bug #1757]
# renamed __ieeereal to __ieee_real
#         __char{array,vector} to __char_{array,vector}
#
# Revision 1.141  1997/01/13  10:29:39  andreww
# [Bug #1818]
# Adding new floatarray file to the pervasives
#
# Revision 1.140  1997/01/08  15:38:34  jont
# [Bug #1816]
# [Bug #1816]
# Modify the way rm is done to cope with new GNU tools
#
# Revision 1.139  1997/01/06  10:53:07  matthew
# Adding basis/vector
#
# Revision 1.138  1997/01/02  11:18:34  jont
# [Bug #1816]
# Change use of " when sh invoked to ' to keep new PC make happy
# Modified method of producing foreign.img so that compilation part
# is done directly from here. This allows considerable simplification
# of mk_interface.sh
#
# Revision 1.137  1996/11/15  16:48:53  daveb
# _license.sml now requires __substring.
#
# Revision 1.136  1996/11/07  12:27:49  daveb
# Added main/*license.
#
# Revision 1.135  1996/11/06  11:57:55  matthew
# [Bug #1728]
# __integer becomes __int
#
# Revision 1.134  1996/11/04  16:53:04  jont
# [Bug #1725]
# Remove unsafe string operations introduced when String structure removed
#
# Revision 1.133  1996/11/02  15:21:05  daveb
# Removed stringlib from FOREIGN image.
#
# Revision 1.132  1996/10/31  11:53:50  daveb
# Moved basis/__old to the LEXER build, as it is now needed by _lexrules.
#
# Revision 1.131  1996/10/29  21:09:52  daveb
# Added old structure to PARSER2.
#
# Revision 1.130  1996/10/21  15:41:55  jont
# Remove references to toplevel
#
# Revision 1.129  1996/10/09  14:24:58  jont
# Add BASIS_LOADER variable
#
# Revision 1.128  1996/10/08  13:54:22  stephenb
# [Bug #1602]
# Moved basis/__word8vector, basis/mono_vector and
# basis/__word8 from PARSER1 in GNUMake to PARSERSYS
# in the SunOS/Irix/Linux specific Makefiles since the files are only
# needed under Unix.
#
# Revision 1.127  1996/09/27  10:00:25  stephenb
# [Bug #1615]
# Remove duplicate dependencies.
#
# Revision 1.126  1996/09/16  15:57:01  andreww
# [Bug #1577]
# reordering dependencies
#
# Revision 1.125  1996/08/11  14:53:10  daveb
# Removed basis.array from PARSER1.
#
# Revision 1.124  1996/08/09  13:48:02  daveb
# [Bug #1536]
# Added BASIS1 to parser sources.
#
# Revision 1.123  1996/08/05  14:33:27  stephenb
# [Bug #1510]
# location now depends on char, string (and transitively list) so
# moved them to before location in LEXER filename list.
#
# Revision 1.122  1996/07/19  09:44:53  jont
# Bring up to date following file name changes
#
# Revision 1.121  1996/07/16  10:05:54  andreww
# removing dependency on gui_standard_io which is now defunct.
# ,
#
# Revision 1.120  1996/07/03  15:06:26  andreww
# correcting make dependencies.
#
# Revision 1.119  1996/07/03  12:49:51  andreww
# Adding GuiStandardIO structure to load.
#
# Revision 1.118  1996/06/24  20:37:33  io
# expose Char.scanc() and restrict __char
#
# Revision 1.117  1996/06/24  19:56:56  brianm
# Modifying foreign.img build ...
#
# Revision 1.116  1996/06/19  14:07:23  brianm
# Mods to allow mk_interface.sh to be used under Win32 ..
#
# Revision 1.114  1996/06/14  17:53:26  brianm
# Modifications to add custom editor interface ...
#
# Revision 1.113  1996/06/05  13:47:59  brianm
# Modified foreign.img entry to rebuild FFI .mo files ...
#
# Revision 1.112  1996/06/04  22:44:08  io
# stringcvt->string_cvt
#
# Revision 1.111  1996/06/04  10:04:16  jont
# Minor alterations for NT stuff
#
# Revision 1.110  1996/06/04  09:55:02  jont
# Update following basis changes
#
# Revision 1.109  1996/05/29  10:47:45  stephenb
# Move basis/{__,}char above basis/__time in PARSER1 as the latter
# now requires the former.
# Also move {math,ieeereal,prereal,real} from GUI to above basis/__time
# in PARSER 1 for the same reason.
# Removed a redundant reference to basis/__list_pair in BASIS.
#
# Revision 1.108  1996/05/28  10:57:09  jont
# More problems
#
# Revision 1.107  1996/05/28  10:49:44  jont
# Revert to previous method of building foreign.img
#
# Revision 1.105  1996/05/24  10:09:10  daveb
# Removed evaluator.
#
# Revision 1.104  1996/05/22  11:36:28  io
# readying substring, byte
#
# Revision 1.103  1996/05/22  09:22:36  matthew
# New basis ordering
#
# Revision 1.102  1996/05/21  12:33:28  stephenb
# Use the new path implementation.
#
# Revision 1.101  1996/05/21  11:52:10  jont
# signature changes
#
# Revision 1.100  1996/05/21  09:42:46  jont
# Add preferences to interpreter files
#
# Revision 1.99  1996/05/20  15:53:59  daveb
# Added interpreter/*save_image
#
# Revision 1.98  1996/05/17  09:43:36  stephenb
# Change filesys -> file_sys in accordance with latest file naming conventions.
#
# Revision 1.97  1996/05/17  07:34:50  stephenb
# Added various files needed to support a full OS.FileSys implementation.
#
# Revision 1.96  1996/05/16  16:50:01  jont
# Remove settings of SYSTEM from here
#
# Revision 1.95  1996/05/16  16:19:28  jont
# Revise file list for foreign.img
#
# Revision 1.94  1996/05/16  15:02:27  io
# add string
# __string
#
# Revision 1.93  1996/05/15  15:36:53  jont
# Added guib.img to the list of distributed targets
#
# Revision 1.92  1996/05/15  12:41:05  jont
# Name changes within the revised basis
#
# Revision 1.91  1996/05/15  11:44:48  jont
# Add ieeereal and remove some duplication
#
# Revision 1.90  1996/05/14  08:58:43  stephenb
# Reorder basis/__chars and basis/__int so that the latter comes
# before the former.
#
# Revision 1.89  1996/05/13  09:29:36  matthew
# Removing word8 from lexer files
#
# Revision 1.88  1996/05/10  13:18:59  matthew
# Fixing basis.img problem
#
# Revision 1.87  1996/05/10  09:44:03  matthew
# Changes to words.
#
# Revision 1.86  1996/05/09  11:33:58  stephenb
# Remove any reference to FILESYS since it is subsumed by PARSERSYS
# now that filesys stuff is needed for the parser.
#
# Revision 1.85  1996/05/08  13:14:38  stephenb
# Rename filesys -> os_filesys and move main/exit to basis.
#
# Revision 1.84  1996/05/08  08:43:58  stephenb
# Fix so that basis.img build works.
#
# Revision 1.83  1996/05/08  08:13:04  stephenb
# Add missing files so that it is possible to build an image.
# Specifically: added __pre_char to LEXER as stringcvt needs it and
# replaced any reference to basis/lists with basis/list since the file
# name has been changed to match that used in the revised basis.
#
# Revision 1.82  1996/05/07  21:31:49  io
# add __pre_char, char into basis
#
# Revision 1.81  1996/05/07  12:03:47  stephenb
# Add files to support OS.IO.
#
# Revision 1.80  1996/05/02  20:52:21  io
# fix bool dependency with toplevel
#
# Revision 1.79  1996/05/02  19:16:51  io
# add bool
#
# Revision 1.78  1996/05/02  17:22:35  jont
# Add foreign.img to list of images distributed
#
# Revision 1.77  1996/05/02  16:02:24  jont
# Adding foreign.img and foreign-files
#
# Revision 1.76  1996/05/02  12:49:04  matthew
# Bah, I was misinformed.
#
# Revision 1.75  1996/05/02  12:00:38  matthew
# Moving word32 and int32
#
# Revision 1.74  1996/04/30  13:40:53  matthew
# Removed utils/integer
#
# Revision 1.73  1996/04/25  10:43:09  jont
# Change maths to math and __maths to __math
#
# Revision 1.72  1996/04/23  11:22:04  daveb
# Added gui/*file_viewer.
#
# Revision 1.71  1996/04/18  16:39:58  jont
# initbasis becomes basis
#
# Revision 1.70  1996/04/17  15:50:15  stephenb
# Rename initbasis/__process -> initbasis/__os_process so that the
# file name matches the structure as defined in the latest basis revision.
#
# Revision 1.69  1996/04/02  13:57:42  stephenb
# Patch up the BASIS src list so that it includes all the files in the basis!
#
# Revision 1.68  1996/04/02  12:59:46  stephenb
# Remove any reference to initbasis/__os since this is now implementation
# dependent i.e. in the unix and win_nt directories.
#
# Revision 1.67  1996/04/02  09:29:24  stephenb
# Remove os dependence on toplevel as this causes build problems because
# it requires the inclusion of files that cannot be compiled by SML/NJ.
#
# Revision 1.66  1996/03/27  16:44:55  stephenb
# Various changes as part of the upgrade to the latest OS.* definition.
#
# Revision 1.65  1996/03/15  12:18:09  matthew
# hyphenizing command line arguments
#
# Revision 1.64  1996/03/08  15:24:54  jont
# Add rules to make windows.img
#
# Revision 1.63  1996/03/01  15:06:23  jont
# Modifications to get distributions working under NT
#
# Revision 1.62  1996/02/26  14:33:33  stephenb
# Add stack_frame
#
# Revision 1.61  1996/02/26  12:49:36  jont
# mononewmap becomes monomap
#
# Revision 1.60  1996/02/26  11:51:56  jont
# newhashtable becomes hashtable
#
# Revision 1.59  1996/02/26  09:43:44  jont
# Change newmap to be map
#
# Revision 1.58  1996/02/22  14:36:27  jont
# Removing Map
#
# Revision 1.57  1996/02/08  15:39:03  daveb
# Replaced evaluator (now a source display sub-tool).
#
# Revision 1.56  1996/01/23  11:01:23  matthew
# Dave forgot to remove *evaluator from here
#
# Revision 1.55  1996/01/19  15:46:43  stephenb
# OS reorganisation: editor implementation now depends on the
# OS type i.e. NT or Unix.
#
# Revision 1.54  1996/01/12  12:27:53  daveb
# Moved file_dialog from gui to motif.
#
# Revision 1.53  1996/01/09  14:07:22  matthew
# Permuting capi and menus files
#
# Revision 1.52  1996/01/09  12:21:34  matthew
# Renaming motif.img to gui.img
#
# Revision 1.51  1995/12/27  16:33:47  jont
# Removing utils/option
#
# Revision 1.50  1995/12/12  17:27:39  daveb
# Removed file_tool, added path_tool.
#
# Revision 1.49  1995/12/05  13:43:45  jont
# Move types to be loaded before absyn
#
# Revision 1.48  1995/12/05  10:36:20  daveb
# Added modules for project tool.
#
# Revision 1.47  1995/10/18  16:25:37  nickb
# Change load order to get profile tool in before the evaluator.
#
# Revision 1.46  1995/10/18  12:12:46  nickb
# Add profile tool.
#
# Revision 1.45  1995/10/14  21:48:00  brianm
# GraphWidget now depends on Gui Utils - rearranging ...
#
# Revision 1.44  1995/10/06  11:29:16  jont
# Move initbasis/lists stuff into xmsrc as it's not relevant for NT
#
# Revision 1.43  1995/10/04  13:18:48  daveb
# *gui_utils now use *entry.
#
# Revision 1.42  1995/10/02  11:50:42  brianm
# Adding utils/lisp for use by Motif.
#
#
#
#

# The following ifeq stuff is an ugly hack which should be sorted 
# out by moving OS specific styff into OS specific makefiles.
#

ifeq "$(OS)" "NT"
NTTYPE=TRUE
else
ifeq "$(OS)" "Win95"
NTTYPE=TRUE
else
NTTYPE=FALSE
endif
endif

SRC =		../../..
OBJ =           ../../../../objects

ifeq "$(NTTYPE)" "TRUE"
RM =		c:/usr/local/bin/rm -rf
MKDIR =		mkdir -p
CP =		cp
else
COMPRESS =	compress
UNCOMPRESS =	uncompress
RM =		/bin/rm -f
CP =		/bin/cp
MKDIR =		/bin/mkdir
TMPDIR =	/tmp
SML_HOME =	/u/sml
ADB =		adb
endif
DISTRIB =	$(SML_HOME)/distribution/images

COMMON_DISTRIBUTED_IMAGES = pervasive.img batch.img gui.img foreign.img basis.img guib.img


#
# This is a hack because the foreign interface is not currently used
# internally by MLWorks.
#

BASIS_TARGETS = basis/require_all \
	   	$(SYSTEM)/platform_specific_exports

FOREIGN = 	mlworks_c_pointer \
	  	mlworks_c_interface \
	  	__mlworks_c_interface \
	  	_mlworks_c_pointer \
	  	mlworks_dynamic_library \
	  	__mlworks_dynamic_library \
	  	mlworks_c_resource \
	  	__mlworks_c_resource \
	  	mlworks_c_io \
	  	__mlworks_c_io

STUB_GEN = 	utils/lists \
		utils/_lists \
		utils/__lists \
		foreign/stub_gen \
		foreign/_stub_gen \
		foreign/__stub_gen \
		foreign/__stub_gen_input

DISTRIBUTED_IMAGES = $(COMMON_DISTRIBUTED_IMAGES) $(PLATFORM_DISTRIBUTED_IMAGES)


PERVASIVE =	__builtin_library __pervasive_library 

TIMER = 	basis/timer \
		basis/__timer 

BASIS1 =	basis/__pre_basis \
		basis/__pre_string_cvt \
		basis/string_cvt \
		basis/__string_cvt \
		basis/list_pair \
		basis/list \
		basis/__list_pair \
		basis/__list \
		basis/__pre_int \
		basis/__pre_word32 \
		basis/__pre_int32 \
		basis/__pre_word \
                basis/integer \
                basis/__large_int \
		basis/word \
		basis/__word \
		basis/__word8 \
		basis/__sys_word \
		basis/__int \
		basis/char \
		basis/__pre_char \
		basis/__char \
		basis/array \
		basis/vector \
		basis/mono_vector \
		basis/mono_array \
		basis/string \
		basis/__string \
		basis/__char_vector \
		basis/__word8_vector \
		basis/__word8_array \
		basis/__char_array \
		basis/__array \
		basis/__vector \
		basis/array2 \
		basis/__array2 \
		basis/bool \
		basis/__bool \
		basis/math \
		basis/__math \
		basis/__pre_ieee_real \
		basis/ieee_real \
		basis/__ieee_real \
		basis/__pre_real \
		basis/real \
                basis/__large_real \
		basis/__real \
		basis/time \
		$(SYSTEM)/__time \
		basis/date \
		basis/__date \
		basis/io \
		basis/__position \
		basis/os_process \
		basis/os_file_sys \
		basis/__word32 \
		basis/os_path \
		$(SYSTEM)/__os_path \
		basis/__large_word 

BASIS2 =	basis/os_io \
		basis/os \
		basis/pack_word \
		basis/_mono_vector \
		basis/_mono_array \
		basis/mono_array2 \
		basis/_mono_array2 \
		basis/_pack_words_big \
		basis/_pack_words_little \
		basis/__word16 \
		basis/substring \
		basis/__substring \
		basis/byte \
		basis/__byte \
		$(SYSTEM)/os_exit \
		$(SYSTEM)/__os_exit \
		basis/exit \
		basis/__exit \
		basis/_os_process \
		basis/__os_process \
		$(SYSTEM)/_os_io \
		$(SYSTEM)/__os_io \
		$(SYSTEM)/_os_file_sys \
		$(SYSTEM)/__os_file_sys \
		$(SYSTEM)/_os \
		$(SYSTEM)/__os \
		basis/__io \
		basis/prim_io \
		basis/os_prim_io \
		basis/stream_io \
		basis/_stream_io \
		basis/imperative_io \
		basis/_imperative_io \
		basis/_prim_io \
		basis/__bin_prim_io \
		basis/bin_io \
		basis/__text_prim_io \
		basis/text_stream_io \
		basis/text_io \
		basis/__pack16_big \
		basis/__pack16_little \
		basis/__pack32_big \
		basis/__pack32_little \
		basis/__pack8_big \
		basis/__pack8_little \
		basis/__word8_array2 \
		basis/__word16_vector \
		basis/__word16_array \
		basis/__word16_array2 \
		basis/__word32_vector \
		basis/__word32_array \
		basis/__word32_array2 \
		basis/__real_vector \
		basis/__real_array \
		basis/__real_array2 \
		basis/__int8 \
		basis/__int16 \
		basis/__int32

BASIS3 =	$(SYSTEM)/__os_prim_io \
		basis/__text_stream_io \
		basis/__bin_stream_io \
		basis/_text_io \
		basis/__text_io \
		basis/_bin_io \
		basis/__bin_io \
		basis/sml90 \
		basis/__sml90 \
		basis/command_line \
		basis/__command_line \
		basis/option \
		basis/__option \
		basis/general \
		basis/__general \
		basis/net_db  \
		basis/__pre_sock  \
		basis/__net_db  \
		basis/serv_db  \
		basis/__serv_db  \
		basis/prot_db  \
		basis/__prot_db  \
		basis/host_db \
		basis/__host_db  \
		basis/socket  \
		basis/__socket  \
		basis/inet_sock \
		basis/generic_sock \
		basis/__generic_sock \
		basis/__inet_sock  \
		basis/unix_sock \
		basis/__unix_sock 


BASISSRC = 	$(BASIS1) $(LEXERSYS) $(PARSERSYS) $(BASIS2) $(BASISSYS) $(BASIS3) $(TIMER) $(BASISSYS2)

BASIS_LOADER = 	$(BASISSRC) $(BASIS_TARGETS)

LEXER1 =	$(BASIS_LOADER) \
		basics/location \
		basics/_location \
		basics/__location \
		utils/print \
		utils/_print \
		utils/__print \
		utils/lists \
		utils/_lists \
		utils/__lists \
		utils/map \
		utils/monomap \
		utils/intnewmap 


LEXER2 =	main/info \
		main/_info \
		main/__info \
		utils/crash \
		utils/_crash \
		utils/__crash \
		utils/_b23tree \
		utils/__btree \
		utils/_intb23tree \
		utils/__intbtree \
		basics/symbol \
		basics/_symbol \
		basics/__symbol \
		basics/token \
		basics/_token \
		basics/__token \
		lexer/ndfa \
		lexer/_ndfa \
		lexer/__ndfa \
		lexer/regexp \
		lexer/_regexp \
		lexer/__regexp \
		lexer/inbuffer \
		lexer/_inbuffer \
		lexer/__inbuffer \
		main/options \
		main/_options \
		main/__options \
		lexer/lexrules \
		lexer/_lexrules \
		lexer/__lexrules \
		lexer/lexer \
		utils/mlworks_timer \
		utils/__mlworks_timer \
		lexer/_lexgen \
		lexer/__lexer

LEXER =	$(LEXER1) $(LEXERSYS) $(TIMER) $(LEXER2)

PARSER1 =	basics/ident \
		basics/_ident \
		basics/__ident \
		basics/identprint \
		utils/set \
		utils/_set \
		utils/__set

PARSER2 =	basics/module_id \
		basics/_module_id \
		basics/__module_id \
		utils/counter \
		utils/_counter \
		typechecker/stamp \
		typechecker/_stamp \
		typechecker/__stamp \
		typechecker/datatypes \
		typechecker/_datatypes \
		typechecker/__datatypes \
		basics/absyn \
		parser/parserenv \
		parser/derived \
		parser/parser \
 		parser/LRbasics \
 		parser/actionfunctions \
 		parser/LRparser \
		parser/_parser \
		basics/_identprint \
		basics/__identprint \
 		debugger/runtime_env \
 		debugger/_runtime_env \
 		debugger/__runtime_env \
		typechecker/types \
		typechecker/_types \
		typechecker/__types \
		basics/_absyn \
		basics/__absyn \
		parser/_parserenv \
		parser/__parserenv \
		parser/_derived \
		parser/__derived \
 		parser/_LRbasics \
 		parser/_LRparser \
 		parser/_actionfunctions \
 		parser/__LRbasics \
 		parser/__actionfunctions \
 		parser/__LRparser \
		parser/__parser

PARSER =	$(PARSER1) $(PARSERSYS) $(PARSER2)

TYPER =		utils/hashset \
		utils/_hashset \
		lambda/pretty \
		lambda/_pretty \
		lambda/__pretty \
		utils/sexpr \
		utils/_sexpr \
		utils/__sexpr \
		basics/absynprint \
		basics/_absynprint \
		basics/__absynprint \
		lambda/topdecprint \
		lambda/_topdecprint \
		lambda/__topdecprint \
		utils/text \
		utils/_text \
		utils/__text \
		utils/diagnostic \
		utils/_diagnostic \
		utils/hashtable \
		utils/_hashtable \
		utils/__hashtable \
		main/pervasives \
		main/_pervasives \
		main/__pervasives \
		lambda/lambdatypes \
		lambda/_lambdatypes \
		lambda/__lambdatypes \
		lambda/environtypes \
		lambda/_environtypes \
		lambda/__environtypes \
		basis/vector \
		basis/__vector \
		lambda/environ \
		lambda/_environ \
		lambda/__environ \
		main/primitives \
		main/_primitives \
		main/__primitives \
		typechecker/namehash \
		typechecker/_namehash \
		typechecker/__namehash \
		typechecker/strnames \
		typechecker/_strnames \
		typechecker/__strnames \
		typechecker/namesettypes \
		typechecker/_namesettypes \
		typechecker/__namesettypes \
		typechecker/basistypes \
		typechecker/_basistypes \
		typechecker/__basistypes \
		typechecker/unify \
		typechecker/_unify \
		typechecker/__unify \
		typechecker/completion \
		typechecker/_completion \
		typechecker/__completion \
		typechecker/scheme \
		typechecker/_scheme \
		typechecker/__scheme \
		typechecker/valenv \
		typechecker/_valenv \
		typechecker/__valenv \
		typechecker/tyenv \
		typechecker/_tyenv \
		typechecker/__tyenv \
		typechecker/strenv \
		typechecker/_strenv \
		typechecker/__strenv \
		typechecker/environment \
		typechecker/_environment \
		typechecker/__environment \
		typechecker/nameset \
		typechecker/_nameset \
		typechecker/__nameset \
		typechecker/sigma \
		typechecker/_sigma \
		typechecker/__sigma \
		typechecker/basis \
		typechecker/_basis \
		typechecker/__basis \
		typechecker/type_exp \
		typechecker/_type_exp \
		typechecker/__type_exp \
		typechecker/assemblies \
		typechecker/_assemblies \
		typechecker/__assemblies \
		typechecker/control_unify \
		typechecker/_control_unify \
		typechecker/__control_unify \
		typechecker/context_print \
		typechecker/_context_print \
		typechecker/__context_print \
		typechecker/patterns \
		typechecker/_patterns \
		typechecker/__patterns \
		typechecker/core_rules \
		typechecker/_core_rules \
		typechecker/__core_rules \
		typechecker/sharetypes \
		typechecker/_sharetypes \
		typechecker/__sharetypes \
		typechecker/share \
		typechecker/_share \
		typechecker/__share \
		typechecker/realise \
		typechecker/_realise \
		typechecker/__realise \
		typechecker/type_debugger \
		typechecker/_type_debugger \
		typechecker/__type_debugger \
		typechecker/mod_rules \
		typechecker/_mod_rules \
		typechecker/__mod_rules

BATCH =		main/version \
		main/__version \
		main/license \
		main/_license \
		main/__license \
		utils/mlworks_exit \
		$(SYSTEM)/__mlworks_exit \
		main/batch \
		main/_batch \
		main/__batch

SHELLSRC =	main/version \
		main/__version \
		main/license \
		main/_license \
		main/__license \
		utils/mlworks_exit \
		$(SYSTEM)/__mlworks_exit \
		main/batch_common_export_filter \
		main/batch_export_filter \
		main/preferences \
		main/_preferences \
		main/__preferences \
		editor/custom \
		editor/_custom \
		editor/__custom \
		interpreter/inter_envtypes \
		interpreter/_inter_envtypes \
		interpreter/__inter_envtypes \
		interpreter/interload \
		interpreter/_interload \
		interpreter/__interload \
		interpreter/intermake \
		interpreter/_intermake \
		interpreter/__intermake \
		interpreter/incremental \
		interpreter/_incremental \
		interpreter/__incremental


INTERSRC1 =	basis/__int32 \
		debugger/value_printer_utilities \
		debugger/_value_printer_utilities \
		debugger/__value_printer_utilities \
		debugger/value_printer \
		debugger/_value_printer \
		debugger/__value_printer \
		interpreter/interprint \
		interpreter/_interprint \
		interpreter/__interprint \
		interpreter/user_context \
		interpreter/_user_context \
		interpreter/__user_context \
		interpreter/shell_types \
		interpreter/_shell_types \
		interpreter/__shell_types \
		debugger/newtrace \
		debugger/_newtrace \
		debugger/__newtrace \
		basis/list_pair \
		basis/__list_pair \
		interpreter/shell_utils \
		interpreter/_shell_utils \
		interpreter/__shell_utils \
		debugger/stack_frame \
		debugger/_stack_frame \
		debugger/__stack_frame \
	        debugger/debugger_print \
		debugger/_debugger_print \
	        debugger/__debugger_print \
		debugger/ml_debugger \
		debugger/_ml_debugger \
		debugger/__ml_debugger \
		interpreter/inspector_values \
		interpreter/_inspector_values \
		interpreter/__inspector_values \
		interpreter/inspector \
		interpreter/_inspector \
		interpreter/__inspector \
		main/version \
		main/__version \
		main/license \
		main/_license \
		main/__license \
		interpreter/save_image \
		interpreter/_save_image \
		interpreter/__save_image \
		interpreter/shell_structure \
		interpreter/_shell_structure \
		interpreter/__shell_structure \
		interpreter/shell \
		interpreter/_shell \
		interpreter/__shell \
		interpreter/tty_listener \
		interpreter/_tty_listener \
		interpreter/__tty_listener \
		interpreter/interpreter_export_filter

INTERSRC =	$(INTERSYS) $(INTERSRC1)

TTYSRC =	interpreter/interpreter

TERMINAL =	basis/require_all \
		basis/platform_specific_exports \
		utils/terminal \
		utils/__terminal

XMSRC =		motif/xm \
		motif/_xm \
		motif/__xm

XMOBJ = 	../../../motif/objects

WINDOWSSRC =    winsys/windows_gui \
                winsys/_windows_gui \
                winsys/__windows_gui

WINDOWSOBJ = 	../../../mswindows/objects

XCAPISRC=	utils/lisp \
		utils/_lisp \
		utils/__lisp \
		basis/command_line \
		basis/__command_line \
		motif/file_dialog \
		motif/_file_dialog \
		motif/__file_dialog \
		gui/menus \
		motif/_menus \
		motif/__menus \
		gui/capi \
		motif/_capi \
		motif/__capi

GUI =		basis/date \
		basis/__date \
		interpreter/entry \
		interpreter/_entry \
		interpreter/__entry \
		utils/mutex \
		utils/__mutex \
		gui/path_tool \
		gui/_path_tool \
		gui/__path_tool \
		gui/gui_utils \
		gui/_gui_utils \
		gui/__gui_utils \
		gui/graph_widget \
		gui/_graph_widget \
		gui/__graph_widget \
		gui/tooldata \
		gui/_tooldata \
		gui/__tooldata \
		gui/break_trace \
		gui/_break_trace \
		gui/__break_trace \
		gui/console \
		gui/_console \
		gui/__console \
		gui/inspector_tool \
		gui/_inspector_tool \
		gui/__inspector_tool \
		gui/file_viewer \
		gui/_file_viewer \
		gui/__file_viewer \
		gui/debugger_window \
		gui/_debugger_window \
		gui/__debugger_window \
		gui/error_browser \
		gui/_error_browser \
		gui/__error_browser \
                gui/bar_chart \
                gui/_bar_chart \
                gui/__bar_chart \
                gui/profile_tool \
                gui/_profile_tool \
                gui/__profile_tool \
		gui/proj_properties \
		gui/_proj_properties \
		gui/__proj_properties \
		gui/proj_workspace \
		gui/_proj_workspace \
		gui/__proj_workspace \
		gui/browser_tool \
		gui/_browser_tool \
		gui/__browser_tool \
		gui/context \
		gui/_context \
		gui/__context \
		gui/sys_messages \
		gui/_sys_messages \
		gui/__sys_messages \
		gui/listener \
		winsys/podium \
	 	gui/_listener \
		winsys/_podium \
	 	gui/__listener \
		winsys/__podium \
		interpreter/xinterpreter

XGUISRC =	$(XMSRC) $(XCAPISRC) $(GUI)

TAGS =		ml_utils/mltags

ETAGS =		ml_utils/mletags

SCRIPT =	utils/option \
		utils/__option \
		main/mlworks_io \
		main/_mlworks_io \
		main/__mlworks_io \
		ml_utils/script

ARSRC =		utils/lists \
		utils/_lists \
		utils/__lists \
		ml_utils/ml_ar

.PRECIOUS: pervasive.img lexer.img typechecker.img shell.img gui.img batch.img basis.img foreign.img
.SILENT:

profile:
	$(MAKE_COMMAND) RUNTIMEOPTS="-verbose -c 2 -profile -profile-frequency 100"

clean:
	echo $(RM) *.img
	$(RM) *.img

backup:
	echo 'make: moving *.img to *.img~'
	for image in *.img; do mv $$image $$image~; done


PERVASIVEMO =   $(addsuffix .mo,$(addprefix $(SRC)/pervasive/,$(join $(dir $(PERVASIVE)),$(notdir $(PERVASIVE)))))
LEXERMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(LEXER))))
PARSERMO =      $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(PARSER))))
TYPERMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(TYPER))))
COMPILERMO =    $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(COMPILER))))
BATCHMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(BATCH))))
SHELLMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(SHELLSRC))))
INTERMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(INTERSRC))))
TTYMO =         $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(TTYSRC))))
XGUIMO =        $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(XGUISRC))))
TAGSMO =        $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(TAGS))))
ETAGSMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(ETAGS))))
SCRIPTMO =      $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(SCRIPT))))
ARMO =          $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(ARSRC))))
BASISMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(BASISSRC))))
BASIS_LOADERMO =        $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(BASIS_LOADER))))
XMMO =          $(addsuffix .mo,$(addprefix $(XMOBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(XMSRC))))
TERMINALMO =    $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(TERMINAL))))
WINDOWSMO =     $(addsuffix .mo,$(addprefix $(WINDOWSOBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(WINDOWSSRC))))


BASIS_TARGETSMO = $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(BASIS_TARGETS)))) 
FOREIGNMO = 	$(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(FOREIGN))))
STUBGENMO = 	$(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(STUB_GEN))))

BASIS_AND_LOADERMO = $(BASIS_LOADERMO)

lexer-files: force
	echo $(LEXERMO) > $@@

pervasive-files: force
	echo $(PERVASIVEMO) > $@@

typer-files: force
	echo $(PARSERMO) $(TYPERMO) > $@@

basis-files: force
	echo $(BASIS_LOADERMO) > $@@

foreign-files: force
	echo $(BASIS_TARGETSMO) $(FOREIGNMO) $(STUBGENMO) > $@@

batch-files: force
	echo $(COMPILERMO) $(BATCHMO) > $@@

tty-files: force
	echo $(COMPILERMO) $(BATCHMO) $(SHELLMO) $(INTERMO) $(TTYMO) > $@@

xm-files: force
	echo $(XMMO) > xm-files

gui-files: force
	echo $(COMPILERMO) $(BATCHMO) $(SHELLMO) $(INTERMO) $(XGUIMO) > $@@

gui2-files: force
	echo $(INTERMO) $(XGUIMO) > gui2-files

tags-files: force
	echo $(TAGSMO) > tags-files

etags-files: force
	echo $(ETAGSMO) > etags-files

script-files: force
	echo $(SCRIPTMO) > script-files

ar-files: force
	echo $(ARMO) > ar-files

pervasive.img: $(PERVASIVEMO)
	echo make: $@@
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -save $@@ $(PERVASIVEMO) MLWargs

basis.img: pervasive.img $(BASISMO)
	echo make: $@@
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load pervasive.img -save $@@ $(BASISMO) MLWargs

$(FOREIGNMO): batch.img
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load batch.img MLWargs -pervasive-dir ../../../pervasive -project ../../../foreign/foreign.mlp -configuration $(ARCH_OS) -build

foreign.img: basis.img $(FOREIGNMO) $(BASIS_TARGETSMO)
	echo make: $@@
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load basis.img -save $@@ $(BASIS_TARGETSMO) $(FOREIGNMO) MLWargs

$(XMMO): batch.img
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load batch.img MLWargs -pervasive-dir ../../../pervasive -project ../../../motif/xm.mlp -configuration $(ARCH_OS) -build

xm.img: basis.img $(XMMO)
	echo make: $@@
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load basis.img -save $@@ $(TERMINALMO) $(XMMO) MLWargs

$(WINDOWSMO): batch.img
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load batch.img MLWargs -pervasive-dir ../../../pervasive -project ../../../mswindows/windows.mlp -configuration $(ARCH_OS) -build

windows.img: basis.img $(TERMINALMO) $(WINDOWSMO)
	echo make: $@@
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load basis.img -save $@@ $(TERMINALMO) $(WINDOWSMO) MLWargs

lexer.img: pervasive.img $(LEXERMO)
	echo make: $@@
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load pervasive.img -save $@@ $(LEXERMO) MLWargs

typechecker.img: lexer.img $(PARSERMO) $(TYPERMO)
	echo make: $@@
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -save $@@ -load lexer.img $(PARSERMO) $(TYPERMO) MLWargs -parser-tables $(SRC)/parser/ml-tables/

batch.img: typechecker.img $(COMPILERMO) $(BATCHMO)
	echo make: $@@
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load typechecker.img $(COMPILERMO) $(BATCHMO) MLWargs -verbose -save $@@
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load batch.img MLWargs -pervasive-dir ../../../pervasive -project ../../../utils/utils.mlp -configuration $(ARCH_OS) -build

distribution: $(DISTRIBUTED_IMAGES) 
ifdef OS
ifdef ARCH
	-cd $(DISTDIR) && $(RM) -rf images/$(ARCH)/$(OS)
	-$(MKDIR) $(DISTDIR)/images
	-$(MKDIR) $(DISTDIR)/images/$(ARCH)
	-$(MKDIR) $(DISTDIR)/images/$(ARCH)/$(OS)
ifeq "$(NTTYPE)" "TRUE"
	$(CP) $(DISTRIBUTED_IMAGES) $(DISTDIR)/images/$(ARCH)/$(OS)
else
	for image in $(DISTRIBUTED_IMAGES); do $(COMPRESS) -c $$image > $(DISTDIR)/images/$(ARCH)/$(OS)/$$image.Z; done
endif
else
	@@echo Cannot make distribution, ARCH not set
	exit 1
endif
else
	@@echo Cannot make distribution, OS not set
	exit 1
endif

force:
@


1.195
log
@[Bug #190553]
Added os_exit.
@
text
@d8 4
d626 14
a639 12
FOREIGN = basis/require_all \
	  basis/platform_specific_exports \
	  mlworks_c_pointer \
	  mlworks_c_interface \
	  __mlworks_c_interface \
	  _mlworks_c_pointer \
	  mlworks_dynamic_library \
	  __mlworks_dynamic_library \
	  mlworks_c_resource \
	  __mlworks_c_resource \
	  mlworks_c_io \
	  __mlworks_c_io
d812 1
a812 1
BASIS_LOADER = 	$(BASISSRC) basis/require_all $(SYSTEM)/platform_specific_exports
d1287 2
d1307 1
a1307 1
	echo $(FOREIGNMO) $(STUBGENMO) > $@@
d1347 1
a1347 1
foreign.img: basis.img $(FOREIGNMO)
d1349 1
a1349 1
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load basis.img -save $@@ $(FOREIGNMO) MLWargs
@


1.194
log
@[Bug #190506]
Make sure foreign mos are built before making image.
Also change format of targets for building windows, xm, and foreign images.
@
text
@d8 5
d725 2
d1033 2
d1044 2
@


1.193
log
@[Bug #190530]
make utils/mutex mos after making batch image.
@
text
@d8 4
d1325 3
d1332 1
a1332 1
xm.mo: batch.img
d1339 1
a1339 1
windows_gui.mo: batch.img
@


1.193.1.1
log
@branched from trunk for label MLW_daveb_inline_1_4_99
@
text
@a7 4
# Revision 1.193  1999/03/18  12:18:22  johnh
# [Bug #190530]
# make utils/mutex mos after making batch image.
#
@


1.192
log
@[Bug #190529]
Add stub generator files to foreign-files
@
text
@d8 4
d1350 1
@


1.191
log
@[Bug #190526]
Include require_all in basis-files
@
text
@d8 4
d622 8
d1263 1
d1280 1
a1280 1
	echo $(FOREIGNMO) > $@@
@


1.190
log
@[Bug #190506]
Remove old FI.  Still keep foreign.img but change it to make the new FI.
@
text
@d8 4
d1264 1
a1264 1
	echo $(BASISMO) > $@@
@


1.189
log
@[Bug #30286]
Export Unix and Windows structures
@
text
@d8 4
d601 12
a612 14
FOREIGN_SIGS =        mlworks_dynamic_library.sml \
		mlworks_c_pointer.sml \
		mlworks_c_interface.sml \
		mlworks_c_resource.sml \
		mlworks_c_io.sml

FOREIGN_STRUCT_FUNCT = \
		__mlworks_dynamic_library.sml \
		__mlworks_c_interface.sml \
		__mlworks_c_resource.sml \
		_mlworks_c_pointer.sml \
		__mlworks_c_io.sml

# FOREIGN_FILES = $(FOREIGN_SIGS) $(FOREIGN_STRUCT_FUNCT)
a776 22
FOREIGN_SRC =	foreign/__libml \
		foreign/__static_bytearray \
		foreign/__types \
		foreign/__utils \
		foreign/__store \
		foreign/__core \
		foreign/__aliens \
		foreign/__object \
		foreign/__structure \
		foreign/__c_object \
		foreign/__signature \
		foreign/__c_signature \
		foreign/__c_structure \
		foreign/__c_function \
		foreign/__foreign

FOREIGN =	utils/map\
		utils/_b23tree\
		utils/__btree\
		foreign/interface\
		foreign/__interface

d1096 1
a1096 1
		$(SYSTEM)/platform_specific_exports \
d1100 1
a1100 1
XMSRC =		$(TERMINAL) motif/xm \
d1104 3
a1106 2
WINDOWSSRC =    $(TERMINAL) \
		winsys/windows_gui \
d1110 2
d1211 1
a1211 1
.PRECIOUS: pervasive.img lexer.img typechecker.img shell.img gui.img batch.img basis.img
d1242 3
a1244 2
XMMO =          $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(XMSRC))))
WINDOWSMO =     $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/$(MODE)/, $(notdir $(WINDOWSSRC))))
a1246 1
FOREIGN_MODULES = 	$(addsuffix .sml,$(addprefix $(SRC)/,$(join $(dir $(FOREIGN_SRC)),$(notdir $(FOREIGN_SRC)))))
d1248 1
a1248 1
BASIS_AND_LOADERMO = $(BASISMO) $(BASIS_LOADERMO)
a1299 8
$(OBJ)/$(ARCH_OS)/$(MODE)/__interface.mo $(OBJ)/$(ARCH_OS)/$(MODE)/interface.mo: batch.img $(SRC)/foreign/interface.sml $(SRC)/foreign/__interface.sml
	$(SRC)/rts/runtime -MLWpass MLWargs -load batch.img MLWargs -local-functions on -pervasive-dir $(SRC)/pervasive -project $(SRC)/foreign/foreign.mlp -configuration $(ARCH_OS) -build


$(SRC)/foreign/__interface.sml $(SRC)/foreign/interface.sml: batch.img $(FOREIGN_MODULES)
	@@echo make: Constructing $@@.
	@@sh -c '$(SRC)/foreign/mk_interface.sh'

d1304 3
d1309 4
a1312 1
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load basis.img -save $@@ $(XMMO) MLWargs
d1314 1
a1314 1
windows.img: basis.img $(WINDOWSMO)
d1316 1
a1316 1
	$(RUNTIME) -MLWpass MLWargs $(RUNTIMEOPTS) -load basis.img -save $@@ $(WINDOWSMO) MLWargs
@


1.188
log
@[Bug #190508]
Load the sockets files for the basis
@
text
@d8 4
d773 1
a773 1
BASIS_LOADER = 	$(BASISSRC) basis/require_all
d1116 1
@


1.187
log
@[Bug #190505]
Support for precompilation of subprojects
@
text
@d8 4
d747 19
a765 2
		basis/__general
		
@


1.186
log
@[Bug #70204]
Load __list_pair in before _shell_utils
@
text
@d8 4
d612 1
a612 3
BASIS1 =	basis/general \
		basis/__general \
		basis/__pre_basis \
a617 3
		utils/lists \
		utils/_lists \
		utils/__lists \
d741 3
a743 1
		basis/__option
d748 1
a748 1
BASIS_LOADER = 	basis/require_all
d772 1
a772 22
LEXER1 =	basis/general \
		basis/__general \
		basis/__pre_basis \
		basis/__pre_string_cvt \
		basis/string_cvt \
		basis/__string_cvt \
		basis/__pre_int \
		basis/__pre_word32 \
		basis/__pre_int32 \
		basis/__pre_word \
		basis/integer \
                basis/__large_int \
		basis/word \
		basis/__word \
		basis/__int \
		basis/char \
		basis/__pre_char \
		basis/__char \
		basis/list \
		basis/__list \
		basis/string \
		basis/__string \
d784 2
a785 30
		utils/intnewmap \
		basis/mono_vector \
		basis/__char_vector \
		basis/mono_array \
		basis/__char_array \
		basis/__word8 \
		basis/__word8_vector \
		basis/__word8_array \
		basis/__position \
		basis/math \
		basis/__math \
		basis/__pre_ieee_real \
		basis/__pre_real \
		basis/ieee_real \
		basis/__ieee_real \
		basis/real \
		basis/__real \
                basis/__large_real \
		basis/time \
		$(SYSTEM)/__time \
		basis/io \
		basis/__io \
		basis/stream_io \
		basis/imperative_io \
		basis/os_file_sys \
		basis/os_path \
		basis/os_process \
		basis/os_io \
		basis/os \
		basis/__word32 
d787 1
a787 27
LEXER2 =	$(SYSTEM)/_os \
		$(SYSTEM)/_os_file_sys \
		$(SYSTEM)/__os_path \
		$(SYSTEM)/__os_file_sys \
		basis/exit \
		basis/__exit \
		basis/_os_process \
		basis/__os_process \
		$(SYSTEM)/_os_io \
		$(SYSTEM)/__os_io \
		$(SYSTEM)/__os \
		basis/prim_io \
		basis/_prim_io \
		basis/__text_prim_io \
		basis/substring \
		basis/__substring \
       		basis/text_stream_io \
		basis/text_io \
		basis/os_prim_io \
		basis/_imperative_io \
		basis/__bin_prim_io \
		$(SYSTEM)/__os_prim_io \
		basis/_stream_io \
		basis/__text_stream_io \
		basis/_text_io \
		basis/__text_io \
		main/info \
d992 3
a994 1
BATCH =		main/license \
d1001 8
a1008 1
SHELLSRC =	main/preferences \
d1067 2
d1083 2
a1084 1
		interpreter/__tty_listener
d1090 2
a1091 1
TERMINAL =	utils/terminal \
d1098 2
a1099 1
WINDOWSSRC =    $(TERMINAL) winsys/windows_gui \
d1260 1
a1260 1
	echo $(COMPILERMO) $(SHELLMO) $(INTERMO) $(TTYMO) > $@@
d1266 1
a1266 1
	echo $(COMPILERMO) $(SHELLMO) $(INTERMO) $(XGUIMO) > $@@
@


1.185
log
@[Bug #70203]
Modify for alternative argument scheme
@
text
@d8 4
d1112 2
@


1.184
log
@[Bug #30487]
Load __large_real before loading time
@
text
@d8 4
d1339 1
a1339 1
	$(RUNTIME) $(RUNTIMEOPTS) -save $@@ $(PERVASIVEMO)
d1343 1
a1343 1
	$(RUNTIME) $(RUNTIMEOPTS) -load pervasive.img -save $@@ $(BASISMO)
d1346 1
a1346 1
	$(SRC)/rts/runtime -load batch.img -pass args -local-functions on -pervasive-dir $(SRC)/pervasive -project $(SRC)/foreign/foreign.mlp -configuration $(ARCH_OS) -build args
d1355 1
a1355 1
	$(RUNTIME) $(RUNTIMEOPTS) -load basis.img -save $@@ $(FOREIGNMO)
d1359 1
a1359 1
	$(RUNTIME) $(RUNTIMEOPTS) -load basis.img -save $@@ $(XMMO)
d1363 1
a1363 1
	$(RUNTIME) $(RUNTIMEOPTS) -load basis.img -save $@@ $(WINDOWSMO)
d1367 1
a1367 5
	$(RUNTIME) $(RUNTIMEOPTS) -load pervasive.img -save $@@ $(LEXERMO)

parser.img: lexer.img $(PARSERMO)
	echo make: $@@
	$(RUNTIME) $(RUNTIMEOPTS) -load lexer.img -save $@@ $(PARSERMO)
d1371 1
a1371 1
	$(RUNTIME) $(RUNTIMEOPTS) -pass args -parser-tables $(SRC)/parser/ml-tables/ args -save $@@ -load lexer.img $(PARSERMO) $(TYPERMO)
d1375 1
a1375 17
	$(RUNTIME) $(RUNTIMEOPTS) -pass wombats -verbose -save $@@ wombats -load typechecker.img $(COMPILERMO) $(BATCHMO)

mltags.img: lexer.img $(TAGSMO)
	echo make: $@@ from lexer.img
	$(RUNTIME) $(RUNTIMEOPTS) -pass wombats -save $@@ wombats -load lexer.img $(TAGSMO)

mletags.img: lexer.img $(ETAGSMO)
	echo make: $@@ from lexer.img
	$(RUNTIME) $(RUNTIMEOPTS) -pass wombats -save $@@ wombats -load lexer.img $(ETAGSMO)

script.img: lexer.img $(SCRIPTMO)
	echo make: $@@ from lexer.img
	$(RUNTIME) $(RUNTIMEOPTS) -pass wombats -save $@@ wombats -load lexer.img $(SCRIPTMO)

ml_ar.img: pervasive.img $(ARMO)
	echo make: $@@ from pervasive.img
	$(RUNTIME) $(RUNTIMEOPTS) -pass wombats -save $@@ wombats -load pervasive.img $(ARMO)
@


1.183
log
@[Bug #30470]
Add the Option structure to the distribution
@
text
@d8 4
d813 1
@


1.182
log
@[Bug #20122]
Move pervasive signatures into __pervasive_library.sml
@
text
@d8 4
d728 3
a730 1
		basis/__command_line 
@


1.181
log
@[Bug #30411]
CommandLine structure required by Motif Capi.
@
text
@d8 4
d587 1
a587 3
PERVASIVE =	__builtin_library bytearray bits array \
		floatarray string vector general \
		mlworks __pervasive_library 
@


1.180
log
@[Bug #30354]
Temporarily restore old FI to distribution
@
text
@d8 4
d1143 2
@


1.179
log
@[Bug #50079]
simplify distribution archival of images
@
text
@d8 4
d554 1
a554 1
COMMON_DISTRIBUTED_IMAGES = pervasive.img batch.img gui.img basis.img guib.img
a555 1
DISTRIBUTED_IMAGES = $(COMMON_DISTRIBUTED_IMAGES) $(PLATFORM_DISTRIBUTED_IMAGES)
d561 1
a561 1
FOREIGN_SIGS =	mlworks_dynamic_library.sml \
d572 1
a572 1
		__mlworks_c_io.sml 
d574 3
a576 1
FOREIGN_FILES = $(FOREIGN_SIGS) $(FOREIGN_STRUCT_FUNCT)
d725 21
d1132 3
a1134 3
WINDOWSSRC =	$(TERMINAL) winsys/windows_gui \
		winsys/_windows_gui \
		winsys/__windows_gui
d1247 1
d1266 4
d1284 3
a1313 6
foreign-sigs: force
	echo $(FOREIGN_SIGS:%=foreign/$(ARCH_OS)%) > $@@

foreign-objects: force
	echo $(FOREIGN_FILES:%.sml=foreign/$(ARCH_OS)%.mo) > $@@

d1322 7
a1328 8
#
# Ensure that the foreign objects are built.  Normally mos are built when
# the images are created, but unfortunately the foreign code is yet used
# by any image and so is not compiled as default.  
# This hack can be removed once the foreign interface is used in MLWorks.
#
$(FOREIGN_FILES:%.sml=$(SRC)/foreign/$(ARCH_OS)%.mo): batch.img $(FOREIGN_FILES:%=$(SRC)/foreign/%)
	$(SRC)/rts/runtime -load batch.img -pass args -local-functions on -pervasive-dir $(SRC)/pervasive -source-path $(SRC) -object-path %S/%C/$(ARCH_OS) -compile $(FOREIGN_FILES:%=$(SRC)/foreign/%) args
d1330 3
a1372 1

@


1.178
log
@[Bug #30229]
specify local_functions on to batch compiler.
@
text
@d8 4
d536 1
a536 1
MKDIR =		mkdir
d539 1
a539 1
COMPRESS =	compress -v
d1355 1
a1355 3
	$(COMPRESS) $(DISTRIBUTED_IMAGES)
	$(CP) $(DISTRIBUTED_IMAGES:%=%.Z) $(DISTDIR)/images/$(ARCH)/$(OS)
	$(UNCOMPRESS) $(DISTRIBUTED_IMAGES)
@


1.177
log
@[Bug #70086]
Integrate Windows structure and signature
@
text
@d8 4
d1297 1
a1297 1
	$(SRC)/rts/runtime -load batch.img -pass args -pervasive-dir $(SRC)/pervasive -source-path $(SRC) -object-path %S/%C/$(ARCH_OS) -compile $(FOREIGN_FILES:%=$(SRC)/foreign/%) args
@


1.176
log
@[Bug #70089]
Add __sys_word to list of basis files
@
text
@d8 4
d708 1
a708 1
BASISSRC = 	$(BASIS1) $(LEXERSYS) $(PARSERSYS) $(BASIS2) $(BASISSYS) $(BASIS3) $(TIMER)
@


1.175
log
@[Bug #70086]
*windows has moved to *windows_gui
@
text
@d8 4
d591 1
a591 1
		basis/integer \
@


1.174
log
@[Bug #70077]
Removing path, _unixpath, _win_ntpath and __path
These are replaced by OS.Path
@
text
@d8 5
d1090 3
a1092 3
WINDOWSSRC =	$(TERMINAL) winsys/windows \
		winsys/_windows \
		winsys/__windows
@


1.173
log
@[Bug #50047]
__timer.mo should appear in the distribution of the basis, i.e.,
in BASISSRC
@
text
@d8 5
a620 1
		basis/path \
a764 1
		basis/path \
d836 1
a836 2
PARSER2 =	$(SYSTEM)/__path \
		basics/module_id \
@


1.172
log
@[Bug #50052]
Include command_line structure in basis distribution
@
text
@d8 4
d552 3
d691 1
a691 1
BASISSRC = 	$(BASIS1) $(LEXERSYS) $(PARSERSYS) $(BASIS2) $(BASISSYS) $(BASIS3)
d757 1
a757 1
		basis/__word32 \
d817 1
a817 2
		basis/timer \
		basis/__timer \
a819 1
		lexer/lexer \
d823 1
a823 1
LEXER =	$(LEXER1) $(LEXERSYS) $(LEXER2)
@


1.171
log
@[Bug #30362]
objects directory now extended to allow for different modes.
@
text
@d8 4
d679 4
a682 1
		basis/__sml90
@


1.170
log
@[Bug #70065]
Make terminal available to windows.img and xm.img
@
text
@d8 4
d1187 17
a1203 17
LEXERMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(LEXER))))
PARSERMO =      $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(PARSER))))
TYPERMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(TYPER))))
COMPILERMO =    $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(COMPILER))))
BATCHMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(BATCH))))
SHELLMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(SHELLSRC))))
INTERMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(INTERSRC))))
TTYMO =         $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(TTYSRC))))
XGUIMO =        $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(XGUISRC))))
TAGSMO =        $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(TAGS))))
ETAGSMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(ETAGS))))
SCRIPTMO =      $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(SCRIPT))))
ARMO =          $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(ARSRC))))
BASISMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(BASISSRC))))
BASIS_LOADERMO =        $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(BASIS_LOADER))))
XMMO =          $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(XMSRC))))
WINDOWSMO =     $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(WINDOWSSRC))))
@


1.169
log
@[Bug #30306]
Remove FI-related targets
@
text
@d8 4
d1060 4
a1063 1
XMSRC =		motif/xm \
d1067 1
a1067 1
WINDOWSSRC =	winsys/windows \
@


1.168
log
@[Bug #30071]
Change order of loading basis/__date
@
text
@d8 4
a530 2
DISTRIBUTED_MOS = $(FOREIGN_FILES:%.sml=$(SRC)/foreign/$(ARCH_OS)%.mo)

d1299 1
a1299 1
distribution: $(DISTRIBUTED_IMAGES) foreign-sigs foreign-objects $(DISTRIBUTED_MOS)
@


1.167
log
@[Bug #30071]
Merge in Project Workspace changes.
@
text
@d8 4
a723 2
		basis/date \
		basis/__date \
d1075 3
a1077 1
GUI =		interpreter/entry \
@


1.166
log
@[Bug #30329]
Added basis/__wordN_array2.
@
text
@d8 4
d36 25
d482 2
d720 2
d793 2
a794 2
		utils/timer \
		utils/__timer \
a1025 3
		interpreter/action_queue \
		interpreter/_action_queue \
		interpreter/__action_queue \
d1114 6
a1119 3
		gui/comp_manager \
		gui/_comp_manager \
		gui/__comp_manager \
d1145 3
a1147 3
		main/io \
		main/_io \
		main/__io \
d1168 19
a1186 19
ARCH_OS =
PERVASIVEMO =	$(addsuffix .mo,$(addprefix $(SRC)/pervasive/,$(join $(dir $(PERVASIVE)),$(addprefix $(ARCH_OS), $(notdir $(PERVASIVE))))))
LEXERMO =	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(LEXER)),$(addprefix $(ARCH_OS), $(notdir $(LEXER))))))
PARSERMO =	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(PARSER)),$(addprefix $(ARCH_OS), $(notdir $(PARSER))))))
TYPERMO =	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(TYPER)),$(addprefix $(ARCH_OS), $(notdir $(TYPER))))))
COMPILERMO =	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(COMPILER)),$(addprefix $(ARCH_OS), $(notdir $(COMPILER))))))
BATCHMO =	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(BATCH)),$(addprefix $(ARCH_OS), $(notdir $(BATCH))))))
SHELLMO =	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(SHELLSRC)),$(addprefix $(ARCH_OS), $(notdir $(SHELLSRC))))))
INTERMO =	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(INTERSRC)),$(addprefix $(ARCH_OS), $(notdir $(INTERSRC))))))
TTYMO =		$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(TTYSRC)),$(addprefix $(ARCH_OS), $(notdir $(TTYSRC))))))
XGUIMO =	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(XGUISRC)),$(addprefix $(ARCH_OS), $(notdir $(XGUISRC))))))
TAGSMO =	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(TAGS)),$(addprefix $(ARCH_OS), $(notdir $(TAGS))))))
ETAGSMO =	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(ETAGS)),$(addprefix $(ARCH_OS), $(notdir $(ETAGS))))))
SCRIPTMO =	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(SCRIPT)),$(addprefix $(ARCH_OS), $(notdir $(SCRIPT))))))
ARMO =		$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(ARSRC)),$(addprefix $(ARCH_OS), $(notdir $(ARSRC))))))
BASISMO = 	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(BASISSRC)),$(addprefix $(ARCH_OS), $(notdir $(BASISSRC))))))
BASIS_LOADERMO = 	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(BASIS_LOADER)),$(addprefix $(ARCH_OS), $(notdir $(BASIS_LOADER))))))
XMMO =		$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(XMSRC)),$(addprefix $(ARCH_OS), $(notdir $(XMSRC))))))
WINDOWSMO =		$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(WINDOWSSRC)),$(addprefix $(ARCH_OS), $(notdir $(WINDOWSSRC))))))
@


1.165
log
@[Bug #30329]
Removed mono_array2 from basis files.
@
text
@d8 4
d571 1
d608 1
d611 1
d614 1
@


1.164
log
@[Bug #30304]
Added SML90 to the basis library.
@
text
@d8 4
a566 1
		basis/_mono_array2 \
@


1.163
log
@[Bug #30089]
Utils/__timer now needs basis/__timer
@
text
@d8 4
d617 3
a619 1
		basis/__bin_io
@


1.162
log
@[Bug #30193]
Add *sys_messages.sml to gui.
@
text
@d8 4
a555 1
		basis/timer \
a595 1
		basis/__timer \
d741 2
@


1.161
log
@[Bug #70010]
Remove references to sml90 as these are no longer used
@
text
@d8 4
d1072 3
@


1.160
log
@[Bug #30153]
Change Old and OLD to SML90.
@
text
@d8 4
a751 2
		basis/sml90 \
		basis/__sml90 \
@


1.159
log
@[Bug #30245]
ARRAY2 now depends on Vector.
@
text
@d8 4
d748 2
a749 2
		basis/old \
		basis/__old \
@


1.159.2.1
log
@branched from trunk for label MLWorks_workspace_97
@
text
@a7 4
# Revision 1.159  1997/08/08  15:11:04  brucem
# [Bug #30245]
# ARRAY2 now depends on Vector.
#
@


1.159.2.2
log
@[Bug #30071]
Redesign Compilation Manager -> Project Workspace.
New files: *proj_workspace and *proj_properties.  Removed: *comp_manager.
@
text
@d1057 3
a1059 6
		gui/proj_properties \
		gui/_proj_properties \
		gui/__proj_properties \
		gui/proj_workspace \
		gui/_proj_workspace \
		gui/__proj_workspace \
@


1.159.2.3
log
@[Bug #30326]
Renamed utils/*timer to utils/*mlworks_timer and main/*io to main/*mlworks_io.
@
text
@a7 5
# Revision 1.159.2.2  1997/09/12  14:52:41  johnh
# [Bug #30071]
# Redesign Compilation Manager -> Project Workspace.
# New files: *proj_workspace and *proj_properties.  Removed: *comp_manager.
#
d731 2
a732 2
		utils/mlworks_timer \
		utils/__mlworks_timer \
d1085 3
a1087 3
		main/mlworks_io \
		main/_mlworks_io \
		main/__mlworks_io \
@


1.159.2.4
log
@[Bug #30071]
Object files are now found in a separate directory.
@
text
@a7 4
# Revision 1.159.2.3  1997/11/25  14:23:42  daveb
# [Bug #30326]
# Renamed utils/*timer to utils/*mlworks_timer and main/*io to main/*mlworks_io.
#
a433 2
OBJ =           ../../../../objects

d1114 18
a1131 18
PERVASIVEMO =   $(addsuffix .mo,$(addprefix $(SRC)/pervasive/,$(join $(dir $(PERVASIVE)),$(notdir $(PERVASIVE)))))
LEXERMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(LEXER))))
PARSERMO =      $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(PARSER))))
TYPERMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(TYPER))))
COMPILERMO =    $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(COMPILER))))
BATCHMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(BATCH))))
SHELLMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(SHELLSRC))))
INTERMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(INTERSRC))))
TTYMO =         $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(TTYSRC))))
XGUIMO =        $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(XGUISRC))))
TAGSMO =        $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(TAGS))))
ETAGSMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(ETAGS))))
SCRIPTMO =      $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(SCRIPT))))
ARMO =          $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(ARSRC))))
BASISMO =       $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(BASISSRC))))
BASIS_LOADERMO =        $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(BASIS_LOADER))))
XMMO =          $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(XMSRC))))
WINDOWSMO =     $(addsuffix .mo,$(addprefix $(OBJ)/$(ARCH_OS)/, $(notdir $(WINDOWSSRC))))
@


1.159.2.5
log
@[Bug #30071]
Removed *action_queue.
@
text
@a7 4
# Revision 1.159.2.4  1997/11/25  20:24:12  daveb
# [Bug #30071]
# Object files are now found in a separate directory.
#
d977 3
@


1.159.2.6
log
@[Bug #30071]
Add basis/date and basis/__date to LEXER1.
@
text
@a7 4
# Revision 1.159.2.5  1997/11/26  14:11:33  daveb
# [Bug #30071]
# Removed *action_queue.
#
a676 2
		basis/date \
		basis/__date \
@


1.159.2.7
log
@[Bug #30071]
Set ARCH_OS in sub-Makefiles.
@
text
@a7 4
# Revision 1.159.2.6  1997/12/12  15:17:32  johnh
# [Bug #30071]
# Add basis/date and basis/__date to LEXER1.
#
d1126 1
a1126 1

@


1.159.1.1
log
@branched from trunk for label MLWorks_dt_wizard
@
text
@a7 4
# Revision 1.159  1997/08/08  15:11:04  brucem
# [Bug #30245]
# ARRAY2 now depends on Vector.
#
@


1.159.1.2
log
@Add Datatype Wizard.
@
text
@a481 2
                basis/option \
                basis/__option \
a1015 77
SML_YACC_STUFF = \
		sml-yacc/lib/base \
		sml-yacc/lib/join \
 		sml-yacc/lib/lrtable \
		sml-yacc/lib/stream \
		sml-yacc/lib/parser2 

WHATEVER = 	basis/option \
		basis/__option \
                basis/list_pair \
                basis/__list_pair \
                basis/array \
                basis/__array \

DT_WIZARD =	dt_wizard/wiz_util \
		dt_wizard/result\
                dt_wizard/__result \
                dt_wizard/string_utils \
                dt_wizard/__string_utils \
                dt_wizard/name_utils \
                dt_wizard/_name_utils \
                dt_wizard/__name_utils \
		dt_wizard/config \
                dt_wizard/_config \
                dt_wizard/__config \
                dt_wizard/abs_syntax \
                dt_wizard/__abs_syntax \
                dt_wizard/abs_syn_utils \
                dt_wizard/_abs_syn_utils \
                dt_wizard/__abs_syn_utils \
                dt_wizard/abs_syn_strings \
                dt_wizard/_abs_syn_strings \
                dt_wizard/__abs_syn_strings \
		dt_wizard/make_fun \
		dt_wizard/_make_fun \
		dt_wizard/__make_fun \
		dt_wizard/_make_app \
		dt_wizard/__make_app \
		dt_wizard/_make_cmp \
		dt_wizard/__make_cmp \
		dt_wizard/_make_depth \
		dt_wizard/__make_depth \
		dt_wizard/_make_eq \
		dt_wizard/__make_eq \
                dt_wizard/_make_quantifier \
		dt_wizard/__make_exists \
		dt_wizard/__make_all \
		dt_wizard/_make_find \
		dt_wizard/__make_find \
		dt_wizard/_make_fold \
		dt_wizard/__make_fold \
		dt_wizard/_make_is_empty \
		dt_wizard/__make_is_empty \
		dt_wizard/_make_map \
		dt_wizard/__make_map \
		dt_wizard/_make_size \
		dt_wizard/__make_size \
		dt_wizard/_make_to_string \
		dt_wizard/__make_to_string \
		dt_wizard/_make_sig_and_struct \
		dt_wizard/__make_sig_and_struct \
                dt_wizard/elab \
                dt_wizard/_elab \
                dt_wizard/__elab \
                $(SML_YACC_STUFF) \
                dt_wizard/lex_parse_interface \
		dt_wizard/__lex_parse_interface \
                dt_wizard/dt_grm \
                dt_wizard/_dt_grm \
                dt_wizard/dt_lex \
		dt_wizard/parser \
                dt_wizard/_parser \
                dt_wizard/__parser \
		dt_wizard/wizard \
		dt_wizard/_wizard \
                dt_wizard/__wizard

a1066 5
                $(WHATEVER) \
                $(DT_WIZARD) \
                gui/dt_wizard \
                gui/_dt_wizard \
                gui/__dt_wizard \
@


1.158
log
@[Bug #30090]
Moved load of __old.
@
text
@d8 4
d509 1
a511 1
		basis/__vector \
@


1.157
log
@[Bug #30029]
The MLWorks<->C interface has grown.  Replace {__}c.sml with
{__}mlworks_c_interface, {__}mlworks_c_io, {__}mlworks_dynamic_library,
{__,}mlworks_c_resource and {_,}mlworks_c_pointer.sml
@
text
@d8 6
a623 2
		basis/old \
		basis/__old \
d740 2
@


1.156
log
@[Bug #30174]
Making podium platform specific.
@
text
@d8 4
d435 20
a454 1
DISTRIBUTED_MOS = $(SRC)/foreign/$(ARCH_OS)__c.mo $(SRC)/foreign/$(ARCH_OS)c.mo
d1151 6
d1166 4
a1169 2
# The following hack can go as soon as MLWorks uses the new FI internally
# to load up parts of itself (say the GUI).
d1171 2
a1172 2
$(SRC)/foreign/$(ARCH_OS)__c.mo $(SRC)/foreign/$(ARCH_OS)c.mo: batch.img $(SRC)/foreign/c.sml $(SRC)/foreign/__c.sml
	$(SRC)/rts/runtime -load batch.img -pass args -pervasive-dir $(SRC)/pervasive -source-path $(SRC) -object-path %S/%C/$(ARCH_OS) -compile-file $(SRC)/foreign/c $(SRC)/foreign/__c args
d1216 1
a1216 1
distribution: $(DISTRIBUTED_IMAGES) $(DISTRIBUTED_MOS)
@


1.155
log
@[Bug #30068]
Make Breakpoint and Trace Managers top level tools - added new files.
@
text
@d8 4
d1030 1
a1030 1
		gui/podium \
d1032 1
a1032 1
		gui/_podium \
d1034 1
a1034 1
		gui/__podium \
@


1.154
log
@[Bug #01749]
Further basis synonym corrections
@
text
@d8 4
d992 3
@


1.153
log
@[Bug #01749]
__sys_word in LEXER1 moved to Unix-specific Makefiles
@
text
@d8 4
a628 1
		basis/__sys_word
@


1.152
log
@[Bug #30090]
Rearrangements caused by replacing MLWorks.IO by basis I/O
@
text
@d8 4
d490 1
a490 2
		basis/__large_word \
		basis/__sys_word
@


1.151
log
@[Bug #01749]
Some files now depend on basis synonym files __large_{int,real,word} and __sys_word
@
text
@d8 4
d553 1
a553 1
BASISSRC = 	$(BASIS1) $(PARSERSYS) $(BASIS2) $(BASISSYS) $(BASIS3)
d558 1
a558 1
LEXER =		basis/general \
d594 57
d688 2
d696 1
a696 20
		utils/__set \
		basis/math \
		basis/__math \
		basis/__pre_ieee_real \
		basis/ieee_real \
		basis/__ieee_real \
		basis/__pre_real \
		basis/real \
                basis/__large_real \
		basis/__real \
		basis/time \
		$(SYSTEM)/__time \
                basis/__position \
		basis/os_file_sys \
		basis/os_process \
		basis/path \
		basis/os_path \
		$(SYSTEM)/__os_path \
		basis/__word32

a698 12
		$(SYSTEM)/_os_file_sys \
		$(SYSTEM)/__os_file_sys \
		basis/exit \
		basis/__exit \
		basis/_os_process \
		basis/__os_process \
		basis/os_io \
		$(SYSTEM)/_os_io \
		$(SYSTEM)/__os_io \
		basis/os \
		$(SYSTEM)/_os \
		$(SYSTEM)/__os \
d857 1
a857 3
BATCH =		basis/substring \
		basis/__substring \
       		main/license \
a923 2
		basis/substring \
		basis/__substring \
@


1.150
log
@[Bug #30121]
Move to new FI: remove foreign.img and related rules.
@
text
@d8 4
d435 2
d468 1
d481 3
a483 1
		$(SYSTEM)/__os_path
d564 2
a567 1
		basis/integer \
d641 1
@


1.149
log
@Fix building of foreign.img when ARCH_OS is set
@
text
@d8 3
d402 8
a409 6
COMMONDIST =	pervasive.img batch.img gui.img basis.img foreign.img guib.img
ifeq "$(NTTYPE)" "TRUE"
DISTRIBUTED =	$(COMMONDIST) windows.img
else
DISTRIBUTED =	$(COMMONDIST) xm.img
endif
a543 21
FOREIGN_SRC =	foreign/__libml \
		foreign/__static_bytearray \
		foreign/__types \
		foreign/__utils \
		foreign/__store \
		foreign/__core \
		foreign/__aliens \
		foreign/__object \
		foreign/__structure \
		foreign/__c_object \
		foreign/__signature \
		foreign/__c_signature \
		foreign/__c_structure \
		foreign/__c_function \
		foreign/__foreign

FOREIGN =	utils/map\
		utils/_b23tree\
		utils/__btree\
		foreign/interface\
		foreign/__interface
a1028 2
FOREIGNMO = 	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(FOREIGN)),$(addprefix $(ARCH_OS), $(notdir $(FOREIGN))))))
FOREIGN_MODULES = 	$(addsuffix .sml,$(addprefix $(SRC)/,$(join $(dir $(FOREIGN_SRC)),$(notdir $(FOREIGN_SRC)))))
a1044 3
foreign-files: force
	echo $(FOREIGNMO) > $@@

d1080 6
a1085 2
$(SRC)/foreign/$(ARCH_OS)__interface.mo $(SRC)/foreign/$(ARCH_OS)interface.mo: batch.img $(SRC)/foreign/interface.sml $(SRC)/foreign/__interface.sml
	$(SRC)/rts/runtime -load batch.img -pass args -pervasive-dir $(SRC)/pervasive -source-path $(SRC) -object-path %S/%C/$(ARCH_OS) -compile-file $(SRC)/foreign/interface $(SRC)/foreign/__interface args
a1086 7
$(SRC)/foreign/__interface.sml $(SRC)/foreign/interface.sml: batch.img $(FOREIGN_MODULES)
	@@echo make: Constructing $@@.
	@@sh -c '$(SRC)/foreign/mk_interface.sh'

foreign.img: basis.img $(FOREIGNMO)
	echo make: $@@
	$(RUNTIME) $(RUNTIMEOPTS) -load basis.img -save $@@ $(FOREIGNMO)
d1128 2
a1129 1
distribution:
d1137 1
a1137 1
	$(CP) $(DISTRIBUTED) $(DISTDIR)/images/$(ARCH)/$(OS)
d1139 3
a1141 3
	$(COMPRESS) $(DISTRIBUTED)
	$(CP) $(DISTRIBUTED:%=%.Z) $(DISTDIR)/images/$(ARCH)/$(OS)
	$(UNCOMPRESS) $(DISTRIBUTED)
@


1.148
log
@[Bug #1967]
Moved basis/os_path to before system/_win_ntgetenv.
@
text
@d8 4
d1046 1
a1046 1
FOREIGN_MODULES = 	$(addsuffix .sml,$(addprefix $(SRC)/,$(join $(dir $(FOREIGN_SRC)),$(addprefix $(ARCH_OS), $(notdir $(FOREIGN_SRC))))))
d1101 2
a1102 2
$(SRC)/foreign/interface.mo $(SRC)/foreign/__interface.mo: batch.img $(SRC)/foreign/interface.sml $(SRC)/foreign/__interface.sml
	$(SRC)/rts/runtime -load batch.img -pass args -pervasive-dir $(SRC)/pervasive -source-path $(SRC) -compile-file $(SRC)/foreign/interface $(SRC)/foreign/__interface args
@


1.148.1.1
log
@branched from 1.148
@
text
@a7 4
# Revision 1.148  1997/03/31  12:40:02  johnh
# [Bug #1967]
# Moved basis/os_path to before system/_win_ntgetenv.
#
@


1.148.1.1.3.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r3
@
text
@a7 3
# Revision 1.148.1.1  1997/05/12  10:50:57  hope
# branched from 1.148
#
@


1.148.1.1.2.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r2_551
@
text
@a7 3
# Revision 1.148.1.1  1997/05/12  10:50:57  hope
# branched from 1.148
#
@


1.148.1.1.1.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
@
text
@a7 3
# Revision 1.148.1.1  1997/05/12  10:50:57  hope
# branched from 1.148
#
@


1.148.1.1.1.2
log
@[Bug #30190]
Removed foreign.img.
@
text
@a7 3
# Revision 1.148.1.1.1.1  1997/07/28  18:33:10  daveb
# branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
#
d402 1
a402 1
COMMONDIST =	pervasive.img batch.img gui.img basis.img guib.img
d542 22
d1048 2
d1066 3
d1103 11
@


1.148.1.1.1.3
log
@[Bug #30198]
Don't distribute gui.img and batch.img in the Student Edition.
@
text
@a7 4
# Revision 1.148.1.1.1.2  1997/08/06  15:11:03  daveb
# [Bug #30190]
# Removed foreign.img.
#
d405 1
a405 1
COMMONDIST =	pervasive.img basis.img guib.img
@


1.148.1.1.1.4
log
@[Bug #30245]
Merging - ARRAY2 now depends on Vector.
@
text
@a7 4
# Revision 1.148.1.1.1.3  1997/08/07  16:01:06  daveb
# [Bug #30198]
# Don't distribute gui.img and batch.img in the Student Edition.
#
a454 1
		basis/__vector \
d457 1
@


1.148.1.1.1.5
log
@[Bug #30198]
Rename guib.img to gui.img in student edition, so that the test suite
still works.
@
text
@a7 4
# Revision 1.148.1.1.1.4  1997/08/08  15:52:58  johnh
# [Bug #30245]
# Merging - ARRAY2 now depends on Vector.
#
a401 1
MV =		mv
a406 1
MV =		/bin/mv
a1136 1
	$(MV) $(DISTDIR)/images/$(ARCH)/$(OS)/guib.img $(DISTDIR)/images/$(ARCH)/$(OS)/gui.img
a1140 1
	$(MV) $(DISTDIR)/images/$(ARCH)/$(OS)/guib.img $(DISTDIR)/images/$(ARCH)/$(OS)/gui.img
@


1.148.1.1.1.5.1.1
log
@branched from MLWorks_11 for label MLWorks_11r1
@
text
@a7 5
# Revision 1.148.1.1.1.5  1997/08/13  17:46:27  daveb
# [Bug #30198]
# Rename guib.img to gui.img in student edition, so that the test suite
# still works.
#
@


1.148.1.1.1.5.1.2
log
@[Bug #30307]
Need to mv guib.img.Z not guib.img as under Windows
@
text
@a7 3
# Revision 1.148.1.1.1.5.1.1  1997/10/07  11:59:10  jkbrook
# branched from MLWorks_11 for label MLWorks_11r1
#
d1153 1
a1153 1
	$(MV) $(DISTDIR)/images/$(ARCH)/$(OS)/guib.img.Z $(DISTDIR)/images/$(ARCH)/$(OS)/gui.img.Z
@


1.147
log
@[Bug #1667]
Adding mutexes to control access to the Listener.
@
text
@d8 4
d463 3
a465 1
		basis/path
a467 1
		basis/os_path \
a487 1
		$(SYSTEM)/__os_path \
d650 2
a655 2
		basis/os_path \
		$(SYSTEM)/__os_path \
@


1.146
log
@Adding array2 files
@
text
@d8 3
d937 2
@


1.145
log
@[Bug #1759]
adding new TEXT_STREAM_IO signature.
@
text
@d8 4
d434 2
d441 1
d465 2
d511 1
d631 1
@


1.144
log
@[Bug #1901]
Adding new RealVector and RealArray structures to basis
@
text
@d8 4
d487 1
d507 2
a508 1
		basis/__stream_io \
@


1.143
log
@[Bug #1892]
rename __word{8,16,32}{array,vector} to __word{8,16,32}_{array,vector}
       __pre{integer,int32,real,word{,32}} to __pre_{int{,32},real,word{,32}}
       __pack{8,16,32}{big,little} to __pack{8,16,32}_{big,little}
@
text
@d8 6
d495 2
@


1.142
log
@[Bug #1757]
renamed __ieeereal to __ieee_real
        __char{array,vector} to __char_{array,vector}
@
text
@d8 5
d397 4
a400 4
		basis/__preinteger \
		basis/__preword32 \
		basis/__preint32 \
		basis/__preword \
d416 2
a417 2
		basis/__word8vector \
		basis/__word8array \
d427 1
a427 1
		basis/__prereal \
d448 2
a449 2
		basis/_pack_word_big \
		basis/_pack_word_little \
d478 6
a483 6
		basis/__pack16big \
		basis/__pack16little \
		basis/__pack32big \
		basis/__pack32little \
		basis/__pack8big \
		basis/__pack8little \
d485 4
a488 4
		basis/__word16vector \
		basis/__word16array \
		basis/__word32vector \
		basis/__word32array \
d532 4
a535 4
		basis/__preinteger \
		basis/__preword32 \
		basis/__preint32 \
		basis/__preword \
d609 1
a609 1
		basis/__prereal \
@


1.141
log
@[Bug #1818]
Adding new floatarray file to the pervasives
@
text
@d8 4
d410 1
a410 1
		basis/__charvector \
d413 1
a413 1
		basis/__chararray \
d420 2
a421 2
		basis/ieeereal \
		basis/__ieeereal \
d602 2
a603 2
		basis/ieeereal \
		basis/__ieeereal \
@


1.140
log
@[Bug #1816]
[Bug #1816]
Modify the way rm is done to cope with new GNU tools
@
text
@d8 5
d372 1
a372 1
		string vector general \
@


1.139
log
@Adding basis/vector
@
text
@d8 3
d1103 1
a1103 1
	-$(RM) -r $(DISTDIR)/images/$(ARCH)/$(OS)
@


1.138
log
@[Bug #1816]
Change use of " when sh invoked to ' to keep new PC make happy
Modified method of producing foreign.img so that compilation part
is done directly from here. This allows considerable simplification
of mk_interface.sh
@
text
@d8 7
d693 2
@


1.137
log
@_license.sml now requires __substring.
@
text
@d8 3
d26 1
a26 1
# mMoved basis/__old to the LEXER build, as it is now needed by _lexrules.
d480 16
d982 1
d1037 6
a1042 7
$(SRC)/foreign/interface.mo: batch.img
	@@echo make: Constructing foreign/interface.sml and compiling.
	@@sh -c "$(SRC)/foreign/mk_interface.sh -full"

$(SRC)/foreign/__interface.mo: batch.img
	@@echo make: Constructing foreign/interface.sml and compiling.
	@@sh -c "$(SRC)/foreign/mk_interface.sh -full"
@


1.137.3.1
log
@branched from 1.137
@
text
@a7 3
# Revision 1.137  1996/11/15  16:48:53  daveb
# _license.sml now requires __substring.
#
@


1.137.2.1
log
@branched from 1.137
@
text
@a7 3
# Revision 1.137  1996/11/15  16:48:53  daveb
# _license.sml now requires __substring.
#
@


1.137.2.1.1.1
log
@branched from 1.137.2.1
@
text
@a7 3
# Revision 1.137.2.1  1996/12/17  18:00:54  hope
# branched from 1.137
#
@


1.137.1.1
log
@branched from 1.137
@
text
@a7 3
# Revision 1.137  1996/11/15  16:48:53  daveb
# _license.sml now requires __substring.
#
@


1.136
log
@Added main/*license.
@
text
@d8 3
d749 3
a751 1
BATCH =		main/license \
d818 2
@


1.136.1.1
log
@branched from 1.136
@
text
@a7 3
# Revision 1.136  1996/11/07  12:27:49  daveb
# Added main/*license.
#
@


1.136.1.2
log
@_license.sml now requires __substring.
@
text
@a7 3
# Revision 1.136.1.1  1996/11/14  13:05:22  hope
# branched from 1.136
#
d749 1
a749 3
BATCH =		basis/substring \
		basis/__substring \
       		main/license \
a815 2
		basis/substring \
		basis/__substring \
@


1.136.1.1.1.1
log
@branched from 1.136.1.1
@
text
@a7 3
# Revision 1.136.1.1  1996/11/14  13:05:22  hope
# branched from 1.136
#
@


1.136.1.1.1.2
log
@_license.sml now requires __substring.
@
text
@a7 3
# Revision 1.136.1.1.1.1  1996/11/28  15:14:58  hope
# branched from 1.136.1.1
#
d752 1
a752 3
BATCH =		basis/substring \
		basis/__substring \
       		main/license \
a818 2
		basis/substring \
		basis/__substring \
@


1.135
log
@[Bug #1728]
__integer becomes __int
@
text
@d8 4
d746 4
a749 1
BATCH =		main/batch \
d813 3
@


1.134
log
@[Bug #1725]
Remove unsafe string operations introduced when String structure removed
@
text
@d8 4
d151 1
a151 1
# Reorder basis/__chars and basis/__integer so that the latter comes
d371 1
a371 1
		basis/__integer \
d489 1
a489 1
		basis/__integer \
@


1.133
log
@Removed stringlib from FOREIGN image.
@
text
@d8 3
d375 2
a393 2
		basis/string \
		basis/__string \
@


1.132
log
@mMoved basis/__old to the LEXER build, as it is now needed by _lexrules.
@
text
@d8 3
d463 1
a463 4
FOREIGN =	utils/stringlib\
		utils/map\
		utils/_stringlib\
		utils/__stringlib\
@


1.131
log
@Added old structure to PARSER2.
@
text
@d8 3
d490 2
a578 2
		basis/old \
		basis/__old \
@


1.130
log
@Remove references to toplevel
@
text
@d8 3
d574 2
@


1.129
log
@Add BASIS_LOADER variable
@
text
@d8 3
d334 1
a334 2
BASIS1 =	basis/toplevel \
		basis/general \
a464 1
		basis/toplevel \
@


1.129.1.1
log
@branched from 1.129
@
text
@a7 3
# Revision 1.129  1996/10/09  14:24:58  jont
# Add BASIS_LOADER variable
#
@


1.128
log
@[Bug #1602]
Moved basis/__word8vector, basis/mono_vector and
basis/__word8 from PARSER1 in GNUMake to PARSERSYS
in the SunOS/Irix/Linux specific Makefiles since the files are only
needed under Unix.
@
text
@d8 7
d450 2
d928 1
d932 1
@


1.127
log
@[Bug #1615]
Remove duplicate dependencies.
@
text
@d8 4
d543 1
a543 4
		basis/__word32 \
		basis/__word8 \
		basis/mono_vector \
		basis/__word8vector 
@


1.127.1.1
log
@branched from 1.127
@
text
@a7 4
# Revision 1.127  1996/09/27  10:00:25  stephenb
# [Bug #1615]
# Remove duplicate dependencies.
#
@


1.126
log
@[Bug #1577]
reordering dependencies
@
text
@d8 4
a532 8
		basis/list \
		utils/lists \
		utils/_lists \
		utils/__lists \
		basis/__list \
		basis/char \
		basis/__pre_char \
		basis/__char \
a545 2
		basis/string \
		basis/__string \
@


1.125
log
@Removed basis.array from PARSER1.
@
text
@d8 3
d569 8
a586 8
		utils/counter \
		utils/_counter \
		typechecker/stamp \
		typechecker/_stamp \
		typechecker/__stamp \
		typechecker/datatypes \
		typechecker/_datatypes \
		typechecker/__datatypes \
@


1.125.1.1
log
@branched from 1.125
@
text
@a7 3
# Revision 1.125  1996/08/11  14:53:10  daveb
# Removed basis.array from PARSER1.
#
@


1.124
log
@[Bug #1536]
Added BASIS1 to parser sources.
@
text
@d8 4
a533 1
		basis/array \
@


1.123
log
@[Bug #1510]
location now depends on char, string (and transitively list) so
moved them to before location in LEXER filename list.
@
text
@d8 5
d522 9
d537 4
a540 1
		basis/__word32
d544 2
@


1.122
log
@Bring up to date following file name changes
@
text
@d8 3
d447 7
a509 3
		basis/char \
		basis/__pre_char \
		basis/__char \
a526 4
		basis/list \
		basis/__list \
		basis/string \
		basis/__string \
@


1.121
log
@removing dependency on gui_standard_io which is now defunct.
,
@
text
@d8 4
d386 1
a386 1
		basis/osprimio \
d388 1
d391 1
a391 2
		basis/_streamio \
		basis/_primio \
d411 1
a411 1
BASIS3 =	$(SYSTEM)/__primio \
@


1.120
log
@correcting make dependencies.
@
text
@d8 3
d294 1
a294 1
		string vector general gui_standard_io \
@


1.119
log
@Adding GuiStandardIO structure to load.
@
text
@d8 3
d294 4
a297 1
BASIS1 =	basis/__pre_basis \
@


1.118
log
@expose Char.scanc() and restrict __char
@
text
@d8 3
d288 2
a289 1
		string vector mlworks __pervasive_library 
d291 1
a291 4
BASIS1 =	basis/general \
		basis/__general \
		basis/toplevel \
		basis/__pre_basis \
d764 1
a764 1
		motif/__xm \
@


1.117
log
@Modifying foreign.img build ...
@
text
@d8 3
d311 1
d487 1
@


1.116
log
@Mods to allow mk_interface.sh to be used under Win32 ..
@
text
@d8 3
d933 1
a933 1
	@@sh -c "$(SRC)/foreign/mk_interface.sh -full $(SYSTEM)$(OS)"
d937 1
a937 1
	@@sh -c "$(SRC)/foreign/mk_interface.sh -full $(SYSTEM)$(OS)"
@


1.115
log
@Changing mk_interface to mk_interface.sh.
@
text
@d929 2
a930 2
	@@echo "make: Constructing foreign/interface.sml and compiling."
	@@$(SRC)/foreign/mk_interface.sh -full ARCH=$(ARCH) OS=$(OS)
d933 2
a934 2
	@@echo "make: Constructing foreign/__interface.sml and compiling."
	@@$(SRC)/foreign/mk_interface.sh -full ARCH=$(ARCH) OS=$(OS)
@


1.114
log
@Modifications to add custom editor interface ...
@
text
@d8 3
d930 1
a930 1
	@@$(SRC)/foreign/mk_interface -full ARCH=$(ARCH) OS=$(OS)
d934 1
a934 1
	@@$(SRC)/foreign/mk_interface -full ARCH=$(ARCH) OS=$(OS)
@


1.113
log
@Modified foreign.img entry to rebuild FFI .mo files ...
@
text
@d8 3
d676 3
@


1.112
log
@stringcvt->string_cvt
@
text
@d8 3
d393 1
a393 13
FOREIGN =	foreign/libml \
		foreign/__libml \
		foreign/libml\
		foreign/__libml\
		foreign/static_bytearray\
		foreign/types\
		foreign/utils\
		foreign/__static_bytearray\
		foreign/__types\
		foreign/__utils\
		foreign/store\
		foreign/__store\
		utils/stringlib\
a394 1
		foreign/core\
d399 2
a400 20
		foreign/__core\
		foreign/aliens\
		foreign/__aliens\
		foreign/object\
		foreign/__object\
		foreign/c_object\
		foreign/c_signature\
		foreign/c_structure\
		foreign/structure\
		foreign/signature\
		foreign/c_store\
		foreign/__structure\
		foreign/__c_object\
		foreign/__signature\
		foreign/__c_signature\
		foreign/__c_structure\
		foreign/c_function\
		foreign/__c_function\
		foreign/foreign\
		foreign/__foreign
d918 8
@


1.111
log
@Minor alterations for NT stuff
@
text
@d8 3
d275 4
a278 3
		basis/__pre_char \
		basis/stringcvt \
		basis/__stringcvt \
d318 2
a338 2
		basis/string \
		basis/__string \
d433 4
a436 3
		basis/__pre_char \
		basis/stringcvt \
		basis/__stringcvt \
@


1.110
log
@Update following basis changes
@
text
@d8 3
d375 3
a377 2
		basis/__int32 \
		$(SYSTEM)/__primio \
d384 1
a384 1
BASISSRC = 	$(BASIS1) $(PARSERSYS) $(BASIS2)
@


1.109
log
@Move basis/{__,}char above basis/__time in PARSER1 as the latter
now requires the former.
Also move {math,ieeereal,prereal,real} from GUI to above basis/__time
in PARSER 1 for the same reason.
Removed a redundant reference to basis/__list_pair in BASIS.
@
text
@d8 7
d352 1
a352 2
		basis/textbin \
		basis/_io \
a353 1
		basis/_textbinio \
d355 4
d372 7
a378 1
		basis/__int32
d380 1
a380 1
BASISSRC = 	$(BASIS1) $(PARSERSYS) $(BASIS2) $(BASISSYS)
@


1.108
log
@More problems
@
text
@d8 3
a294 3
		basis/time \
		$(SYSTEM)/__time \
		basis/date \
d301 4
a328 1
		basis/__list_pair \
a355 1
		basis/__real \
d477 9
a497 2
		basis/char \
		basis/__char \
d769 1
a769 8
GUI =		basis/math \
		basis/__math \
		basis/ieeereal \
		basis/__ieeereal \
		basis/__prereal \
		basis/real \
		basis/__real \
		interpreter/entry \
@


1.107
log
@Revert to previous method of building foreign.img
@
text
@d8 3
d367 36
a402 47
		foreign/static_bytearray \
		foreign/_static_bytearray \
		foreign/__static_bytearray \
		foreign/fi_types \
		foreign/_fi_types \
		foreign/__fi_types \
		foreign/fi_utils \
		foreign/_fi_utils \
		foreign/__fi_utils \
		foreign/fi_hostel \
		foreign/_fi_hostel \
		foreign/__fi_hostel \
		utils/stringlib \
		utils/_stringlib \
		utils/__stringlib \
		utils/map \
		utils/_b23tree \
		utils/__btree \
		foreign/fi_core \
		foreign/_fi_core \
		foreign/__fi_core \
		foreign/fi_aliens \
		foreign/_fi_aliens \
		foreign/__fi_aliens \
		foreign/fi_data \
		foreign/_fi_data \
		foreign/__fi_data \
		foreign/fi_codeset \
		foreign/_fi_codeset \
		foreign/__fi_codeset \
		foreign/c_hostel \
		foreign/c_data \
		foreign/_c_data \
		foreign/__c_data \
		foreign/fi_codeinfo \
		foreign/_fi_codeinfo \
		foreign/__fi_codeinfo \
		foreign/c_codeinfo \
		foreign/_c_codeinfo \
		foreign/__c_codeinfo \
		foreign/c_codeset \
		foreign/_c_codeset \
		foreign/__c_codeset \
		foreign/c_function \
		foreign/_c_function \
		foreign/__c_function \
		foreign/foreign \
a403 1

@


1.106
log
@Updating the foreign-files.
@
text
@d362 15
a376 1
FOREIGN =	utils/stringlib \
d382 30
a411 2
		foreign/interface \
		foreign/__interface
@


1.105
log
@Removed evaluator.
@
text
@d8 3
d362 1
a362 15
FOREIGN =	foreign/libml \
		foreign/__libml \
		foreign/static_bytearray \
		foreign/_static_bytearray \
		foreign/__static_bytearray \
		foreign/fi_types \
		foreign/_fi_types \
		foreign/__fi_types \
		foreign/fi_utils \
		foreign/_fi_utils \
		foreign/__fi_utils \
		foreign/fi_hostel \
		foreign/_fi_hostel \
		foreign/__fi_hostel \
		utils/stringlib \
d368 2
a369 30
		foreign/fi_core \
		foreign/_fi_core \
		foreign/__fi_core \
		foreign/fi_aliens \
		foreign/_fi_aliens \
		foreign/__fi_aliens \
		foreign/fi_data \
		foreign/_fi_data \
		foreign/__fi_data \
		foreign/fi_codeset \
		foreign/_fi_codeset \
		foreign/__fi_codeset \
		foreign/c_hostel \
		foreign/c_data \
		foreign/_c_data \
		foreign/__c_data \
		foreign/fi_codeinfo \
		foreign/_fi_codeinfo \
		foreign/__fi_codeinfo \
		foreign/c_codeinfo \
		foreign/_c_codeinfo \
		foreign/__c_codeinfo \
		foreign/c_codeset \
		foreign/_c_codeset \
		foreign/__c_codeset \
		foreign/c_function \
		foreign/_c_function \
		foreign/__c_function \
		foreign/foreign \
		foreign/__foreign
@


1.104
log
@readying substring, byte
@
text
@d8 3
a814 3
		gui/evaluator \
		gui/_evaluator \
		gui/__evaluator \
@


1.103
log
@New basis ordering
@
text
@d8 3
a282 1
		basis/byte \
a308 1
		basis/__byte \
d312 5
@


1.102
log
@Use the new path implementation.
@
text
@d8 3
d250 7
a263 1
		basis/array \
d268 3
a271 1
		basis/mono_vector \
d276 2
a291 5
		basis/list_pair \
		basis/list \
		utils/lists \
		utils/_lists \
		utils/__lists \
d303 1
a303 1
		basis/vector \
a304 1
		basis/_mono_vector \
a308 1
		basis/__list \
a310 1
		basis/__list_pair \
@


1.101
log
@signature changes
@
text
@d8 3
d291 1
d312 1
a312 1
		$(SYSTEM)/__path \
d477 8
d731 1
a731 3
XMSRC =		basis/list \
		basis/__list \
		motif/xm \
@


1.100
log
@Add preferences to interpreter files
@
text
@d8 3
a274 2
		basis/primio \
		basis/streamio \
a281 3
		basis/_primio \
		basis/_streamio \
		basis/_io \
a283 3
		basis/osprimio \
		basis/textbin \
		basis/_textbinio \
d313 10
d339 1
a339 1
BASISSRC = 	$(BASIS1) $(PARSERSYS) $(BASISSYS) $(BASIS2)
@


1.99
log
@Added interpreter/*save_image
@
text
@d8 3
d640 4
a643 1
SHELLSRC =	interpreter/inter_envtypes \
@


1.98
log
@Change filesys -> file_sys in accordance with latest file naming conventions.
@
text
@d8 3
d691 3
@


1.97
log
@Added various files needed to support a full OS.FileSys implementation.
@
text
@d8 3
a192 7
# The SYSTEM definition is there because Unix .mo files need to have the
# prefix unix so as to be compatible with the the name ("unix") given 
# to each Unix file by the module system.  The same is not done for
# Win32 since it does not support links and so the file have to go
# in ./system.  Or something like that.  I don't really understand
# the module system too well, see Dave or Jon for a better explanation
# and then come back and write a better comment - stephenb
d279 1
a279 1
		basis/os_filesys \
d308 2
a309 1
		$(SYSTEM)/__os_filesys \
d455 1
a455 1
		basis/os_filesys \
d462 2
a463 1
		$(SYSTEM)/__os_filesys \
@


1.96
log
@Remove settings of SYSTEM from here
@
text
@d8 3
d286 3
a288 1
		basis/_textbinio
a299 1
		basis/__word32 \
d457 1
d460 2
a461 1
		basis/path
a469 2
		basis/general \
		basis/__general \
d650 1
a650 2
INTERSRC1 =	basis/__word32 \
		basis/__int32 \
@


1.95
log
@Revise file list for foreign.img
@
text
@d8 3
a196 1
SYSTEM=system
a199 1
SYSTEM=system
a201 1
SYSTEM=unix
@


1.94
log
@add string
__string
@
text
@d8 4
a357 9
		basics/location \
		basics/_location \
		basics/__location \
		main/info \
		main/_info \
		main/__info \
		utils/crash \
		utils/_crash \
		utils/__crash \
@


1.93
log
@Added guib.img to the list of distributed targets
@
text
@d8 3
a283 1
		basis/string \
d294 2
@


1.92
log
@Name changes within the revised basis
@
text
@d8 3
d214 1
a214 1
COMMONDIST =	pervasive.img batch.img gui.img basis.img
d218 1
a218 1
DISTRIBUTED =	$(COMMONDIST) xm.img foreign.img
@


1.91
log
@Add ieeereal and remove some duplication
@
text
@d8 3
d236 4
a239 4
		basis/chars \
		basis/__chars \
		basis/mono_arrays \
		basis/mono_vectors \
d246 1
a246 1
		basis/bytes \
a249 1
		basis/fileposint \
d260 1
a260 1
		basis/list_pairs \
d265 1
a265 1
		basis/__fileposint \
d277 2
a278 2
		basis/pack_words \
		basis/strings \
d281 5
a285 5
		basis/_mono_arrays \
		basis/_mono_vectors \
		basis/_pack_words_big \
		basis/_pack_words_little \
		basis/__bytes \
d289 1
a289 1
		basis/__list_pairs \
@


1.90
log
@Reorder basis/__chars and basis/__integer so that the latter comes
before the former.
@
text
@d8 4
a229 1
		basis/toplevel \
a230 3
		basis/__pre_char \
		basis/stringcvt \
		basis/__stringcvt \
a253 1
		basis/float \
a254 1
		basis/integer \
a268 3
		basis/path \
                basis/os_io \
		basis/os \
d271 1
a271 1
		basis/_textbinio 
d273 3
a275 1
BASIS2 =	basis/pack_words \
@


1.89
log
@Removing word8 from lexer files
@
text
@d8 3
d231 2
a242 2
		basis/integer \
		basis/__integer \
@


1.88
log
@Fixing basis.img problem
@
text
@d8 3
a388 1
		basis/__word8 \
@


1.87
log
@Changes to words.
@
text
@d8 3
d210 1
@


1.86
log
@Remove any reference to FILESYS since it is subsumed by PARSERSYS
now that filesys stuff is needed for the parser.
@
text
@d8 4
d206 7
a230 2
		basis/__preinteger \
		basis/__preint32 \
a371 3
		basis/word \
		basis/__word \
		basis/__word8 \
d377 1
d379 4
@


1.85
log
@Rename filesys -> os_filesys and move main/exit to basis.
@
text
@d8 3
d298 1
a298 1
BASISSRC = 	$(BASIS1) $(PARSERSYS) $(FILESYS) $(BASISSYS) $(BASIS2)
@


1.84
log
@Fix so that basis.img build works.
@
text
@d8 3
d248 1
a248 1
		basis/filesys \
d269 2
a270 2
		main/exit \
		main/__exit \
d276 1
a276 1
		$(SYSTEM)/__filesys \
d429 1
a429 1
		basis/filesys \
d435 3
a437 3
		$(SYSTEM)/__filesys \
		main/exit \
		main/__exit \
@


1.83
log
@Add missing files so that it is possible to build an image.
Specifically: added __pre_char to LEXER as stringcvt needs it and
replaced any reference to basis/lists with basis/list since the file
name has been changed to match that used in the revised basis.
@
text
@d8 6
d200 4
a203 1
		basis/arrays \
a204 1
		basis/__pre_char \
a211 2
		basis/stringcvt \
		basis/__stringcvt \
a230 1
		basis/fmt_date \
d247 1
d256 1
a256 1
		basis/vectors \
a263 1
		basis/__fmt_date \
a269 1
                basis/os_io \
@


1.82
log
@add __pre_char, char into basis
@
text
@d8 3
d231 1
a231 1
		basis/lists \
d259 1
a259 1
		basis/__lists \
d357 1
d670 2
a671 2
XMSRC =		basis/lists \
		basis/__lists \
@


1.81
log
@Add files to support OS.IO.
@
text
@d8 3
d185 1
a185 2
BASIS1 =	basis/arrays \
		basis/general \
d190 2
d193 1
a196 1
		basis/toplevel \
@


1.80
log
@fix bool dependency with toplevel
@
text
@d8 3
d133 11
d146 1
d150 1
d153 1
d156 1
d207 1
a207 1
		basis/__time \
d258 7
a264 4
		system/__path \
		system/__filesys \
		system/_os \
		system/__os \
d412 2
d419 2
a420 2
PARSER2 =	system/__path \
		system/__filesys \
d425 5
d431 2
a432 2
		system/_os \
		system/__os \
@


1.79
log
@add bool
@
text
@d8 3
a171 2
		basis/bool \
		basis/__bool \
d181 2
@


1.78
log
@Add foreign.img to list of images distributed
@
text
@d8 3
d169 2
@


1.77
log
@Adding foreign.img and foreign-files
@
text
@d8 3
d153 1
a153 1
DISTRIBUTED =	$(COMMONDIST) xm.img
a860 1
	echo done rm
a863 1
	echo done mkdir
a864 1
	echo $(CP) $(DISTRIBUTED) $(DISTDIR)/images/$(ARCH)/$(OS)
@


1.76
log
@Bah, I was misinformed.
@
text
@d8 3
d170 6
d181 4
a184 1
		basis/__preinteger \
a195 1
		basis/math \
a198 1
		basis/__integer \
a224 1
		basis/__math \
d251 61
d756 1
d772 3
d809 4
@


1.75
log
@Moving word32 and int32
@
text
@d8 3
d498 3
a500 1
INTERSRC1 =	debugger/value_printer_utilities \
d576 1
a576 3
GUI =		basis/__word32 \
		basis/__int32 \
		basis/math \
@


1.74
log
@Removed utils/integer
@
text
@d8 3
a250 2
		basis/__word32 \
		basis/__int32 \
d571 3
a573 1
GUI =		basis/math \
@


1.73
log
@Change maths to math and __maths to __math
@
text
@d8 3
d236 18
a253 1
LEXER =		utils/print \
a255 3
		utils/integer \
		utils/_integer \
		utils/__integer \
a261 3
		basics/location \
		basics/_location \
		basics/__location \
a496 10
		basis/word \
		basis/general \
		basis/__general \
		basis/__word \
		basis/__word32 \
		basis/__word8 \
		basis/toplevel \
		basis/__preinteger \
		basis/integer \
		basis/__int32 \
d570 8
a577 1
GUI =		interpreter/entry \
@


1.72
log
@Added gui/*file_viewer.
@
text
@d8 3
d175 1
a175 1
		basis/maths \
d206 1
a206 1
		basis/__maths \
@


1.71
log
@initbasis becomes basis
@
text
@d8 3
d584 3
@


1.70
log
@Rename initbasis/__process -> initbasis/__os_process so that the
file name matches the structure as defined in the latest basis revision.
@
text
@d8 4
d137 33
a169 33
BASIS1 =	initbasis/arrays \
		initbasis/general \
		initbasis/__general \
		initbasis/word \
		initbasis/__word \
		initbasis/__word8 \
		initbasis/chars \
		initbasis/__chars \
		initbasis/mono_arrays \
		initbasis/mono_vectors \
		initbasis/toplevel \
		initbasis/__charvector \
		initbasis/__word8vector \
		initbasis/__word8array \
		initbasis/__chararray \
		initbasis/bytes \
		initbasis/time \
		initbasis/__time \
		initbasis/date \
		initbasis/fileposint \
		initbasis/__preinteger \
		initbasis/__prereal \
		initbasis/real \
		initbasis/float \
		initbasis/__date \
		initbasis/fmt_date \
		initbasis/integer \
		initbasis/primio \
		initbasis/streamio \
		initbasis/io \
		initbasis/list_pairs \
		initbasis/lists \
		initbasis/maths \
d173 28
a200 28
		initbasis/__integer \
		initbasis/__fileposint \
		initbasis/_primio \
		initbasis/_streamio \
		initbasis/_io \
		initbasis/os_process \
		initbasis/filesys \
		initbasis/path \
		initbasis/os \
		initbasis/osprimio \
		initbasis/textbin \
		initbasis/_textbinio 

BASIS2 =	initbasis/pack_words \
		initbasis/strings \
		initbasis/timer \
		initbasis/vectors \
		initbasis/_mono_arrays \
		initbasis/_mono_vectors \
		initbasis/_pack_words_big \
		initbasis/_pack_words_little \
		initbasis/__bytes \
		initbasis/__word32 \
		initbasis/__word16 \
		initbasis/__fmt_date \
		initbasis/__lists \
		initbasis/__list_pairs \
		initbasis/__maths \
d203 2
a204 2
		initbasis/_os_process \
		initbasis/__os_process \
d209 15
a223 15
		initbasis/__pack16big \
		initbasis/__pack16little \
		initbasis/__pack32big \
		initbasis/__pack32little \
		initbasis/__pack8big \
		initbasis/__pack8little \
		initbasis/__real \
		initbasis/__timer \
		initbasis/__word16vector \
		initbasis/__word16array \
		initbasis/__word32vector \
		initbasis/__word32array \
		initbasis/__int8 \
		initbasis/__int16 \
		initbasis/__int32
d286 3
a288 3
		initbasis/filesys \
		initbasis/os_process \
		initbasis/path
d295 3
a297 3
		initbasis/_os_process \
		initbasis/__os_process \
		initbasis/os \
d477 10
a486 10
		initbasis/word \
		initbasis/general \
		initbasis/__general \
		initbasis/__word \
		initbasis/__word32 \
		initbasis/__word8 \
		initbasis/toplevel \
		initbasis/__preinteger \
		initbasis/integer \
		initbasis/__int32 \
d537 2
a538 2
XMSRC =		initbasis/lists \
		initbasis/__lists \
@


1.69
log
@Patch up the BASIS src list so that it includes all the files in the basis!
@
text
@d8 3
d174 1
a174 1
		initbasis/process \
d197 4
a200 1
		initbasis/__process \
d283 1
a283 1
		initbasis/process \
d289 4
@


1.68
log
@Remove any reference to initbasis/__os since this is now implementation
dependent i.e. in the unix and win_nt directories.
@
text
@d8 4
d195 4
@


1.67
log
@Remove os dependence on toplevel as this causes build problems because
it requires the inclusion of files that cannot be compiled by SML/NJ.
@
text
@d8 4
a190 1
		initbasis/__os \
@


1.66
log
@Various changes as part of the upgrade to the latest OS.* definition.
@
text
@d8 3
a264 7
		initbasis/word \
		initbasis/general \
		initbasis/__general \
		initbasis/__word \
		initbasis/__word32 \
		initbasis/__word8 \
		initbasis/toplevel \
d452 7
@


1.65
log
@hyphenizing command line arguments
@
text
@d8 3
d261 11
a271 1
		utils/__set
d273 7
a279 1
PARSER2 =	basics/module_id \
a455 7
		initbasis/word \
		initbasis/general \
		initbasis/__general \
		initbasis/__word \
		initbasis/__word32 \
		initbasis/__word8 \
		initbasis/toplevel \
d532 1
a532 4
GUI1 =		initbasis/__word8 \
		initbasis/toplevel

GUI2 =		interpreter/entry \
d585 1
a585 1
XGUISRC =	$(GUI1) $(XMSRC) $(XCAPISRC) $(GUI2)
@


1.64
log
@Add rules to make windows.img
@
text
@d8 3
d691 1
a691 1
	$(RUNTIME) $(RUNTIMEOPTS) -pass args -parser_tables $(SRC)/parser/ml-tables/ args -save $@@ -load lexer.img $(PARSERMO) $(TYPERMO)
@


1.63
log
@Modifications to get distributions working under NT
@
text
@d8 3
d106 1
a106 1
DISTRIBUTED =	$(COMMONDIST)
d500 4
d621 1
d673 4
@


1.62
log
@Add stack_frame
@
text
@d8 3
d76 9
d86 5
d98 2
d101 6
a106 2
DISTRIBUTED =	pervasive.img batch.img gui.img basis.img xm.img
ADB =		adb
d701 10
a710 2
	$(RM) -r $(DISTDIR)/images/$(ARCH)/$(OS)
	$(MKDIR) -p $(DISTDIR)/images/$(ARCH)/$(OS)
d714 1
@


1.61
log
@mononewmap becomes monomap
@
text
@d8 3
d436 3
@


1.60
log
@newhashtable becomes hashtable
@
text
@d8 3
d178 1
a178 1
		utils/mononewmap \
@


1.59
log
@Change newmap to be map
@
text
@d8 3
d287 3
a289 3
		utils/newhashtable \
		utils/_newhashtable \
		utils/__newhashtable \
@


1.58
log
@Removing Map
@
text
@d8 3
d171 1
a171 1
		utils/newmap \
@


1.57
log
@Replaced evaluator (now a source display sub-tool).
@
text
@d8 3
d211 1
a211 2
PARSER1 =	utils/map \
		basics/ident \
a229 2
		utils/_map \
		utils/__map \
@


1.56
log
@Dave forgot to remove *evaluator from here
@
text
@d8 3
d514 3
@


1.55
log
@OS reorganisation: editor implementation now depends on the
OS type i.e. NT or Unix.
@
text
@d8 4
a504 3
		gui/evaluator \
		gui/_evaluator \
		gui/__evaluator \
@


1.54
log
@Moved file_dialog from gui to motif.
@
text
@d8 3
d385 2
a386 4
INTERSRC1 =	editor/editor \
		editor/_editor \
		editor/__editor \
		debugger/value_printer_utilities \
@


1.53
log
@Permuting capi and menus files
@
text
@d8 3
d454 1
a454 1
		gui/file_dialog \
@


1.52
log
@Renaming motif.img to gui.img
@
text
@d8 3
d454 3
d459 1
a459 4
		motif/__capi \
		gui/menus \
		motif/_menus \
		motif/__menus
@


1.51
log
@Removing utils/option
@
text
@d8 3
d51 1
a51 1
DISTRIBUTED =	pervasive.img batch.img motif.img basis.img xm.img
d445 1
a445 1
CAPISRC=	utils/lisp \
d458 1
a458 1
MOTIF1 =	initbasis/__word8 \
d461 1
a461 1
MOTIF2 =	interpreter/entry \
d514 1
a514 1
MOTIFSRC =	$(MOTIF1) $(XMSRC) $(CAPISRC) $(MOTIF2)
d532 1
a532 1
.PRECIOUS: pervasive.img lexer.img typechecker.img shell.img motif.img batch.img basis.img
d555 1
a555 1
MOTIFMO =	$(addsuffix .mo,$(addprefix $(SRC)/,$(join $(dir $(MOTIFSRC)),$(addprefix $(ARCH_OS), $(notdir $(MOTIFSRC))))))
d584 2
a585 2
motif-files: force
	echo $(COMPILERMO) $(SHELLMO) $(INTERMO) $(MOTIFMO) > $@@
d587 2
a588 2
motif2-files: force
	echo $(INTERMO) $(MOTIFMO) > motif2-files
@


1.50
log
@Removed file_tool, added path_tool.
@
text
@d8 3
d196 1
a196 3
		utils/__set \
		utils/option \
		utils/__option
@


1.49
log
@Move types to be loaded before absyn
@
text
@d8 3
d460 3
a483 3
		gui/fileselect \
		gui/_fileselect \
		gui/__fileselect \
@


1.48
log
@Added modules for project tool.
@
text
@d8 3
d220 3
a246 3
		typechecker/types \
		typechecker/_types \
		typechecker/__types \
@


1.47
log
@Change load order to get profile tool in before the evaluator.
@
text
@d8 3
a355 3
		main/compiler \
		main/_compiler \
		main/__compiler \
d478 6
a483 6
		gui/bar_chart \
		gui/_bar_chart \
		gui/__bar_chart \
		gui/profile_tool \
		gui/_profile_tool \
		gui/__profile_tool \
d487 3
@


1.46
log
@Add profile tool.
@
text
@d8 3
a477 3
		gui/evaluator \
		gui/_evaluator \
		gui/__evaluator \
d484 3
@


1.45
log
@GraphWidget now depends on Gui Utils - rearranging ...
@
text
@d8 3
d478 6
@


1.44
log
@Move initbasis/lists stuff into xmsrc as it's not relevant for NT
@
text
@d8 3
d445 1
a445 4
MOTIF2 =	gui/graph_widget \
		gui/_graph_widget \
		gui/__graph_widget \
		interpreter/entry \
d451 3
@


1.43
log
@*gui_utils now use *entry.
@
text
@d8 3
d420 3
a422 1
XMSRC =		motif/xm \
d440 1
a440 3
		initbasis/toplevel \
		initbasis/lists \
		initbasis/__lists
@


1.42
log
@Adding utils/lisp for use by Motif.
@
text
@d7 4
a10 1
# $Log$
d442 3
a468 3
		interpreter/entry \
		interpreter/_entry \
		interpreter/__entry \
@


1.41
log
@Added __int* units to the basis.img.
@
text
@d7 1
a7 1
# $log$
d418 4
a421 1
CAPISRC=	gui/file_dialog \
@


1.40
log
@__value_printer now requires __int32.
@
text
@d103 4
a106 1
		initbasis/__word32array
@


1.39
log
@Updated BASIS files for new word structures.
@
text
@d359 5
@


1.38
log
@New built-in word types.
@
text
@d30 1
a85 1
		initbasis/__convert \
a93 2
		initbasis/__pack24big \
		initbasis/__pack24little \
@


1.37
log
@Fixing problem with xm.img
@
text
@d29 1
a29 2
		initbasis/words \
		initbasis/_words \
a43 1
		initbasis/convert_words \
a77 1
		initbasis/_convert_words \
a83 1
		initbasis/__word24 \
a103 2
		initbasis/__word24vector \
		initbasis/__word24array \
d356 5
d422 1
a422 5
MOTIF1 =	initbasis/general \
		initbasis/__general \
		initbasis/words \
		initbasis/_words \
		initbasis/__word8 \
@


1.36
log
@Moving out machine dependent gui files
@
text
@d412 2
a413 1
		gui/file_dialog \
d476 1
a476 1
MOTIFSRC =	$(MOTIF1) $(XMSRC) $(MOTIF2)
@


1.35
log
@More changes of gui directories
@
text
@d411 10
a420 1
		motif/__xm
d431 1
a431 10
MOTIF2 =	gui/file_dialog \
		motif/_file_dialog \
		motif/__file_dialog \
		gui/capi \
		motif/_capi \
		motif/__capi \
		gui/menus \
		motif/_menus \
		motif/__menus \
		gui/graph_widget \
@


1.34
log
@GUI directory restructuring
@
text
@d409 1
a409 1
XMSRC =		library/xm \
d422 1
a422 1
MOTIF2 =	library/file_dialog \
d425 1
a425 1
		library/capi \
d428 1
a428 1
		library/menus \
d431 3
a433 3
		library/graph_widget \
		library/_graph_widget \
		library/__graph_widget \
@


1.33
log
@Adding graph_widget files
@
text
@d410 2
a411 2
		library/_xm \
		library/__xm
d422 1
a422 1
MOTIF2 =	motif/file_dialog \
d426 5
a430 2
		library/_capi \
		library/__capi \
d434 24
a457 27
		motif/menus \
		motif/_menus \
		motif/__menus \
		motif/motif_utils \
		motif/_motif_utils \
		motif/__motif_utils \
		motif/tooldata \
		motif/_tooldata \
		motif/__tooldata \
		motif/console \
		motif/_console \
		motif/__console \
		motif/inspector_tool \
		motif/_inspector_tool \
		motif/__inspector_tool \
		motif/debugger_window \
		motif/_debugger_window \
		motif/__debugger_window \
		motif/error_browser \
		motif/_error_browser \
		motif/__error_browser \
		motif/fileselect \
		motif/_fileselect \
		motif/__fileselect \
		motif/evaluator \
		motif/_evaluator \
		motif/__evaluator \
d461 12
a472 12
		motif/browser_tool \
		motif/_browser_tool \
		motif/__browser_tool \
		motif/context \
		motif/_context \
		motif/__context \
		motif/listener \
		motif/podium \
	 	motif/_listener \
		motif/_podium \
	 	motif/__listener \
		motif/__podium \
@


1.32
log
@Move _ident and __ident out of PARSERSYS
@
text
@d428 3
@


1.31
log
@Some rearrangements to allow bignum to be called by the _ident
@
text
@d169 2
@


1.30
log
@Moving *entry.sml to interpreter
@
text
@a188 2
		basics/_ident \
		basics/__ident \
@


1.29
log
@Adding entry entry
@
text
@d455 3
a457 3
		motif/entry \
		motif/_entry \
		motif/__entry \
@


1.28
log
@Capification
@
text
@d455 3
@


1.27
log
@Replaced the input widget with the console widget.
@
text
@d422 4
a425 1
MOTIF2 =	library/capi \
a430 3
		motif/file_dialog \
		motif/_file_dialog \
		motif/__file_dialog \
a439 3
		motif/output \
		motif/_output \
		motif/__output \
@


1.26
log
@Fix motif-files to be relative to typechecker.img
@
text
@d437 3
a439 3
		motif/input \
		motif/_input \
		motif/__input \
@


1.25
log
@Adding capi files
@
text
@a533 1
	echo $(SHELL)
d537 1
a537 1
	echo $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(SHELLMO) $(INTERMO) $(TTYMO) > $@@
d543 1
a543 1
	echo $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(SHELLMO) $(INTERMO) $(MOTIFMO) > $@@
@


1.24
log
@Added layout files.
@
text
@d422 4
a425 1
MOTIF2 =	motif/menus \
a427 3
		motif/layout \
		motif/_layout \
		motif/__layout \
@


1.23
log
@Change $(MAKE) for $(MAKE_COMMAND)
@
text
@d425 3
@


1.22
log
@Add typer-files target
Modified batch-files to contain only those beyond typechecker.img
@
text
@d491 1
a491 1
	$(MAKE) RUNTIMEOPTS="-verbose -c 2 -profile -profile-frequency 100"
d531 1
@


1.21
log
@Reordered tooldata and motifutils as a result of changes to user_options.
@
text
@d524 3
d531 1
a531 1
	echo $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(BATCHMO) > $@@
@


1.20
log
@Need *primitives loaded before _valenv
@
text
@d425 6
a433 3
		motif/motif_utils \
		motif/_motif_utils \
		motif/__motif_utils \
a451 3
		motif/file_dialog \
		motif/_file_dialog \
		motif/__file_dialog \
@


1.19
log
@Allow architecture and OS specific location of object files
@
text
@d237 23
a274 3
		utils/newhashtable \
		utils/_newhashtable \
		utils/__newhashtable \
@


1.18
log
@Revised for changes to initbasis implementation.
@
text
@a22 1
PERVASIVEDIR =	$(SRC)/pervasive
a24 1
PERVASIVEMO =	$(PERVASIVE:%=$(PERVASIVEDIR)/%.mo)
d480 17
a496 16

LEXERMO =	$(LEXER:%=$(SRC)/%.mo)
PARSERMO =	$(PARSER:%=$(SRC)/%.mo)
TYPERMO =	$(TYPER:%=$(SRC)/%.mo)
COMPILERMO =	$(COMPILER:%=$(SRC)/%.mo)
BATCHMO =	$(BATCH:%=$(SRC)/%.mo)
SHELLMO =	$(SHELLSRC:%=$(SRC)/%.mo)
INTERMO =	$(INTERSRC:%=$(SRC)/%.mo)
TTYMO =		$(TTYSRC:%=$(SRC)/%.mo)
MOTIFMO =	$(MOTIFSRC:%=$(SRC)/%.mo)
TAGSMO =	$(TAGS:%=$(SRC)/%.mo)
ETAGSMO =	$(ETAGS:%=$(SRC)/%.mo)
SCRIPTMO =	$(SCRIPT:%=$(SRC)/%.mo)
ARMO =		$(ARSRC:%=$(SRC)/%.mo)
BASISMO = 	$(BASISSRC:%=$(SRC)/%.mo)
XMMO =		$(XMSRC:%=$(SRC)/%.mo)
@


1.17
log
@Rearranged and added to MOTIF1 to make it work ...
@
text
@a28 2
		initbasis/chars \
		initbasis/__chars \
d34 2
d38 2
d42 1
a48 1
		initbasis/toplevel \
d64 9
a72 3
		utils/__lists

BASIS2 =	initbasis/process \
d75 4
a78 1
		initbasis/pack_words \
a79 1
		initbasis/textbin \
a84 1
		initbasis/_io \
a86 7
		initbasis/__charvector \
		initbasis/__chararray \
		initbasis/__integer \
		initbasis/__fileposint \
		initbasis/_primio \
		initbasis/_streamio \
		initbasis/_textbinio \
d115 1
a115 1
BASISSRC = 	$(BASIS1) $(PARSERSYS) $(FILESYS) $(BASIS2)
d400 1
a400 1
	   	initbasis/toplevel \
@


1.16
log
@Make xm.img dependent on basis.img rather than pervasive.img
@
text
@d393 6
a398 1
MOTIF1 =	initbasis/toplevel \
a399 2
		initbasis/general \
		initbasis/__general \
@


1.15
log
@Remove test from list of files for initial basis
@
text
@d538 1
a538 1
xm.img: pervasive.img $(XMMO)
@


1.14
log
@Add basis.img and xm.img to distributed list
@
text
@a68 1
		initbasis/test \
@


1.13
log
@Add support to make basis.img
@
text
@d21 1
a21 1
DISTRIBUTED =	pervasive.img batch.img motif.img
@


1.12
log
@Moved all the user context stuff into a separate file from ShellTypes.
@
text
@d27 89
a176 7
#		utils/getenv \
#		unix/_unixgetenv \
#		unix/__getenv \
# 		utils/path \
# 		unix/_unixpath \
# 		unix/__path \

d390 5
a394 1
MOTIFSRC =	initbasis/toplevel \
d398 3
a400 5
		initbasis/__lists \
		library/xm \
		library/_xm \
		library/__xm \
		motif/menus \
d447 2
d465 1
a465 1
.PRECIOUS: pervasive.img lexer.img typechecker.img shell.img motif.img batch.img
d492 2
d501 3
d508 1
a508 1
	echo $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(SHELLMO) $(INTERMO) $(TTYMO) > tty-files
d510 3
d514 1
a514 1
	echo $(PARSERMO) $(TYPERMO) $(COMPILERMO) $(SHELLMO) $(INTERMO) $(MOTIFMO) > motif-files
d534 8
@


1.11
log
@_xm now uses initbasis/lists instead of utils/lists.
@
text
@d267 3
@


1.10
log
@Change simpletypes to stamp
@
text
@d305 6
a310 1
MOTIFSRC =	library/xm \
@


1.9
log
@Added motif/*context.
@
text
@d114 3
a116 3
		typechecker/simpletypes \
		typechecker/_simpletypes \
		typechecker/__simpletypes \
@


1.8
log
@Added INTERSYS for machine dependent interpreter files (for debugger interface).
@
text
@d344 3
@


1.7
log
@_shell_types uses interprint.
@
text
@d255 1
a255 1
INTERSRC =	editor/editor \
d300 2
@


1.6
log
@Various changes
@
text
@d264 3
a272 3
		interpreter/interprint \
		interpreter/_interprint \
		interpreter/__interprint \
@


1.5
log
@Remove *-files targets into non-generic makefiles
@
text
@d239 1
a239 4
SHELLSRC =	debugger/get_type_information \
		debugger/_get_type_information \
		debugger/__get_type_information \
		interpreter/inter_envtypes \
a241 6
		debugger/value_printer_utilities \
		debugger/_value_printer_utilities \
		debugger/__value_printer_utilities \
		debugger/value_printer \
		debugger/_value_printer \
		debugger/__value_printer \
d258 9
a269 3
		interpreter/shell_types \
		interpreter/_shell_types \
		interpreter/__shell_types \
@


1.4
log
@Make image building for distribution OS and architecture specific
@
text
@a405 3
shell-files: force
	echo $(COMPILERMO) $(SHELLMO) > $@@

a413 3

tty2-files: force
	echo $(INTERMO) $(TTYMO) > tty2-files
@


1.3
log
@Modify for new /u directory structure
@
text
@d373 1
a373 1
	make RUNTIMEOPTS="-verbose -c 2 -profile -profile-frequency 100"
d470 4
a473 2
	$(RM) -r $(DISTDIR)/images
	$(MKDIR) $(DISTDIR)/images
d475 1
a475 1
	$(CP) $(DISTRIBUTED:%=%.Z) $(DISTDIR)/images
d477 8
@


1.2
log
@Remove all target, this is system specific
@
text
@d19 2
a20 1
DISTRIB =	/usr/sml/distribution/images
@


1.1
log
@new unit
No reason given
@
text
@a370 2
all: pervasive.img lexer.img motif.img batch.img

@
