head	1.19;
access;
symbols
	MLWorks_20m1_1997_10_23:1.19
	MLWorks_11r1:1.17.1.1.1.1.1
	MLWorks_workspace_97:1.19.2
	MLWorks_dt_wizard:1.19.1
	MLWorks_11c0_1997_09_09:1.17.1.1.1.1
	MLWorks_10r3:1.17.1.1.3
	MLWorks_10r2_551:1.17.1.1.2
	MLWorks_11:1.17.1.1.1
	MLWorks_1_0_r2c2_1997_07_28:1.17.1.1
	MLWorks_20m0_1997_06_20:1.19
	MLWorks_1_0_r2c2_1997_06_14:1.17.1.1
	MLWorks_1_0_r2c1_released_1997_05_23:1.17.1.1
	MLWorks_1_0_r2c1_1997_05_12:1.17.1
	MLWorks_BugFix_1997_04_24:1.17
	MLWorks_1_0_r2_Win32_1997_04_11:1.17
	MLWorks_1_0_r2_Unix_1997_04_04:1.17
	MLWorks_1_0_1_ULTRASPARC_1997_02_24:1.16.6.1.1
	MLWorks_gui_1996_12_18:1.16.7
	MLWorks_1_0_Win32_1996_12_17:1.16.6
	MLWorks_1_0_Irix_1996_11_28_released_1996_12_17:1.16.4.1.1.1
	MLWorks_1_0_Unix_1996_11_14_released_1996_12_17:1.16.4.1
	MLWorks_1_0_Irix_1996_11_28:1.16.4.1.1
	MLWorks_1_0_Win32_1996_11_22:1.16.5
	MLWorks_1_0_Unix_1996_11_14:1.16.4
	MLWorks_Open_Beta2_1996_10_11:1.16.3
	MLWorks_License_dev:1.16.2
	MLWorks_1_open_beta_1996_09_13:1.16.1
	MLWorks_Open_Beta_1996_08_22:1.16
	MLWorks_Beta_1996_07_02:1.16
	MLWorks_Beta_1996_06_07:1.16
	MLWorks_Beta_1996_06_06:1.16
	MLWorks_Beta_1996_06_05:1.16
	MLWorks_Beta_1996_06_03:1.16
	MLWorks_Beta_1996_05_31:1.16
	MLWorks_Beta_1996_05_30:1.16
	ML_beta_release_12/08/94:1.12
	ML_beta_release_03/08/94:1.12
	ML_revised_beta_release_25/05/94:1.12
	ML_final_beta_release_02/03/94:1.12
	mlworks-28-01-1994:1.9
	Release:1.9
	mlworks-beta-01-09-1993:1.9
	MLWorks-1-0-4-29/01/1993:1.5
	MLWorks-1-0-3-21/12/1992:1.5
	MLWorks-1-0-2-15/12/1992:1.5
	MLWorks-1-0-1-04/12/1992:1.5
	checkpoint_17_08_92:1.2;
locks; strict;
comment	@ * @;


1.19
date	97.05.27.09.45.28;	author johnh;	state Exp;
branches
	1.19.1.1
	1.19.2.1;
next	1.18;

1.18
date	97.05.12.15.50.59;	author jont;	state Exp;
branches;
next	1.17;

1.17
date	97.02.12.13.22.55;	author daveb;	state Exp;
branches
	1.17.1.1;
next	1.16;

1.16
date	96.04.17.10.14.25;	author jont;	state Exp;
branches
	1.16.1.1
	1.16.2.1
	1.16.3.1
	1.16.4.1
	1.16.5.1
	1.16.6.1
	1.16.7.1;
next	1.15;

1.15
date	95.04.20.19.22.01;	author daveb;	state Exp;
branches;
next	1.14;

1.14
date	95.04.19.10.50.59;	author jont;	state Exp;
branches;
next	1.13;

1.13
date	95.01.16.14.01.45;	author daveb;	state Exp;
branches;
next	1.12;

1.12
date	94.02.24.10.41.56;	author daveb;	state Exp;
branches;
next	1.11;

1.11
date	94.02.08.11.42.25;	author daveb;	state Exp;
branches;
next	1.10;

1.10
date	94.02.01.15.17.19;	author daveb;	state Exp;
branches;
next	1.9;

1.9
date	93.08.17.17.55.07;	author daveb;	state Exp;
branches
	1.9.1.1;
next	1.8;

1.8
date	93.05.28.14.33.47;	author nosa;	state Exp;
branches;
next	1.7;

1.7
date	93.05.05.16.40.28;	author jont;	state Exp;
branches;
next	1.6;

1.6
date	93.02.24.14.32.19;	author jont;	state Exp;
branches;
next	1.5;

1.5
date	92.09.02.12.21.52;	author richard;	state Exp;
branches;
next	1.4;

1.4
date	92.08.19.18.56.09;	author davidt;	state Exp;
branches;
next	1.3;

1.3
date	92.08.17.10.53.30;	author davidt;	state Exp;
branches;
next	1.2;

1.2
date	92.08.03.11.50.56;	author jont;	state Exp;
branches;
next	1.1;

1.1
date	92.07.22.15.34.30;	author jont;	state Exp;
branches;
next	;

1.9.1.1
date	93.08.17.17.55.07;	author jont;	state Exp;
branches;
next	;

1.16.1.1
date	96.09.13.11.18.46;	author hope;	state Exp;
branches;
next	;

1.16.2.1
date	96.10.07.16.08.39;	author hope;	state Exp;
branches;
next	;

1.16.3.1
date	96.10.17.11.26.54;	author hope;	state Exp;
branches;
next	;

1.16.4.1
date	96.11.14.12.52.19;	author hope;	state Exp;
branches
	1.16.4.1.1.1;
next	;

1.16.4.1.1.1
date	96.11.28.15.03.17;	author hope;	state Exp;
branches;
next	;

1.16.5.1
date	96.11.22.18.11.30;	author hope;	state Exp;
branches;
next	;

1.16.6.1
date	96.12.17.17.50.01;	author hope;	state Exp;
branches
	1.16.6.1.1.1;
next	;

1.16.6.1.1.1
date	97.02.24.11.40.13;	author hope;	state Exp;
branches;
next	;

1.16.7.1
date	96.12.18.09.44.05;	author hope;	state Exp;
branches;
next	;

1.17.1.1
date	97.05.12.10.36.35;	author hope;	state Exp;
branches
	1.17.1.1.1.1
	1.17.1.1.2.1
	1.17.1.1.3.1;
next	;

1.17.1.1.1.1
date	97.07.28.18.21.16;	author daveb;	state Exp;
branches
	1.17.1.1.1.1.1.1;
next	;

1.17.1.1.1.1.1.1
date	97.10.07.11.46.49;	author jkbrook;	state Exp;
branches;
next	;

1.17.1.1.2.1
date	97.09.08.17.14.42;	author daveb;	state Exp;
branches;
next	;

1.17.1.1.3.1
date	97.09.09.14.10.35;	author daveb;	state Exp;
branches;
next	;

1.19.1.1
date	97.09.10.19.26.33;	author brucem;	state Exp;
branches;
next	;

1.19.2.1
date	97.09.11.20.56.34;	author daveb;	state Exp;
branches;
next	;


desc
@Common file and filename manipulation functions
@


1.19
log
@[Bug #20033]
Pass 'silent' param to set_source_path_from_env.
@
text
@(* io.sml the signature *)
(*
 * Copyright (C) 1996 The Harlequin Group Limited.  All rights reserved.
 *
 * $Log: io.sml,v $
 * Revision 1.18  1997/05/12  15:50:59  jont
 * [Bug #20050]
 * Change name to MLWORKS_IO to avoid clash with basis.io
 *
 * Revision 1.17  1997/02/12  13:22:55  daveb
 * Review edit <URI:spring://ML_Notebook/Review/basics/*module.sml>
 * -- Added comment about NotSet exception.
 *
 * Revision 1.16  1996/04/17  10:14:25  jont
 * Add set_source_path_without_expansion for cases when realpath etc
 * should not be applied
 *
 * Revision 1.15  1995/04/20  19:22:01  daveb
 * Added a location argument to the set functions.
 *
Revision 1.14  1995/04/19  10:50:59  jont
Modifications to add object paths

Revision 1.13  1995/01/16  14:01:45  daveb
Replaced Directory type with string.

Revision 1.12  1994/02/24  10:41:56  daveb
Fixed types of set_pervasive_dir.

Revision 1.11  1994/02/08  11:42:25  daveb
set_source_path now takes a directory list.  The source path can never
be not set.

Revision 1.10  1994/02/01  15:17:19  daveb
Added  pervasive_library_id and builtin_library_id, made ModuleId an
eqtype, moved getenv functionality to a separate module, and moved\ntrans_home_name functionality to filename.

Revision 1.9  1993/08/17  17:55:07  daveb
Removed several functions that are now unused or moved to filename.

Revision 1.8  1993/05/28  14:33:47  nosa
Changed Option.T to Option.opt.

Revision 1.7  1993/05/05  16:40:28  jont
Added a trans_home_name function for translating filenames satarting with ~

Revision 1.6  1993/02/24  14:32:19  jont
Added get_pervasive_dir to get value of PERVASIVE_DIR environment variable

Revision 1.5  1992/09/02  12:21:52  richard
Moved the special names out of the compiler as a whole.

Revision 1.4  1992/08/19  18:56:09  davidt
Made changes to allow mo files to be copied.

Revision 1.3  1992/08/17  10:53:30  davidt
Took out input_line function (there is one in MLWorks.IO now).

Revision 1.2  1992/08/03  11:50:56  jont
Added ignore_line function

Revision 1.1  1992/07/22  15:34:30  jont
Initial revision
*)

signature MLWORKS_IO =
  sig
    eqtype ModuleId
    type Location

    (* Base names for various special files *)

    val pervasive_library_name	: string
    val builtin_library_name	: string

    val pervasive_library_id	: ModuleId
    val builtin_library_id	: ModuleId

    (* The pervasive directory, source path and object path are set by reading
       the environment.  If the environment doesn't contain the information,
       for the source path, a default value is used. *)
    (* All the set* functions except set_source_path_without_expansion expand
       any tilde abbreviations and symbolic links on their arguments. They
       handle any BadHomeName exceptions, report an error, and raise
       Info.Stop instead. *)

    val get_source_path : unit -> string list
    val set_source_path : string list -> unit
    val set_source_path_without_expansion : string list -> unit
    val set_source_path_from_env : Location * bool -> unit
    val set_source_path_from_string : string * Location -> unit

    exception NotSet of string
    (* The NotSet exception is raised by get_pervasive_dir and
       get_object_path if the corresponding values have not been set. *)

    val get_pervasive_dir : unit -> string
    val set_pervasive_dir : string * Location -> unit
    val set_pervasive_dir_from_env : Location -> unit

    val get_object_path : unit -> string
    val set_object_path : string * Location -> unit
    val set_object_path_from_env : Location -> unit
  end
@


1.19.2.1
log
@branched from trunk for label MLWorks_workspace_97
@
text
@a5 4
 * Revision 1.19  1997/05/27  09:45:28  johnh
 * [Bug #20033]
 * Pass 'silent' param to set_source_path_from_env.
 *
@


1.19.1.1
log
@branched from trunk for label MLWorks_dt_wizard
@
text
@a5 4
 * Revision 1.19  1997/05/27  09:45:28  johnh
 * [Bug #20033]
 * Pass 'silent' param to set_source_path_from_env.
 *
@


1.18
log
@[Bug #20050]
Change name to MLWORKS_IO to avoid clash with basis.io
@
text
@d6 4
d90 1
a90 1
    val set_source_path_from_env : Location -> unit
@


1.17
log
@Review edit <URI:spring://ML_Notebook/Review/basics/*module.sml>
-- Added comment about NotSet exception.
@
text
@d6 4
d62 1
a62 1
signature IO =
@


1.17.1.1
log
@branched from 1.17
@
text
@a5 4
 * Revision 1.17  1997/02/12  13:22:55  daveb
 * Review edit <URI:spring://ML_Notebook/Review/basics/*module.sml>
 * -- Added comment about NotSet exception.
 *
@


1.17.1.1.3.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r3
@
text
@a5 3
 * Revision 1.17.1.1  1997/05/12  10:36:35  hope
 * branched from 1.17
 *
@


1.17.1.1.2.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r2_551
@
text
@a5 3
 * Revision 1.17.1.1  1997/05/12  10:36:35  hope
 * branched from 1.17
 *
@


1.17.1.1.1.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
@
text
@a5 3
 * Revision 1.17.1.1  1997/05/12  10:36:35  hope
 * branched from 1.17
 *
@


1.17.1.1.1.1.1.1
log
@branched from MLWorks_11 for label MLWorks_11r1
@
text
@a5 3
 * Revision 1.17.1.1.1.1  1997/07/28  18:21:16  daveb
 * branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
 *
@


1.16
log
@Add set_source_path_without_expansion for cases when realpath etc
should not be applied
@
text
@d3 7
a9 1
$Log: io.sml,v $
a55 2

Copyright (c) 1992 Harlequin Ltd.
d74 4
a77 3
    (* All the set* functions except set_source_path expand any tilde
       abbreviations and symbolic links on their arguments. They handle any
       BadHomeName exceptions, report an error, and raise Info.Stop instead. *)
d86 3
@


1.16.7.1
log
@branched from 1.16
@
text
@a3 4
 * Revision 1.16  1996/04/17  10:14:25  jont
 * Add set_source_path_without_expansion for cases when realpath etc
 * should not be applied
 *
@


1.16.6.1
log
@branched from 1.16
@
text
@a3 4
 * Revision 1.16  1996/04/17  10:14:25  jont
 * Add set_source_path_without_expansion for cases when realpath etc
 * should not be applied
 *
@


1.16.6.1.1.1
log
@branched from 1.16.6.1
@
text
@a3 3
 * Revision 1.16.6.1  1996/12/17  17:50:01  hope
 * branched from 1.16
 *
@


1.16.5.1
log
@branched from 1.16
@
text
@a3 4
 * Revision 1.16  1996/04/17  10:14:25  jont
 * Add set_source_path_without_expansion for cases when realpath etc
 * should not be applied
 *
@


1.16.4.1
log
@branched from 1.16
@
text
@a3 4
 * Revision 1.16  1996/04/17  10:14:25  jont
 * Add set_source_path_without_expansion for cases when realpath etc
 * should not be applied
 *
@


1.16.4.1.1.1
log
@branched from 1.16.4.1
@
text
@a3 3
 * Revision 1.16.4.1  1996/11/14  12:52:19  hope
 * branched from 1.16
 *
@


1.16.3.1
log
@branched from 1.16
@
text
@a3 4
 * Revision 1.16  1996/04/17  10:14:25  jont
 * Add set_source_path_without_expansion for cases when realpath etc
 * should not be applied
 *
@


1.16.2.1
log
@branched from 1.16
@
text
@a3 4
 * Revision 1.16  1996/04/17  10:14:25  jont
 * Add set_source_path_without_expansion for cases when realpath etc
 * should not be applied
 *
@


1.16.1.1
log
@branched from 1.16
@
text
@a3 4
 * Revision 1.16  1996/04/17  10:14:25  jont
 * Add set_source_path_without_expansion for cases when realpath etc
 * should not be applied
 *
@


1.15
log
@Added a location argument to the set functions.
@
text
@d4 3
d76 1
@


1.14
log
@Modifications to add object paths
@
text
@d4 3
d54 1
d67 3
d73 2
a74 2
    val set_source_path_from_env : unit -> unit
    val set_source_path_from_string : string -> unit
d78 2
a79 2
    val set_pervasive_dir : string -> unit
    val set_pervasive_dir_from_env : unit -> unit
d82 2
a83 2
    val set_object_path : string -> unit
    val set_object_path_from_env : unit -> unit
@


1.13
log
@Replaced Directory type with string.
@
text
@d4 3
d60 2
a61 2
    (* The pervasive_dir and the source path are set by reading the UNIX
       environment.  If the UNIX environment doesn't contain the information,
d73 4
@


1.12
log
@Fixed types of set_pervasive_dir.
@
text
@d4 3
a46 1
    type Directory
d61 2
a62 2
    val get_source_path : unit -> Directory list
    val set_source_path : Directory list -> unit
d67 2
a68 2
    val get_pervasive_dir : unit -> Directory
    val set_pervasive_dir : Directory -> unit
@


1.11
log
@set_source_path now takes a directory list.  The source path can never
be not set.
@
text
@d4 4
d66 1
a66 1
    val set_pervasive_dir : string -> unit
@


1.10
log
@Added  pervasive_library_id and builtin_library_id, made ModuleId an
eqtype, moved getenv functionality to a separate module, and moved\ntrans_home_name functionality to filename.
@
text
@d4 4
d53 6
a58 1
       a default value is used. *)
a63 5

    val get_source_path : unit -> Directory list
    val set_source_path : string list -> unit
    val set_source_path_from_env : unit -> unit
    val set_source_path_from_string : string -> unit
@


1.9
log
@Removed several functions that are now unused or moved to filename.
@
text
@d4 3
a35 1
    type ModuleId
d37 1
a37 5

    val null_location: Directory

    exception BadHomeName of string
    val trans_home_name : string -> string
d44 3
d51 1
a55 1
    exception NotSet of string
@


1.9.1.1
log
@Fork for bug fixing
@
text
@a3 3
Revision 1.9  1993/08/17  17:55:07  daveb
Removed several functions that are now unused or moved to filename.

@


1.8
log
@Changed Option.T to Option.opt.
@
text
@d4 3
a30 2
require "../utils/option";

d33 6
a38 7
    structure Option : OPTION
    val root_name : string -> string
    val compilation_name : string -> string
    val compilation_path : string -> string
    val sml_name : string -> string
    val mo_name : string -> string
    exception bad_home_name of string
a39 5
    val relative_name : string * string -> string
    val ignore_line : instream -> unit
    val ignore_spaces : string list -> string list
    val strip_to_quote : string list -> bool
    val extract_path : string -> string
a44 1
    val pervasive_names		: string list
d46 13
a58 2
    val pervasive_library_dir	: string ref
    val get_pervasive_dir : string list -> string Option.opt
@


1.7
log
@Added a trans_home_name function for translating filenames satarting with ~
@
text
@d4 3
d53 1
a53 1
    val get_pervasive_dir : string list -> string Option.T
@


1.6
log
@Added get_pervasive_dir to get value of PERVASIVE_DIR environment variable
@
text
@d4 3
d35 2
@


1.5
log
@Moved the special names out of the compiler as a whole.
@
text
@d4 3
d22 2
d26 1
d45 1
@


1.4
log
@Made changes to allow mo files to be copied.
@
text
@d4 3
d31 8
a38 1
    val pervasive_library_dir : string ref
@


1.3
log
@Took out input_line function (there is one in MLWorks.IO now).
@
text
@d4 3
d28 1
a28 1
    val pervasive_library_path : string ref
@


1.2
log
@Added ignore_line function
@
text
@d4 3
a20 1
    val input_line : instream -> string
@


1.1
log
@Initial revision
@
text
@d3 4
a6 1
$Log$
d19 1
@
