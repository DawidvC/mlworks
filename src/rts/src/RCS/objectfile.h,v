head	1.13;
access;
symbols
	MLW_daveb_inline_1_4_99:1.13.1
	MLWorks_21c0_1999_03_25:1.13
	MLWorks_20c1_1998_08_20:1.12
	MLWorks_20c0_1998_08_04:1.12
	MLWorks_20b2c2_1998_06_19:1.12
	MLWorks_20b2_Windows_1998_06_12:1.12
	MLWorks_20b1c1_1998_05_07:1.12
	MLWorks_20b0_1998_04_07:1.11
	MLWorks_20b0_1998_03_20:1.11
	MLWorks_20m2_1998_02_16:1.11
	MLWorks_MM_adapt:1.10.1
	MLWorks_20m1_1997_10_23:1.9
	MLWorks_11r1:1.8.9.1.1.1.1
	MLWorks_workspace_97:1.8.11
	MLWorks_dt_wizard:1.8.10
	MLWorks_11c0_1997_09_09:1.8.9.1.1.1
	MLWorks_10r3:1.8.9.1.3
	MLWorks_10r2_551:1.8.9.1.2
	MLWorks_11:1.8.9.1.1
	MLWorks_1_0_r2c2_1997_07_28:1.8.9.1
	MLWorks_20m0_1997_06_20:1.8
	MLWorks_1_0_r2c2_1997_06_14:1.8.9.1
	MLWorks_1_0_r2c1_released_1997_05_23:1.8.9.1
	MLWorks_1_0_r2c1_1997_05_12:1.8.9
	MLWorks_BugFix_1997_04_24:1.8
	MLWorks_1_0_r2_Win32_1997_04_11:1.8
	MLWorks_1_0_r2_Unix_1997_04_04:1.8
	MM_ML_release_korma_1997_04_01:1.8
	MLWorks_1_0_1_ULTRASPARC_1997_02_24:1.8.7.1.1
	MLWorks_gui_1996_12_18:1.8.8
	MLWorks_1_0_Win32_1996_12_17:1.8.7
	MLWorks_1_0_Irix_1996_11_28_released_1996_12_17:1.8.4.1.1.1
	MLWorks_1_0_Unix_1996_11_14_released_1996_12_17:1.8.4.1
	JFHrts:1.8.6
	MLWorks_1_0_Irix_1996_11_28:1.8.4.1.1
	MLWorks_1_0_Win32_1996_11_22:1.8.5
	MLWorks_1_0_Unix_1996_11_14:1.8.4
	MLWorks_Open_Beta2_1996_10_11:1.8.3
	MLWorks_License_dev:1.8.2
	MLWorks_1_open_beta_1996_09_13:1.8.1
	MLWorks_Open_Beta_1996_08_22:1.8
	MLWorks_Beta_1996_07_02:1.8
	MLWorks_Beta_1996_06_07:1.8
	MLWorks_Beta_1996_06_06:1.8
	MLWorks_Beta_1996_06_05:1.8
	MLWorks_Beta_1996_06_03:1.8
	MLWorks_Beta_1996_05_31:1.8
	MLWorks_Beta_1996_05_30:1.8
	hope_poo:1.6.1
	ML_beta_release_12/08/94:1.6.1.1
	ML_beta_release_03/08/94:1.6;
locks; strict;
comment	@ * @;


1.13
date	98.09.16.15.40.52;	author jont;	state Exp;
branches
	1.13.1.1;
next	1.12;

1.12
date	98.04.22.11.30.27;	author jont;	state Exp;
branches;
next	1.11;

1.11
date	98.01.27.17.59.58;	author jont;	state Exp;
branches;
next	1.10;

1.10
date	97.10.20.21.27.27;	author jont;	state Exp;
branches
	1.10.1.1;
next	1.9;

1.9
date	97.10.10.10.03.51;	author daveb;	state Exp;
branches;
next	1.8;

1.8
date	95.04.07.09.24.40;	author matthew;	state Exp;
branches
	1.8.1.1
	1.8.2.1
	1.8.3.1
	1.8.4.1
	1.8.5.1
	1.8.6.1
	1.8.7.1
	1.8.8.1
	1.8.9.1
	1.8.10.1
	1.8.11.1;
next	1.7;

1.7
date	95.04.06.10.30.47;	author matthew;	state Exp;
branches;
next	1.6;

1.6
date	94.07.22.14.31.00;	author jont;	state Exp;
branches
	1.6.1.1;
next	1.5;

1.5
date	94.06.24.15.20.29;	author jont;	state Exp;
branches;
next	1.4;

1.4
date	94.06.21.16.00.03;	author nickh;	state Exp;
branches;
next	1.3;

1.3
date	94.06.13.12.04.11;	author nickh;	state Exp;
branches;
next	1.2;

1.2
date	94.06.09.14.43.55;	author nickh;	state Exp;
branches;
next	1.1;

1.1
date	94.06.09.11.12.32;	author nickh;	state Exp;
branches;
next	;

1.6.1.1
date	95.07.05.10.29.45;	author hope;	state Exp;
branches;
next	;

1.8.1.1
date	96.09.13.11.25.16;	author hope;	state Exp;
branches;
next	;

1.8.2.1
date	96.10.07.16.15.38;	author hope;	state Exp;
branches;
next	;

1.8.3.1
date	96.10.17.11.35.04;	author hope;	state Exp;
branches;
next	;

1.8.4.1
date	96.11.14.13.00.44;	author hope;	state Exp;
branches
	1.8.4.1.1.1;
next	;

1.8.4.1.1.1
date	96.11.28.15.10.48;	author hope;	state Exp;
branches;
next	;

1.8.5.1
date	96.11.22.18.18.34;	author hope;	state Exp;
branches;
next	;

1.8.6.1
date	96.12.17.10.05.18;	author hope;	state Exp;
branches;
next	;

1.8.7.1
date	96.12.17.17.56.52;	author hope;	state Exp;
branches
	1.8.7.1.1.1;
next	;

1.8.7.1.1.1
date	97.02.24.11.48.32;	author hope;	state Exp;
branches;
next	;

1.8.8.1
date	96.12.18.09.51.32;	author hope;	state Exp;
branches;
next	;

1.8.9.1
date	97.05.12.10.45.14;	author hope;	state Exp;
branches
	1.8.9.1.1.1
	1.8.9.1.2.1
	1.8.9.1.3.1;
next	;

1.8.9.1.1.1
date	97.07.28.18.29.33;	author daveb;	state Exp;
branches
	1.8.9.1.1.1.1.1;
next	;

1.8.9.1.1.1.1.1
date	97.10.07.11.55.24;	author jkbrook;	state Exp;
branches;
next	;

1.8.9.1.2.1
date	97.09.08.17.22.32;	author daveb;	state Exp;
branches;
next	;

1.8.9.1.3.1
date	97.09.09.14.18.34;	author daveb;	state Exp;
branches;
next	;

1.8.10.1
date	97.09.10.19.38.08;	author brucem;	state Exp;
branches;
next	;

1.8.11.1
date	97.09.11.21.05.51;	author daveb;	state Exp;
branches;
next	1.8.11.2;

1.8.11.2
date	97.10.29.12.10.14;	author daveb;	state Exp;
branches;
next	1.8.11.3;

1.8.11.3
date	97.10.29.14.18.42;	author daveb;	state Exp;
branches;
next	;

1.10.1.1
date	97.10.31.13.48.54;	author nickb;	state Exp;
branches;
next	;

1.13.1.1
date	99.04.01.18.04.32;	author daveb;	state Exp;
branches;
next	;


desc
@new file
@


1.13
log
@[Bug #30108]
Increment code version as implicit vector layout has changed
@
text
@/*
 * objectfile.h
 * The ML object file format.
 * $Log: src:objectfile.h,v $
 * Revision 1.12  1998/04/22  11:30:27  jont
 * [Bug #70091]
 * Change OBJECT_FILE_VERSION as we're about
 * to change the consistency info format
 *
 * Revision 1.11  1998/01/27  17:59:58  jont
 * [Bug #30330]
 * Update OBJECT_FILE_VERSION to cope with modifications for valenvs in tynames
 *
 * Revision 1.10  1997/10/20  21:27:27  jont
 * [Bug #30089]
 * New version for change in time type
 *
 * Revision 1.9  1997/10/10  10:03:51  daveb
 * [Bug #20090]
 * Consistency information now stores modification times of the source,
 * instead of those of the object.
 * Therefore increased the object file version.
 *
 * Revision 1.8  1995/04/07  09:24:40  matthew
 * Adding OBJECT_CODE_VERSION
 *
 * Revision 1.7  1995/04/06  10:30:47  matthew
 * Changing header size and version number
 *
 * Revision 1.6  1994/07/22  14:31:00  jont
 * Increase version number for save register count
 *
 * Revision 1.5  1994/06/24  15:20:29  jont
 * Increase version to 13
 *
 * Revision 1.4  1994/06/21  16:00:03  nickh
 * Bump version number: wordset layout has changed.
 *
 * Revision 1.3  1994/06/13  12:04:11  nickh
 * Bump version number.
 *
 * Revision 1.2  1994/06/09  14:43:55  nickh
 * new file
 *
 * Revision 1.1  1994/06/09  11:12:32  nickh
 * new file
 *
 * Revision 1.18  1993/11/30  15:49:44  matthew
 * New Version number because of change to TYNAME and METATYNAME
 *
 * Revision 1.17  1993/08/26  15:40:46  daveb
 * Added HEADER_SIZE.
 *
 * Revision 1.16  1993/06/14  18:53:30  daveb
 * New object file format.
 *
 * Revision 1.15  1993/05/27  15:07:15  jont
 * New version cos encapsulator has changed
 *
 * Revision 1.14  1993/05/13  13:21:01  richard
 * Changed the encapsulation format of code vectors, and so the
 * object file version is now 6.
 *
 * Revision 1.13  1993/03/24  12:17:20  richard
 * Corrected #define symbols to upper case.
 *
 * Revision 1.12  1993/03/18  11:40:18  jont
 * New version to account for code changes for leaf and intercept offset
 *
 * Revision 1.11  1993/02/03  16:00:12  jont
 * Changes for code vector reform
 *
 * Revision 1.10  1993/01/15  10:23:46  daveb
 * Changed version to object_file_version, because this identifier is
 * macro-expanded by the C pre-processor, and "version" had false matches.
 *
 * Revision 1.9  1993/01/15  10:07:52  daveb
 * Changed runtime_version to version (since it's the version of the
 * object file format, not of the runtime system).
 *
 * Revision 1.8  1993/01/04  16:05:36  daveb
 * Added a version number for the object file format.
 *
 * Revision 1.7  1992/05/12  15:17:57  jont
 * Changed to use a magic number we can safely represent
 *
 * Revision 1.6  1991/10/17  16:52:26  davidt
 * Put the magic numbers in here so that one awk script can collect
 * the magic numbers as well as the opcode numbers.
 *
 * Revision 1.5  91/10/16  14:40:33  davidt
 * Changed enum datatype to a set of #defines to make automatic generation
 * of the sml file from this file easier.
 * 
 * Revision 1.4  91/10/16  12:55:39  davidt
 * Took out lots of the redundant opcodes now that the object file format
 * has been redesigned.
 * 
 * Revision 1.3  91/10/15  16:46:16  davidt
 * Put in opcode_wordset and took out old (commented out) version
 * of opcode types.
 * 
 * Revision 1.2  91/05/15  15:29:09  jont
 * New set of opcodes for revision of load format
 * 
 * Revision 1.1  91/05/14  11:06:20  jont
 * Initial revision
 * 
 */

/* Avoid multiple inclusion */
#ifndef codes_h
#define codes_h

/*
 * GOOD_MAGIC (0x1ADE6818) is an ML object file of the same endianness.
 * NOT_SO_GOOD_MAGIC (0x1868DE1A) is an ML object file of the wrong endianness.
 */

#define OLD_GOOD_MAGIC		987654321
#define GOOD_MAGIC		450783256
#define NOT_SO_GOOD_MAGIC	409525786

#define HEADER_SIZE	36
/*
 * The current version number.  Changed whenever the format of the object
 * files or of the generated code is changed.  This number is tested
 * when loading an object file (loader.c, encapsulate.sml) and when loading
 * a wordset in the interpreter (interload.sml).
 */

#define OBJECT_FILE_VERSION 20

/*
 * The earliest version number with code format compatible with the latest version
 * ie.  if a change to the encapsulation format only affects type environments there
 * is no need to change this
*/

#define OBJECT_CODE_VERSION 20

/*
 * The opcodes used in the object file.
 */

#define OPCODE_CODESET	0
#define OPCODE_REAL	1
#define OPCODE_STRING	2
#define OPCODE_EXTERNAL	3

#endif
@


1.13.1.1
log
@branched from trunk for label MLW_daveb_inline_1_4_99
@
text
@a4 4
 * Revision 1.13  1998/09/16  15:40:52  jont
 * [Bug #30108]
 * Increment code version as implicit vector layout has changed
 *
@


1.12
log
@[Bug #70091]
Change OBJECT_FILE_VERSION as we're about
to change the consistency info format
@
text
@d5 5
d132 1
a132 1
#define OBJECT_FILE_VERSION 19
d140 1
a140 1
#define OBJECT_CODE_VERSION 19
@


1.11
log
@[Bug #30330]
Update OBJECT_FILE_VERSION to cope with modifications for valenvs in tynames
@
text
@d5 4
d127 1
a127 1
#define OBJECT_FILE_VERSION 18
d135 1
a135 1
#define OBJECT_CODE_VERSION 15
@


1.10
log
@[Bug #30089]
New version for change in time type
@
text
@d5 4
d123 1
a123 1
#define OBJECT_FILE_VERSION 17
@


1.10.1.1
log
@branched from trunk for label MLWorks_MM_adapt
@
text
@a4 4
 * Revision 1.10  1997/10/20  21:27:27  jont
 * [Bug #30089]
 * New version for change in time type
 *
@


1.9
log
@[Bug #20090]
Consistency information now stores modification times of the source,
instead of those of the object.
Therefore increased the object file version.
@
text
@d5 6
d119 1
a119 1
#define OBJECT_FILE_VERSION 16
@


1.8
log
@Adding OBJECT_CODE_VERSION
@
text
@d5 3
d113 1
a113 1
#define OBJECT_FILE_VERSION 15
@


1.8.11.1
log
@branched from trunk for label MLWorks_workspace_97
@
text
@a4 3
 * Revision 1.8  1995/04/07  09:24:40  matthew
 * Adding OBJECT_CODE_VERSION
 *
@


1.8.11.2
log
@[Bug #20090]
Merged from trunk:
Consistency information now stores modification times of the source,
instead of those of the object.
Therefore increased the object file version.
@
text
@a4 4
 *
 * Revision 1.8.11.1  1997/09/11  21:05:51  daveb
 * branched from trunk for label MLWorks_workspace_97
 *
d113 1
a113 1
#define OBJECT_FILE_VERSION 16
@


1.8.11.3
log
@[Bug #30089]
Merged from trunk:
New version for change in time type
@
text
@a5 7
 * Revision 1.8.11.2  1997/10/29  12:10:14  daveb
 * [Bug #20090]
 * Merged from trunk:
 * Consistency information now stores modification times of the source,
 * instead of those of the object.
 * Therefore increased the object file version.
 *
d117 1
a117 1
#define OBJECT_FILE_VERSION 17
@


1.8.10.1
log
@branched from trunk for label MLWorks_dt_wizard
@
text
@a4 3
 * Revision 1.8  1995/04/07  09:24:40  matthew
 * Adding OBJECT_CODE_VERSION
 *
@


1.8.9.1
log
@branched from 1.8
@
text
@a4 3
 * Revision 1.8  1995/04/07  09:24:40  matthew
 * Adding OBJECT_CODE_VERSION
 *
@


1.8.9.1.3.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r3
@
text
@a4 3
 * Revision 1.8.9.1  1997/05/12  10:45:14  hope
 * branched from 1.8
 *
@


1.8.9.1.2.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_10r2_551
@
text
@a4 3
 * Revision 1.8.9.1  1997/05/12  10:45:14  hope
 * branched from 1.8
 *
@


1.8.9.1.1.1
log
@branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
@
text
@a4 3
 * Revision 1.8.9.1  1997/05/12  10:45:14  hope
 * branched from 1.8
 *
@


1.8.9.1.1.1.1.1
log
@branched from MLWorks_11 for label MLWorks_11r1
@
text
@a4 3
 * Revision 1.8.9.1.1.1  1997/07/28  18:29:33  daveb
 * branched from MLWorks_1_0_r2c1_1997_05_12 for label MLWorks_11
 *
@


1.8.8.1
log
@branched from 1.8
@
text
@a4 3
 * Revision 1.8  1995/04/07  09:24:40  matthew
 * Adding OBJECT_CODE_VERSION
 *
@


1.8.7.1
log
@branched from 1.8
@
text
@a4 3
 * Revision 1.8  1995/04/07  09:24:40  matthew
 * Adding OBJECT_CODE_VERSION
 *
@


1.8.7.1.1.1
log
@branched from 1.8.7.1
@
text
@a4 3
 * Revision 1.8.7.1  1996/12/17  17:56:52  hope
 * branched from 1.8
 *
@


1.8.6.1
log
@branched from 1.8
@
text
@a4 3
 * Revision 1.8  1995/04/07  09:24:40  matthew
 * Adding OBJECT_CODE_VERSION
 *
@


1.8.5.1
log
@branched from 1.8
@
text
@a4 3
 * Revision 1.8  1995/04/07  09:24:40  matthew
 * Adding OBJECT_CODE_VERSION
 *
@


1.8.4.1
log
@branched from 1.8
@
text
@a4 3
 * Revision 1.8  1995/04/07  09:24:40  matthew
 * Adding OBJECT_CODE_VERSION
 *
@


1.8.4.1.1.1
log
@branched from 1.8.4.1
@
text
@a4 3
 * Revision 1.8.4.1  1996/11/14  13:00:44  hope
 * branched from 1.8
 *
@


1.8.3.1
log
@branched from 1.8
@
text
@a4 3
 * Revision 1.8  1995/04/07  09:24:40  matthew
 * Adding OBJECT_CODE_VERSION
 *
@


1.8.2.1
log
@branched from 1.8
@
text
@a4 3
 * Revision 1.8  1995/04/07  09:24:40  matthew
 * Adding OBJECT_CODE_VERSION
 *
@


1.8.1.1
log
@branched from 1.8
@
text
@a4 3
 * Revision 1.8  1995/04/07  09:24:40  matthew
 * Adding OBJECT_CODE_VERSION
 *
@


1.7
log
@Changing header size and version number
@
text
@d5 3
d111 8
@


1.6
log
@Increase version number for save register count
@
text
@d5 3
d99 1
a99 1
#define HEADER_SIZE	44
d107 1
a107 1
#define OBJECT_FILE_VERSION 14
@


1.6.1.1
log
@branched from 1.6
@
text
@a4 3
 * Revision 1.6  1994/07/22  14:31:00  jont
 * Increase version number for save register count
 *
@


1.5
log
@Increase version to 13
@
text
@d5 3
d104 1
a104 1
#define OBJECT_FILE_VERSION 13
@


1.4
log
@Bump version number: wordset layout has changed.
@
text
@d5 3
d101 1
a101 1
#define OBJECT_FILE_VERSION 12
@


1.3
log
@Bump version number.
@
text
@d5 3
d98 1
a98 1
#define OBJECT_FILE_VERSION 11
@


1.2
log
@new file
@
text
@d5 3
d95 1
a95 1
#define OBJECT_FILE_VERSION 10
@


1.1
log
@new file
@
text
@d4 4
a7 1
 * $Log: objectfile.h,v $
@
