head	1.4;
access;
symbols
	Final_version_of_old_runtime:1.4
	ML_revised_beta_release_25/05/94:1.4
	ML_final_beta_release_02/03/94:1.4
	mlworks-28-01-1994:1.4
	Release:1.4
	mlworks-beta-01-09-1993:1.4
	MLWorks-1-0-3-21/12/1992:1.4
	MLWorks-1-0-2-15/12/1992:1.4
	MLWorks-1-0-1-04/12/1992:1.4
	checkpoint_17_08_92:1.4;
locks; strict;


1.4
date	92.07.09.09.03.55;	author richard;	state Exp;
branches
	1.4.1.1;
next	1.3;

1.3
date	92.07.03.08.07.28;	author richard;	state Exp;
branches;
next	1.2;

1.2
date	92.01.08.12.16.01;	author richard;	state Exp;
branches;
next	1.1;

1.1
date	91.10.24.16.39.31;	author davidt;	state Exp;
branches;
next	;

1.4.1.1
date	92.07.09.09.03.55;	author jont;	state Exp;
branches;
next	;


desc
@Awk file to generate the file implicit.sml from implicit.c
@


1.4
log
@Corrected the regular expressions matched.
@
text
@BEGIN {
	print "(*  ==== IMPLICIT VECTOR OFFSETS ====";
        print " *";
        print " *  Machine generated from implicit.c by implicit.awk";
        print " *  DO NOT ALTER";
	print " *)";
	print ("\nsignature IMPLICIT_VECTOR =");
	print ("  sig");
      }

/^.* struct  *implicit_vector *$/ {
	  START = 1;
	}

/} .*; *$/ {
	  START = 0;
	}

	{
	  if (START > 2) print("    val", $2, ": int");
	  if (START > 0) ++START;
	}

END {
	print ("  end");
    }
@


1.4.1.1
log
@Fork for bug fixing
@
text
@@


1.3
log
@Changed to read implicit.h
@
text
@d11 1
a11 1
/^ *struct  *implicit_vector/ {
d15 1
a15 1
/};/	{
@


1.2
log
@Changed the pattern match to make the script more robust and improved
the documentation.
@
text
@d11 1
a11 1
/.*implicit_vector\[\].*/ {
d20 2
a21 2
	  if (START == 2) print("    val", $2, ": int");
	  if (START == 1) START = 2;
@


1.1
log
@Initial revision
@
text
@d2 4
a5 4
	print "\n(*";
	print " * Implicit vector offsets";
	print " * Machine generated file : DO NOT ALTER";
	print " * Generated from : implicit.c";
d8 1
a8 1
	print ("sig");
d11 1
a11 1
/.*implicit_vector.*/ {
d20 1
a20 1
	  if (START == 2) print("  val", $2, ": int");
d25 1
a25 1
	print ("end;");
@
